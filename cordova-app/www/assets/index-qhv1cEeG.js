var oE=Object.defineProperty;var lb=i=>{throw TypeError(i)};var aE=(i,t,e)=>t in i?oE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var _t=(i,t,e)=>aE(i,typeof t!="symbol"?t+"":t,e),If=(i,t,e)=>t.has(i)||lb("Cannot "+e);var l=(i,t,e)=>(If(i,t,"read from private field"),e?e.call(i):t.get(i)),A=(i,t,e)=>t.has(i)?lb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),_=(i,t,e,s)=>(If(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),y=(i,t,e)=>(If(i,t,"access private method"),e);var cs=(i,t,e,s)=>({set _(n){_(i,t,n,e)},get _(){return l(i,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ig(i,t){const e=new Set(i.split(","));return s=>e.has(s)}const Jt={},ma=[],Hs=()=>{},lE=()=>!1,zd=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),Og=i=>i.startsWith("onUpdate:"),Be=Object.assign,Dg=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},cE=Object.prototype.hasOwnProperty,Dt=(i,t)=>cE.call(i,t),gt=Array.isArray,ba=i=>Ud(i)==="[object Map]",Iv=i=>Ud(i)==="[object Set]",yt=i=>typeof i=="function",be=i=>typeof i=="string",fr=i=>typeof i=="symbol",Zt=i=>i!==null&&typeof i=="object",Ov=i=>(Zt(i)||yt(i))&&yt(i.then)&&yt(i.catch),Dv=Object.prototype.toString,Ud=i=>Dv.call(i),hE=i=>Ud(i).slice(8,-1),Fv=i=>Ud(i)==="[object Object]",Fg=i=>be(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,tc=Ig(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wd=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},uE=/-(\w)/g,ai=Wd(i=>i.replace(uE,(t,e)=>e?e.toUpperCase():"")),dE=/\B([A-Z])/g,Xo=Wd(i=>i.replace(dE,"-$1").toLowerCase()),Vd=Wd(i=>i.charAt(0).toUpperCase()+i.slice(1)),Of=Wd(i=>i?`on${Vd(i)}`:""),cr=(i,t)=>!Object.is(i,t),ku=(i,...t)=>{for(let e=0;e<i.length;e++)i[e](...t)},Nv=(i,t,e,s=!1)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:s,value:e})},Jf=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let cb;const Hv=()=>cb||(cb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gd(i){if(gt(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=be(s)?mE(s):Gd(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(be(i)||Zt(i))return i}const fE=/;(?![^(]*\))/g,pE=/:([^]+)/,gE=/\/\*[^]*?\*\//g;function mE(i){const t={};return i.replace(gE,"").split(fE).forEach(e=>{if(e){const s=e.split(pE);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ng(i){let t="";if(be(i))t=i;else if(gt(i))for(let e=0;e<i.length;e++){const s=Ng(i[e]);s&&(t+=s+" ")}else if(Zt(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const bE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vE=Ig(bE);function $v(i){return!!i||i===""}const Bv=i=>!!(i&&i.__v_isRef===!0),pa=i=>be(i)?i:i==null?"":gt(i)||Zt(i)&&(i.toString===Dv||!yt(i.toString))?Bv(i)?pa(i.value):JSON.stringify(i,jv,2):String(i),jv=(i,t)=>Bv(t)?jv(i,t.value):ba(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[Df(s,r)+" =>"]=n,e),{})}:Iv(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Df(e))}:fr(t)?Df(t):Zt(t)&&!gt(t)&&!Fv(t)?String(t):t,Df=(i,t="")=>{var e;return fr(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Us;class _E{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Us,!t&&Us&&(this.index=(Us.scopes||(Us.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Us;try{return Us=this,t()}finally{Us=e}}}on(){Us=this}off(){Us=this.parent}stop(t){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function yE(i,t=Us){t&&t.active&&t.effects.push(i)}function AE(){return Us}let Fo;class Hg{constructor(t,e,s,n){this.fn=t,this.trigger=e,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,yE(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pr();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(wE(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),gr()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=ar,e=Fo;try{return ar=!0,Fo=this,this._runnings++,hb(this),this.fn()}finally{ub(this),this._runnings--,Fo=e,ar=t}}stop(){this.active&&(hb(this),ub(this),this.onStop&&this.onStop(),this.active=!1)}}function wE(i){return i.value}function hb(i){i._trackId++,i._depsLength=0}function ub(i){if(i.deps.length>i._depsLength){for(let t=i._depsLength;t<i.deps.length;t++)zv(i.deps[t],i);i.deps.length=i._depsLength}}function zv(i,t){const e=i.get(t);e!==void 0&&t._trackId!==e&&(i.delete(t),i.size===0&&i.cleanup())}let ar=!0,Zf=0;const Uv=[];function pr(){Uv.push(ar),ar=!1}function gr(){const i=Uv.pop();ar=i===void 0?!0:i}function $g(){Zf++}function Bg(){for(Zf--;!Zf&&tp.length;)tp.shift()()}function Wv(i,t,e){if(t.get(i)!==i._trackId){t.set(i,i._trackId);const s=i.deps[i._depsLength];s!==t?(s&&zv(s,i),i.deps[i._depsLength++]=t):i._depsLength++}}const tp=[];function Vv(i,t,e){$g();for(const s of i.keys()){let n;s._dirtyLevel<t&&(n??(n=i.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(n??(n=i.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&tp.push(s.scheduler)))}Bg()}const Gv=(i,t)=>{const e=new Map;return e.cleanup=i,e.computed=t,e},ep=new WeakMap,No=Symbol(""),sp=Symbol("");function rs(i,t,e){if(ar&&Fo){let s=ep.get(i);s||ep.set(i,s=new Map);let n=s.get(e);n||s.set(e,n=Gv(()=>s.delete(e))),Wv(Fo,n)}}function yn(i,t,e,s,n,r){const o=ep.get(i);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&gt(i)){const c=Number(s);o.forEach((h,u)=>{(u==="length"||!fr(u)&&u>=c)&&a.push(h)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":gt(i)?Fg(e)&&a.push(o.get("length")):(a.push(o.get(No)),ba(i)&&a.push(o.get(sp)));break;case"delete":gt(i)||(a.push(o.get(No)),ba(i)&&a.push(o.get(sp)));break;case"set":ba(i)&&a.push(o.get(No));break}$g();for(const c of a)c&&Vv(c,4);Bg()}const EE=Ig("__proto__,__v_isRef,__isVue"),qv=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(fr)),db=SE();function SE(){const i={};return["includes","indexOf","lastIndexOf"].forEach(t=>{i[t]=function(...e){const s=Bt(this);for(let r=0,o=this.length;r<o;r++)rs(s,"get",r+"");const n=s[t](...e);return n===-1||n===!1?s[t](...e.map(Bt)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{i[t]=function(...e){pr(),$g();const s=Bt(this)[t].apply(this,e);return Bg(),gr(),s}}),i}function CE(i){fr(i)||(i=String(i));const t=Bt(this);return rs(t,"has",i),t.hasOwnProperty(i)}class Xv{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?HE:Jv:r?Qv:Yv).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=gt(t);if(!n){if(o&&Dt(db,e))return Reflect.get(db,e,s);if(e==="hasOwnProperty")return CE}const a=Reflect.get(t,e,s);return(fr(e)?qv.has(e):EE(e))||(n||rs(t,"get",e),r)?a:os(a)?o&&Fg(e)?a:a.value:Zt(a)?n?t_(a):Xd(a):a}}class Kv extends Xv{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const c=$o(r);if(!bl(s)&&!$o(s)&&(r=Bt(r),s=Bt(s)),!gt(t)&&os(r)&&!os(s))return c?!1:(r.value=s,!0)}const o=gt(t)&&Fg(e)?Number(e)<t.length:Dt(t,e),a=Reflect.set(t,e,s,n);return t===Bt(n)&&(o?cr(s,r)&&yn(t,"set",e,s):yn(t,"add",e,s)),a}deleteProperty(t,e){const s=Dt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&yn(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!fr(e)||!qv.has(e))&&rs(t,"has",e),s}ownKeys(t){return rs(t,"iterate",gt(t)?"length":No),Reflect.ownKeys(t)}}class xE extends Xv{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const TE=new Kv,PE=new xE,RE=new Kv(!0);const jg=i=>i,qd=i=>Reflect.getPrototypeOf(i);function vu(i,t,e=!1,s=!1){i=i.__v_raw;const n=Bt(i),r=Bt(t);e||(cr(t,r)&&rs(n,"get",t),rs(n,"get",r));const{has:o}=qd(n),a=s?jg:e?Wg:dc;if(o.call(n,t))return a(i.get(t));if(o.call(n,r))return a(i.get(r));i!==n&&i.get(t)}function _u(i,t=!1){const e=this.__v_raw,s=Bt(e),n=Bt(i);return t||(cr(i,n)&&rs(s,"has",i),rs(s,"has",n)),i===n?e.has(i):e.has(i)||e.has(n)}function yu(i,t=!1){return i=i.__v_raw,!t&&rs(Bt(i),"iterate",No),Reflect.get(i,"size",i)}function fb(i,t=!1){!t&&!bl(i)&&!$o(i)&&(i=Bt(i));const e=Bt(this);return qd(e).has.call(e,i)||(e.add(i),yn(e,"add",i,i)),this}function pb(i,t,e=!1){!e&&!bl(t)&&!$o(t)&&(t=Bt(t));const s=Bt(this),{has:n,get:r}=qd(s);let o=n.call(s,i);o||(i=Bt(i),o=n.call(s,i));const a=r.call(s,i);return s.set(i,t),o?cr(t,a)&&yn(s,"set",i,t):yn(s,"add",i,t),this}function gb(i){const t=Bt(this),{has:e,get:s}=qd(t);let n=e.call(t,i);n||(i=Bt(i),n=e.call(t,i)),s&&s.call(t,i);const r=t.delete(i);return n&&yn(t,"delete",i,void 0),r}function mb(){const i=Bt(this),t=i.size!==0,e=i.clear();return t&&yn(i,"clear",void 0,void 0),e}function Au(i,t){return function(s,n){const r=this,o=r.__v_raw,a=Bt(o),c=t?jg:i?Wg:dc;return!i&&rs(a,"iterate",No),o.forEach((h,u)=>s.call(n,c(h),c(u),r))}}function wu(i,t,e){return function(...s){const n=this.__v_raw,r=Bt(n),o=ba(r),a=i==="entries"||i===Symbol.iterator&&o,c=i==="keys"&&o,h=n[i](...s),u=e?jg:t?Wg:dc;return!t&&rs(r,"iterate",c?sp:No),{next(){const{value:f,done:p}=h.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Ln(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function LE(){const i={get(r){return vu(this,r)},get size(){return yu(this)},has:_u,add:fb,set:pb,delete:gb,clear:mb,forEach:Au(!1,!1)},t={get(r){return vu(this,r,!1,!0)},get size(){return yu(this)},has:_u,add(r){return fb.call(this,r,!0)},set(r,o){return pb.call(this,r,o,!0)},delete:gb,clear:mb,forEach:Au(!1,!0)},e={get(r){return vu(this,r,!0)},get size(){return yu(this,!0)},has(r){return _u.call(this,r,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:Au(!0,!1)},s={get(r){return vu(this,r,!0,!0)},get size(){return yu(this,!0)},has(r){return _u.call(this,r,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:Au(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=wu(r,!1,!1),e[r]=wu(r,!0,!1),t[r]=wu(r,!1,!0),s[r]=wu(r,!0,!0)}),[i,e,t,s]}const[kE,ME,IE,OE]=LE();function zg(i,t){const e=t?i?OE:IE:i?ME:kE;return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(Dt(e,n)&&n in s?e:s,n,r)}const DE={get:zg(!1,!1)},FE={get:zg(!1,!0)},NE={get:zg(!0,!1)};const Yv=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,HE=new WeakMap;function $E(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BE(i){return i.__v_skip||!Object.isExtensible(i)?0:$E(hE(i))}function Xd(i){return $o(i)?i:Ug(i,!1,TE,DE,Yv)}function Zv(i){return Ug(i,!1,RE,FE,Qv)}function t_(i){return Ug(i,!0,PE,NE,Jv)}function Ug(i,t,e,s,n){if(!Zt(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=n.get(i);if(r)return r;const o=BE(i);if(o===0)return i;const a=new Proxy(i,o===2?s:e);return n.set(i,a),a}function ec(i){return $o(i)?ec(i.__v_raw):!!(i&&i.__v_isReactive)}function $o(i){return!!(i&&i.__v_isReadonly)}function bl(i){return!!(i&&i.__v_isShallow)}function e_(i){return i?!!i.__v_raw:!1}function Bt(i){const t=i&&i.__v_raw;return t?Bt(t):i}function jE(i){return Object.isExtensible(i)&&Nv(i,"__v_skip",!0),i}const dc=i=>Zt(i)?Xd(i):i,Wg=i=>Zt(i)?t_(i):i;class s_{constructor(t,e,s,n){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Hg(()=>t(this._value),()=>Mu(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const t=Bt(this);return(!t._cacheable||t.effect.dirty)&&cr(t._value,t._value=t.effect.run())&&Mu(t,4),i_(t),t.effect._dirtyLevel>=2&&Mu(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function zE(i,t,e=!1){let s,n;const r=yt(i);return r?(s=i,n=Hs):(s=i.get,n=i.set),new s_(s,n,r||!n,e)}function i_(i){var t;ar&&Fo&&(i=Bt(i),Wv(Fo,(t=i.dep)!=null?t:i.dep=Gv(()=>i.dep=void 0,i instanceof s_?i:void 0)))}function Mu(i,t=4,e,s){i=Bt(i);const n=i.dep;n&&Vv(n,t)}function os(i){return!!(i&&i.__v_isRef===!0)}function Pi(i){return n_(i,!1)}function UE(i){return n_(i,!0)}function n_(i,t){return os(i)?i:new WE(i,t)}class WE{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Bt(t),this._value=e?t:dc(t)}get value(){return i_(this),this._value}set value(t){const e=this.__v_isShallow||bl(t)||$o(t);t=e?t:Bt(t),cr(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=e?t:dc(t),Mu(this,4))}}function va(i){return os(i)?i.value:i}const VE={get:(i,t,e)=>va(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return os(n)&&!os(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function r_(i){return ec(i)?i:new Proxy(i,VE)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lr(i,t,e,s){try{return s?i(...s):i()}catch(n){Kd(n,t,e)}}function oi(i,t,e,s){if(yt(i)){const n=lr(i,t,e,s);return n&&Ov(n)&&n.catch(r=>{Kd(r,t,e)}),n}if(gt(i)){const n=[];for(let r=0;r<i.length;r++)n.push(oi(i[r],t,e,s));return n}}function Kd(i,t,e,s=!0){const n=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;r;){const h=r.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](i,o,a)===!1)return}r=r.parent}const c=t.appContext.config.errorHandler;if(c){pr(),lr(c,null,10,[i,o,a]),gr();return}}GE(i,e,n,s)}function GE(i,t,e,s=!0){console.error(i)}let fc=!1,ip=!1;const Ne=[];let Ri=0;const _a=[];let Dn=null,Or=0;const o_=Promise.resolve();let Vg=null;function a_(i){const t=Vg||o_;return i?t.then(this?i.bind(this):i):t}function qE(i){let t=Ri+1,e=Ne.length;for(;t<e;){const s=t+e>>>1,n=Ne[s],r=pc(n);r<i||r===i&&n.pre?t=s+1:e=s}return t}function Gg(i){(!Ne.length||!Ne.includes(i,fc&&i.allowRecurse?Ri+1:Ri))&&(i.id==null?Ne.push(i):Ne.splice(qE(i.id),0,i),l_())}function l_(){!fc&&!ip&&(ip=!0,Vg=o_.then(h_))}function XE(i){const t=Ne.indexOf(i);t>Ri&&Ne.splice(t,1)}function KE(i){gt(i)?_a.push(...i):(!Dn||!Dn.includes(i,i.allowRecurse?Or+1:Or))&&_a.push(i),l_()}function bb(i,t,e=fc?Ri+1:0){for(;e<Ne.length;e++){const s=Ne[e];if(s&&s.pre){if(i&&s.id!==i.uid)continue;Ne.splice(e,1),e--,s()}}}function c_(i){if(_a.length){const t=[...new Set(_a)].sort((e,s)=>pc(e)-pc(s));if(_a.length=0,Dn){Dn.push(...t);return}for(Dn=t,Or=0;Or<Dn.length;Or++){const e=Dn[Or];e.active!==!1&&e()}Dn=null,Or=0}}const pc=i=>i.id==null?1/0:i.id,YE=(i,t)=>{const e=pc(i)-pc(t);if(e===0){if(i.pre&&!t.pre)return-1;if(t.pre&&!i.pre)return 1}return e};function h_(i){ip=!1,fc=!0,Ne.sort(YE);try{for(Ri=0;Ri<Ne.length;Ri++){const t=Ne[Ri];t&&t.active!==!1&&lr(t,t.i,t.i?15:14)}}finally{Ri=0,Ne.length=0,c_(),fc=!1,Vg=null,(Ne.length||_a.length)&&h_()}}let Es=null,Yd=null;function hd(i){const t=Es;return Es=i,Yd=i&&i.type.__scopeId||null,t}function u_(i){Yd=i}function d_(){Yd=null}function QE(i,t=Es,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&Tb(-1);const r=hd(t);let o;try{o=i(...n)}finally{hd(r),s._d&&Tb(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function vb(i,t){if(Es===null)return i;const e=ef(Es),s=i.dirs||(i.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,a,c=Jt]=t[n];r&&(yt(r)&&(r={mounted:r,updated:r}),r.deep&&Hn(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:c}))}return i}function Rr(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(pr(),oi(c,e,8,[i.el,a,i,t]),gr())}}function f_(i,t){i.shapeFlag&6&&i.component?f_(i.component.subTree,t):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}/*! #__NO_SIDE_EFFECTS__ */function p_(i,t){return yt(i)?Be({name:i.name},t,{setup:i}):i}const Iu=i=>!!i.type.__asyncLoader,g_=i=>i.type.__isKeepAlive;function JE(i,t){m_(i,"a",t)}function ZE(i,t){m_(i,"da",t)}function m_(i,t,e=He){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(Qd(t,s,e),e){let n=e.parent;for(;n&&n.parent;)g_(n.parent.vnode)&&tS(s,t,e,n),n=n.parent}}function tS(i,t,e,s){const n=Qd(t,i,s,!0);v_(()=>{Dg(s[t],n)},e)}function Qd(i,t,e=He,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{pr();const a=tu(e),c=oi(t,e,i,o);return a(),gr(),c});return s?n.unshift(r):n.push(r),r}}const Pn=i=>(t,e=He)=>{(!tf||i==="sp")&&Qd(i,(...s)=>t(...s),e)},eS=Pn("bm"),b_=Pn("m"),sS=Pn("bu"),iS=Pn("u"),nS=Pn("bum"),v_=Pn("um"),rS=Pn("sp"),oS=Pn("rtg"),aS=Pn("rtc");function lS(i,t=He){Qd("ec",i,t)}const cS="components";function hS(i,t){return dS(cS,i,!0,t)||i}const uS=Symbol.for("v-ndc");function dS(i,t,e=!0,s=!1){const n=Es||He;if(n){const r=n.type;{const a=nC(r,!1);if(a&&(a===t||a===ai(t)||a===Vd(ai(t))))return r}const o=_b(n[i]||r[i],t)||_b(n.appContext[i],t);return!o&&s?r:o}}function _b(i,t){return i&&(i[t]||i[ai(t)]||i[Vd(ai(t))])}function fS(i,t,e,s){let n;const r=e;if(gt(i)||be(i)){n=new Array(i.length);for(let o=0,a=i.length;o<a;o++)n[o]=t(i[o],o,void 0,r)}else if(typeof i=="number"){n=new Array(i);for(let o=0;o<i;o++)n[o]=t(o+1,o,void 0,r)}else if(Zt(i))if(i[Symbol.iterator])n=Array.from(i,(o,a)=>t(o,a,void 0,r));else{const o=Object.keys(i);n=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const h=o[a];n[a]=t(i[h],h,a,r)}}else n=[];return n}const np=i=>i?N_(i)?ef(i):np(i.parent):null,sc=Be(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>np(i.parent),$root:i=>np(i.root),$emit:i=>i.emit,$options:i=>qg(i),$forceUpdate:i=>i.f||(i.f=()=>{i.effect.dirty=!0,Gg(i.update)}),$nextTick:i=>i.n||(i.n=a_.bind(i.proxy)),$watch:i=>FS.bind(i)}),Ff=(i,t)=>i!==Jt&&!i.__isScriptSetup&&Dt(i,t),pS={get({_:i},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:c}=i;let h;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(Ff(s,t))return o[t]=1,s[t];if(n!==Jt&&Dt(n,t))return o[t]=2,n[t];if((h=i.propsOptions[0])&&Dt(h,t))return o[t]=3,r[t];if(e!==Jt&&Dt(e,t))return o[t]=4,e[t];rp&&(o[t]=0)}}const u=sc[t];let f,p;if(u)return t==="$attrs"&&rs(i.attrs,"get",""),u(i);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==Jt&&Dt(e,t))return o[t]=4,e[t];if(p=c.config.globalProperties,Dt(p,t))return p[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return Ff(n,t)?(n[t]=e,!0):s!==Jt&&Dt(s,t)?(s[t]=e,!0):Dt(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!e[o]||i!==Jt&&Dt(i,o)||Ff(t,o)||(a=r[0])&&Dt(a,o)||Dt(s,o)||Dt(sc,o)||Dt(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:Dt(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function yb(i){return gt(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let rp=!0;function gS(i){const t=qg(i),e=i.proxy,s=i.ctx;rp=!1,t.beforeCreate&&Ab(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:a,provide:c,inject:h,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:m,activated:v,deactivated:E,beforeDestroy:w,beforeUnmount:C,destroyed:T,unmounted:L,render:M,renderTracked:k,renderTriggered:N,errorCaptured:W,serverPrefetch:tt,expose:nt,inheritAttrs:J,components:pt,directives:ht,filters:wt}=t;if(h&&mS(h,s,null),o)for(const V in o){const Y=o[V];yt(Y)&&(s[V]=Y.bind(e))}if(n){const V=n.call(e,e);Zt(V)&&(i.data=Xd(V))}if(rp=!0,r)for(const V in r){const Y=r[V],Kt=yt(Y)?Y.bind(e,e):yt(Y.get)?Y.get.bind(e,e):Hs,ie=!yt(Y)&&yt(Y.set)?Y.set.bind(e):Hs,oe=ri({get:Kt,set:ie});Object.defineProperty(s,V,{enumerable:!0,configurable:!0,get:()=>oe.value,set:Et=>oe.value=Et})}if(a)for(const V in a)__(a[V],s,e,V);if(c){const V=yt(c)?c.call(e):c;Reflect.ownKeys(V).forEach(Y=>{Ou(Y,V[Y])})}u&&Ab(u,i,"c");function dt(V,Y){gt(Y)?Y.forEach(Kt=>V(Kt.bind(e))):Y&&V(Y.bind(e))}if(dt(eS,f),dt(b_,p),dt(sS,g),dt(iS,m),dt(JE,v),dt(ZE,E),dt(lS,W),dt(aS,k),dt(oS,N),dt(nS,C),dt(v_,L),dt(rS,tt),gt(nt))if(nt.length){const V=i.exposed||(i.exposed={});nt.forEach(Y=>{Object.defineProperty(V,Y,{get:()=>e[Y],set:Kt=>e[Y]=Kt})})}else i.exposed||(i.exposed={});M&&i.render===Hs&&(i.render=M),J!=null&&(i.inheritAttrs=J),pt&&(i.components=pt),ht&&(i.directives=ht)}function mS(i,t,e=Hs){gt(i)&&(i=op(i));for(const s in i){const n=i[s];let r;Zt(n)?"default"in n?r=Li(n.from||s,n.default,!0):r=Li(n.from||s):r=Li(n),os(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Ab(i,t,e){oi(gt(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function __(i,t,e,s){const n=s.includes(".")?I_(e,s):()=>e[s];if(be(i)){const r=t[i];yt(r)&&ic(n,r)}else if(yt(i))ic(n,i.bind(e));else if(Zt(i))if(gt(i))i.forEach(r=>__(r,t,e,s));else{const r=yt(i.handler)?i.handler.bind(e):t[i.handler];yt(r)&&ic(n,r,i)}}function qg(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(t);let c;return a?c=a:!n.length&&!e&&!s?c=t:(c={},n.length&&n.forEach(h=>ud(c,h,o,!0)),ud(c,t,o)),Zt(t)&&r.set(t,c),c}function ud(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&ud(i,r,e,!0),n&&n.forEach(o=>ud(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=bS[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const bS={data:wb,props:Eb,emits:Eb,methods:Hl,computed:Hl,beforeCreate:ze,created:ze,beforeMount:ze,mounted:ze,beforeUpdate:ze,updated:ze,beforeDestroy:ze,beforeUnmount:ze,destroyed:ze,unmounted:ze,activated:ze,deactivated:ze,errorCaptured:ze,serverPrefetch:ze,components:Hl,directives:Hl,watch:_S,provide:wb,inject:vS};function wb(i,t){return t?i?function(){return Be(yt(i)?i.call(this,this):i,yt(t)?t.call(this,this):t)}:t:i}function vS(i,t){return Hl(op(i),op(t))}function op(i){if(gt(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function ze(i,t){return i?[...new Set([].concat(i,t))]:t}function Hl(i,t){return i?Be(Object.create(null),i,t):t}function Eb(i,t){return i?gt(i)&&gt(t)?[...new Set([...i,...t])]:Be(Object.create(null),yb(i),yb(t??{})):t}function _S(i,t){if(!i)return t;if(!t)return i;const e=Be(Object.create(null),i);for(const s in t)e[s]=ze(i[s],t[s]);return e}function y_(){return{app:null,config:{isNativeTag:lE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yS=0;function AS(i,t){return function(s,n=null){yt(s)||(s=Be({},s)),n!=null&&!Zt(n)&&(n=null);const r=y_(),o=new WeakSet;let a=!1;const c=r.app={_uid:yS++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:oC,get config(){return r.config},set config(h){},use(h,...u){return o.has(h)||(h&&yt(h.install)?(o.add(h),h.install(c,...u)):yt(h)&&(o.add(h),h(c,...u))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,u){return u?(r.components[h]=u,c):r.components[h]},directive(h,u){return u?(r.directives[h]=u,c):r.directives[h]},mount(h,u,f){if(!a){const p=Pe(s,n);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(p,h):i(p,h,f),a=!0,c._container=h,h.__vue_app__=c,ef(p.component)}},unmount(){a&&(i(null,c._container),delete c._container.__vue_app__)},provide(h,u){return r.provides[h]=u,c},runWithContext(h){const u=ya;ya=c;try{return h()}finally{ya=u}}};return c}}let ya=null;function Ou(i,t){if(He){let e=He.provides;const s=He.parent&&He.parent.provides;s===e&&(e=He.provides=Object.create(s)),e[i]=t}}function Li(i,t,e=!1){const s=He||Es;if(s||ya){const n=ya?ya._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&yt(t)?t.call(s&&s.proxy):t}}const A_={},w_=()=>Object.create(A_),E_=i=>Object.getPrototypeOf(i)===A_;function wS(i,t,e,s=!1){const n={},r=w_();i.propsDefaults=Object.create(null),S_(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:Zv(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function ES(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,a=Bt(n),[c]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(Jd(i.emitsOptions,p))continue;const g=t[p];if(c)if(Dt(r,p))g!==r[p]&&(r[p]=g,h=!0);else{const m=ai(p);n[m]=ap(c,a,m,g,i,!1)}else g!==r[p]&&(r[p]=g,h=!0)}}}else{S_(i,t,n,r)&&(h=!0);let u;for(const f in a)(!t||!Dt(t,f)&&((u=Xo(f))===f||!Dt(t,u)))&&(c?e&&(e[f]!==void 0||e[u]!==void 0)&&(n[f]=ap(c,a,f,void 0,i,!0)):delete n[f]);if(r!==a)for(const f in r)(!t||!Dt(t,f))&&(delete r[f],h=!0)}h&&yn(i.attrs,"set","")}function S_(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,a;if(t)for(let c in t){if(tc(c))continue;const h=t[c];let u;n&&Dt(n,u=ai(c))?!r||!r.includes(u)?e[u]=h:(a||(a={}))[u]=h:Jd(i.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=Bt(e),h=a||Jt;for(let u=0;u<r.length;u++){const f=r[u];e[f]=ap(n,c,f,h[f],i,!Dt(h,f))}}return o}function ap(i,t,e,s,n,r){const o=i[e];if(o!=null){const a=Dt(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&yt(c)){const{propsDefaults:h}=n;if(e in h)s=h[e];else{const u=tu(n);s=h[e]=c.call(null,t),u()}}else s=c}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Xo(e))&&(s=!0))}return s}const SS=new WeakMap;function C_(i,t,e=!1){const s=e?SS:t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},a=[];let c=!1;if(!yt(i)){const u=f=>{c=!0;const[p,g]=C_(f,t,!0);Be(o,p),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!c)return Zt(i)&&s.set(i,ma),ma;if(gt(r))for(let u=0;u<r.length;u++){const f=ai(r[u]);Sb(f)&&(o[f]=Jt)}else if(r)for(const u in r){const f=ai(u);if(Sb(f)){const p=r[u],g=o[f]=gt(p)||yt(p)?{type:p}:Be({},p),m=g.type;let v=!1,E=!0;if(gt(m))for(let w=0;w<m.length;++w){const C=m[w],T=yt(C)&&C.name;if(T==="Boolean"){v=!0;break}else T==="String"&&(E=!1)}else v=yt(m)&&m.name==="Boolean";g[0]=v,g[1]=E,(v||Dt(g,"default"))&&a.push(f)}}const h=[o,a];return Zt(i)&&s.set(i,h),h}function Sb(i){return i[0]!=="$"&&!tc(i)}const x_=i=>i[0]==="_"||i==="$stable",Xg=i=>gt(i)?i.map(Ti):[Ti(i)],CS=(i,t,e)=>{if(t._n)return t;const s=QE((...n)=>Xg(t(...n)),e);return s._c=!1,s},T_=(i,t,e)=>{const s=i._ctx;for(const n in i){if(x_(n))continue;const r=i[n];if(yt(r))t[n]=CS(n,r,s);else if(r!=null){const o=Xg(r);t[n]=()=>o}}},P_=(i,t)=>{const e=Xg(t);i.slots.default=()=>e},R_=(i,t,e)=>{for(const s in t)(e||s!=="_")&&(i[s]=t[s])},xS=(i,t,e)=>{const s=i.slots=w_();if(i.vnode.shapeFlag&32){const n=t._;n?(R_(s,t,e),e&&Nv(s,"_",n,!0)):T_(t,s)}else t&&P_(i,t)},TS=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=Jt;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:R_(n,t,e):(r=!t.$stable,T_(t,n)),o=t}else t&&(P_(i,t),o={default:1});if(r)for(const a in n)!x_(a)&&o[a]==null&&delete n[a]};function lp(i,t,e,s,n=!1){if(gt(i)){i.forEach((p,g)=>lp(p,t&&(gt(t)?t[g]:t),e,s,n));return}if(Iu(s)&&!n)return;const r=s.shapeFlag&4?ef(s.component):s.el,o=n?null:r,{i:a,r:c}=i,h=t&&t.r,u=a.refs===Jt?a.refs={}:a.refs,f=a.setupState;if(h!=null&&h!==c&&(be(h)?(u[h]=null,Dt(f,h)&&(f[h]=null)):os(h)&&(h.value=null)),yt(c))lr(c,a,12,[o,u]);else{const p=be(c),g=os(c);if(p||g){const m=()=>{if(i.f){const v=p?Dt(f,c)?f[c]:u[c]:c.value;n?gt(v)&&Dg(v,r):gt(v)?v.includes(r)||v.push(r):p?(u[c]=[r],Dt(f,c)&&(f[c]=u[c])):(c.value=[r],i.k&&(u[i.k]=c.value))}else p?(u[c]=o,Dt(f,c)&&(f[c]=o)):g&&(c.value=o,i.k&&(u[i.k]=o))};o?(m.id=-1,Je(m,e)):m()}}}const PS=Symbol("_vte"),RS=i=>i.__isTeleport,Je=WS;function LS(i){return kS(i)}function kS(i,t){const e=Hv();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:c,setText:h,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=Hs,insertStaticContent:m}=i,v=(S,x,I,$=null,F=null,j=null,K=void 0,G=null,X=!!x.dynamicChildren)=>{if(S===x)return;S&&!Ml(S,x)&&($=O(S),Et(S,F,j,!0),S=null),x.patchFlag===-2&&(X=!1,x.dynamicChildren=null);const{type:B,ref:st,shapeFlag:lt}=x;switch(B){case Zd:E(S,x,I,$);break;case Bo:w(S,x,I,$);break;case $f:S==null&&C(x,I,$,K);break;case Ds:pt(S,x,I,$,F,j,K,G,X);break;default:lt&1?M(S,x,I,$,F,j,K,G,X):lt&6?ht(S,x,I,$,F,j,K,G,X):(lt&64||lt&128)&&B.process(S,x,I,$,F,j,K,G,X,rt)}st!=null&&F&&lp(st,S&&S.ref,j,x||S,!x)},E=(S,x,I,$)=>{if(S==null)s(x.el=a(x.children),I,$);else{const F=x.el=S.el;x.children!==S.children&&h(F,x.children)}},w=(S,x,I,$)=>{S==null?s(x.el=c(x.children||""),I,$):x.el=S.el},C=(S,x,I,$)=>{[S.el,S.anchor]=m(S.children,x,I,$,S.el,S.anchor)},T=({el:S,anchor:x},I,$)=>{let F;for(;S&&S!==x;)F=p(S),s(S,I,$),S=F;s(x,I,$)},L=({el:S,anchor:x})=>{let I;for(;S&&S!==x;)I=p(S),n(S),S=I;n(x)},M=(S,x,I,$,F,j,K,G,X)=>{x.type==="svg"?K="svg":x.type==="math"&&(K="mathml"),S==null?k(x,I,$,F,j,K,G,X):tt(S,x,F,j,K,G,X)},k=(S,x,I,$,F,j,K,G)=>{let X,B;const{props:st,shapeFlag:lt,transition:at,dirs:ft}=S;if(X=S.el=o(S.type,j,st&&st.is,st),lt&8?u(X,S.children):lt&16&&W(S.children,X,null,$,F,Nf(S,j),K,G),ft&&Rr(S,null,$,"created"),N(X,S,S.scopeId,K,$),st){for(const Ct in st)Ct!=="value"&&!tc(Ct)&&r(X,Ct,null,st[Ct],j,$);"value"in st&&r(X,"value",null,st.value,j),(B=st.onVnodeBeforeMount)&&ci(B,$,S)}ft&&Rr(S,null,$,"beforeMount");const mt=MS(F,at);mt&&at.beforeEnter(X),s(X,x,I),((B=st&&st.onVnodeMounted)||mt||ft)&&Je(()=>{B&&ci(B,$,S),mt&&at.enter(X),ft&&Rr(S,null,$,"mounted")},F)},N=(S,x,I,$,F)=>{if(I&&g(S,I),$)for(let j=0;j<$.length;j++)g(S,$[j]);if(F){let j=F.subTree;if(x===j){const K=F.vnode;N(S,K,K.scopeId,K.slotScopeIds,F.parent)}}},W=(S,x,I,$,F,j,K,G,X=0)=>{for(let B=X;B<S.length;B++){const st=S[B]=G?Fn(S[B]):Ti(S[B]);v(null,st,x,I,$,F,j,K,G)}},tt=(S,x,I,$,F,j,K)=>{const G=x.el=S.el;let{patchFlag:X,dynamicChildren:B,dirs:st}=x;X|=S.patchFlag&16;const lt=S.props||Jt,at=x.props||Jt;let ft;if(I&&Lr(I,!1),(ft=at.onVnodeBeforeUpdate)&&ci(ft,I,x,S),st&&Rr(x,S,I,"beforeUpdate"),I&&Lr(I,!0),(lt.innerHTML&&at.innerHTML==null||lt.textContent&&at.textContent==null)&&u(G,""),B?nt(S.dynamicChildren,B,G,I,$,Nf(x,F),j):K||Y(S,x,G,null,I,$,Nf(x,F),j,!1),X>0){if(X&16)J(G,lt,at,I,F);else if(X&2&&lt.class!==at.class&&r(G,"class",null,at.class,F),X&4&&r(G,"style",lt.style,at.style,F),X&8){const mt=x.dynamicProps;for(let Ct=0;Ct<mt.length;Ct++){const Ot=mt[Ct],Qt=lt[Ot],ve=at[Ot];(ve!==Qt||Ot==="value")&&r(G,Ot,Qt,ve,F,I)}}X&1&&S.children!==x.children&&u(G,x.children)}else!K&&B==null&&J(G,lt,at,I,F);((ft=at.onVnodeUpdated)||st)&&Je(()=>{ft&&ci(ft,I,x,S),st&&Rr(x,S,I,"updated")},$)},nt=(S,x,I,$,F,j,K)=>{for(let G=0;G<x.length;G++){const X=S[G],B=x[G],st=X.el&&(X.type===Ds||!Ml(X,B)||X.shapeFlag&70)?f(X.el):I;v(X,B,st,null,$,F,j,K,!0)}},J=(S,x,I,$,F)=>{if(x!==I){if(x!==Jt)for(const j in x)!tc(j)&&!(j in I)&&r(S,j,x[j],null,F,$);for(const j in I){if(tc(j))continue;const K=I[j],G=x[j];K!==G&&j!=="value"&&r(S,j,G,K,F,$)}"value"in I&&r(S,"value",x.value,I.value,F)}},pt=(S,x,I,$,F,j,K,G,X)=>{const B=x.el=S?S.el:a(""),st=x.anchor=S?S.anchor:a("");let{patchFlag:lt,dynamicChildren:at,slotScopeIds:ft}=x;ft&&(G=G?G.concat(ft):ft),S==null?(s(B,I,$),s(st,I,$),W(x.children||[],I,st,F,j,K,G,X)):lt>0&&lt&64&&at&&S.dynamicChildren?(nt(S.dynamicChildren,at,I,F,j,K,G),(x.key!=null||F&&x===F.subTree)&&L_(S,x,!0)):Y(S,x,I,st,F,j,K,G,X)},ht=(S,x,I,$,F,j,K,G,X)=>{x.slotScopeIds=G,S==null?x.shapeFlag&512?F.ctx.activate(x,I,$,K,X):wt(x,I,$,F,j,K,X):At(S,x,X)},wt=(S,x,I,$,F,j,K)=>{const G=S.component=ZS(S,$,F);if(g_(S)&&(G.ctx.renderer=rt),tC(G,!1,K),G.asyncDep){if(F&&F.registerDep(G,dt,K),!S.el){const X=G.subTree=Pe(Bo);w(null,X,x,I)}}else dt(G,S,x,I,F,j,K)},At=(S,x,I)=>{const $=x.component=S.component;if(jS(S,x,I))if($.asyncDep&&!$.asyncResolved){V($,x,I);return}else $.next=x,XE($.update),$.effect.dirty=!0,$.update();else x.el=S.el,$.vnode=x},dt=(S,x,I,$,F,j,K)=>{const G=()=>{if(S.isMounted){let{next:st,bu:lt,u:at,parent:ft,vnode:mt}=S;{const as=k_(S);if(as){st&&(st.el=mt.el,V(S,st,K)),as.asyncDep.then(()=>{S.isUnmounted||G()});return}}let Ct=st,Ot;Lr(S,!1),st?(st.el=mt.el,V(S,st,K)):st=mt,lt&&ku(lt),(Ot=st.props&&st.props.onVnodeBeforeUpdate)&&ci(Ot,ft,st,mt),Lr(S,!0);const Qt=Hf(S),ve=S.subTree;S.subTree=Qt,v(ve,Qt,f(ve.el),O(ve),S,F,j),st.el=Qt.el,Ct===null&&zS(S,Qt.el),at&&Je(at,F),(Ot=st.props&&st.props.onVnodeUpdated)&&Je(()=>ci(Ot,ft,st,mt),F)}else{let st;const{el:lt,props:at}=x,{bm:ft,m:mt,parent:Ct}=S,Ot=Iu(x);if(Lr(S,!1),ft&&ku(ft),!Ot&&(st=at&&at.onVnodeBeforeMount)&&ci(st,Ct,x),Lr(S,!0),lt&&Ht){const Qt=()=>{S.subTree=Hf(S),Ht(lt,S.subTree,S,F,null)};Ot?x.type.__asyncLoader().then(()=>!S.isUnmounted&&Qt()):Qt()}else{const Qt=S.subTree=Hf(S);v(null,Qt,I,$,S,F,j),x.el=Qt.el}if(mt&&Je(mt,F),!Ot&&(st=at&&at.onVnodeMounted)){const Qt=x;Je(()=>ci(st,Ct,Qt),F)}(x.shapeFlag&256||Ct&&Iu(Ct.vnode)&&Ct.vnode.shapeFlag&256)&&S.a&&Je(S.a,F),S.isMounted=!0,x=I=$=null}},X=S.effect=new Hg(G,Hs,()=>Gg(B),S.scope),B=S.update=()=>{X.dirty&&X.run()};B.i=S,B.id=S.uid,Lr(S,!0),B()},V=(S,x,I)=>{x.component=S;const $=S.vnode.props;S.vnode=x,S.next=null,ES(S,x.props,$,I),TS(S,x.children,I),pr(),bb(S),gr()},Y=(S,x,I,$,F,j,K,G,X=!1)=>{const B=S&&S.children,st=S?S.shapeFlag:0,lt=x.children,{patchFlag:at,shapeFlag:ft}=x;if(at>0){if(at&128){ie(B,lt,I,$,F,j,K,G,X);return}else if(at&256){Kt(B,lt,I,$,F,j,K,G,X);return}}ft&8?(st&16&&Ft(B,F,j),lt!==B&&u(I,lt)):st&16?ft&16?ie(B,lt,I,$,F,j,K,G,X):Ft(B,F,j,!0):(st&8&&u(I,""),ft&16&&W(lt,I,$,F,j,K,G,X))},Kt=(S,x,I,$,F,j,K,G,X)=>{S=S||ma,x=x||ma;const B=S.length,st=x.length,lt=Math.min(B,st);let at;for(at=0;at<lt;at++){const ft=x[at]=X?Fn(x[at]):Ti(x[at]);v(S[at],ft,I,null,F,j,K,G,X)}B>st?Ft(S,F,j,!0,!1,lt):W(x,I,$,F,j,K,G,X,lt)},ie=(S,x,I,$,F,j,K,G,X)=>{let B=0;const st=x.length;let lt=S.length-1,at=st-1;for(;B<=lt&&B<=at;){const ft=S[B],mt=x[B]=X?Fn(x[B]):Ti(x[B]);if(Ml(ft,mt))v(ft,mt,I,null,F,j,K,G,X);else break;B++}for(;B<=lt&&B<=at;){const ft=S[lt],mt=x[at]=X?Fn(x[at]):Ti(x[at]);if(Ml(ft,mt))v(ft,mt,I,null,F,j,K,G,X);else break;lt--,at--}if(B>lt){if(B<=at){const ft=at+1,mt=ft<st?x[ft].el:$;for(;B<=at;)v(null,x[B]=X?Fn(x[B]):Ti(x[B]),I,mt,F,j,K,G,X),B++}}else if(B>at)for(;B<=lt;)Et(S[B],F,j,!0),B++;else{const ft=B,mt=B,Ct=new Map;for(B=mt;B<=at;B++){const je=x[B]=X?Fn(x[B]):Ti(x[B]);je.key!=null&&Ct.set(je.key,B)}let Ot,Qt=0;const ve=at-mt+1;let as=!1,vr=0;const _r=new Array(ve);for(B=0;B<ve;B++)_r[B]=0;for(B=ft;B<=lt;B++){const je=S[B];if(Qt>=ve){Et(je,F,j,!0);continue}let Ps;if(je.key!=null)Ps=Ct.get(je.key);else for(Ot=mt;Ot<=at;Ot++)if(_r[Ot-mt]===0&&Ml(je,x[Ot])){Ps=Ot;break}Ps===void 0?Et(je,F,j,!0):(_r[Ps-mt]=B+1,Ps>=vr?vr=Ps:as=!0,v(je,x[Ps],I,null,F,j,K,G,X),Qt++)}const Jo=as?IS(_r):ma;for(Ot=Jo.length-1,B=ve-1;B>=0;B--){const je=mt+B,Ps=x[je],au=je+1<st?x[je+1].el:$;_r[B]===0?v(null,Ps,I,au,F,j,K,G,X):as&&(Ot<0||B!==Jo[Ot]?oe(Ps,I,au,2):Ot--)}}},oe=(S,x,I,$,F=null)=>{const{el:j,type:K,transition:G,children:X,shapeFlag:B}=S;if(B&6){oe(S.component.subTree,x,I,$);return}if(B&128){S.suspense.move(x,I,$);return}if(B&64){K.move(S,x,I,rt);return}if(K===Ds){s(j,x,I);for(let lt=0;lt<X.length;lt++)oe(X[lt],x,I,$);s(S.anchor,x,I);return}if(K===$f){T(S,x,I);return}if($!==2&&B&1&&G)if($===0)G.beforeEnter(j),s(j,x,I),Je(()=>G.enter(j),F);else{const{leave:lt,delayLeave:at,afterLeave:ft}=G,mt=()=>s(j,x,I),Ct=()=>{lt(j,()=>{mt(),ft&&ft()})};at?at(j,mt,Ct):Ct()}else s(j,x,I)},Et=(S,x,I,$=!1,F=!1)=>{const{type:j,props:K,ref:G,children:X,dynamicChildren:B,shapeFlag:st,patchFlag:lt,dirs:at,cacheIndex:ft}=S;if(lt===-2&&(F=!1),G!=null&&lp(G,null,I,S,!0),ft!=null&&(x.renderCache[ft]=void 0),st&256){x.ctx.deactivate(S);return}const mt=st&1&&at,Ct=!Iu(S);let Ot;if(Ct&&(Ot=K&&K.onVnodeBeforeUnmount)&&ci(Ot,x,S),st&6)Yt(S.component,I,$);else{if(st&128){S.suspense.unmount(I,$);return}mt&&Rr(S,null,x,"beforeUnmount"),st&64?S.type.remove(S,x,I,rt,$):B&&!B.hasOnce&&(j!==Ds||lt>0&&lt&64)?Ft(B,x,I,!1,!0):(j===Ds&&lt&384||!F&&st&16)&&Ft(X,x,I),$&&D(S)}(Ct&&(Ot=K&&K.onVnodeUnmounted)||mt)&&Je(()=>{Ot&&ci(Ot,x,S),mt&&Rr(S,null,x,"unmounted")},I)},D=S=>{const{type:x,el:I,anchor:$,transition:F}=S;if(x===Ds){ne(I,$);return}if(x===$f){L(S);return}const j=()=>{n(I),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(S.shapeFlag&1&&F&&!F.persisted){const{leave:K,delayLeave:G}=F,X=()=>K(I,j);G?G(S.el,j,X):X()}else j()},ne=(S,x)=>{let I;for(;S!==x;)I=p(S),n(S),S=I;n(x)},Yt=(S,x,I)=>{const{bum:$,scope:F,update:j,subTree:K,um:G,m:X,a:B}=S;Cb(X),Cb(B),$&&ku($),F.stop(),j&&(j.active=!1,Et(K,S,x,I)),G&&Je(G,x),Je(()=>{S.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},Ft=(S,x,I,$=!1,F=!1,j=0)=>{for(let K=j;K<S.length;K++)Et(S[K],x,I,$,F)},O=S=>{if(S.shapeFlag&6)return O(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const x=p(S.anchor||S.el),I=x&&x[PS];return I?p(I):x};let U=!1;const z=(S,x,I)=>{S==null?x._vnode&&Et(x._vnode,null,null,!0):v(x._vnode||null,S,x,null,null,null,I),x._vnode=S,U||(U=!0,bb(),c_(),U=!1)},rt={p:v,um:Et,m:oe,r:D,mt:wt,mc:W,pc:Y,pbc:nt,n:O,o:i};let q,Ht;return{render:z,hydrate:q,createApp:AS(z,q)}}function Nf({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Lr({effect:i,update:t},e){i.allowRecurse=t.allowRecurse=e}function MS(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function L_(i,t,e=!1){const s=i.children,n=t.children;if(gt(s)&&gt(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=Fn(n[r]),a.el=o.el),!e&&a.patchFlag!==-2&&L_(o,a)),a.type===Zd&&(a.el=o.el)}}function IS(i){const t=i.slice(),e=[0];let s,n,r,o,a;const c=i.length;for(s=0;s<c;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,i[e[a]]<h?r=a+1:o=a;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function k_(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:k_(t)}function Cb(i){if(i)for(let t=0;t<i.length;t++)i[t].active=!1}const OS=Symbol.for("v-scx"),DS=()=>Li(OS),Eu={};function ic(i,t,e){return M_(i,t,e)}function M_(i,t,{immediate:e,deep:s,flush:n,once:r,onTrack:o,onTrigger:a}=Jt){if(t&&r){const k=t;t=(...N)=>{k(...N),M()}}const c=He,h=k=>s===!0?k:Hn(k,s===!1?1:void 0);let u,f=!1,p=!1;if(os(i)?(u=()=>i.value,f=bl(i)):ec(i)?(u=()=>h(i),f=!0):gt(i)?(p=!0,f=i.some(k=>ec(k)||bl(k)),u=()=>i.map(k=>{if(os(k))return k.value;if(ec(k))return h(k);if(yt(k))return lr(k,c,2)})):yt(i)?t?u=()=>lr(i,c,2):u=()=>(g&&g(),oi(i,c,3,[m])):u=Hs,t&&s){const k=u;u=()=>Hn(k())}let g,m=k=>{g=T.onStop=()=>{lr(k,c,4),g=T.onStop=void 0}},v;if(tf)if(m=Hs,t?e&&oi(t,c,3,[u(),p?[]:void 0,m]):u(),n==="sync"){const k=DS();v=k.__watcherHandles||(k.__watcherHandles=[])}else return Hs;let E=p?new Array(i.length).fill(Eu):Eu;const w=()=>{if(!(!T.active||!T.dirty))if(t){const k=T.run();(s||f||(p?k.some((N,W)=>cr(N,E[W])):cr(k,E)))&&(g&&g(),oi(t,c,3,[k,E===Eu?void 0:p&&E[0]===Eu?[]:E,m]),E=k)}else T.run()};w.allowRecurse=!!t;let C;n==="sync"?C=w:n==="post"?C=()=>Je(w,c&&c.suspense):(w.pre=!0,c&&(w.id=c.uid),C=()=>Gg(w));const T=new Hg(u,Hs,C),L=AE(),M=()=>{T.stop(),L&&Dg(L.effects,T)};return t?e?w():E=T.run():n==="post"?Je(T.run.bind(T),c&&c.suspense):T.run(),v&&v.push(M),M}function FS(i,t,e){const s=this.proxy,n=be(i)?i.includes(".")?I_(s,i):()=>s[i]:i.bind(s,s);let r;yt(t)?r=t:(r=t.handler,e=t);const o=tu(this),a=M_(n,r.bind(s),e);return o(),a}function I_(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}function Hn(i,t=1/0,e){if(t<=0||!Zt(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),t--,os(i))Hn(i.value,t,e);else if(gt(i))for(let s=0;s<i.length;s++)Hn(i[s],t,e);else if(Iv(i)||ba(i))i.forEach(s=>{Hn(s,t,e)});else if(Fv(i)){for(const s in i)Hn(i[s],t,e);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&Hn(i[s],t,e)}return i}const NS=(i,t)=>t==="modelValue"||t==="model-value"?i.modelModifiers:i[`${t}Modifiers`]||i[`${ai(t)}Modifiers`]||i[`${Xo(t)}Modifiers`];function HS(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||Jt;let n=e;const r=t.startsWith("update:"),o=r&&NS(s,t.slice(7));o&&(o.trim&&(n=e.map(u=>be(u)?u.trim():u)),o.number&&(n=e.map(Jf)));let a,c=s[a=Of(t)]||s[a=Of(ai(t))];!c&&r&&(c=s[a=Of(Xo(t))]),c&&oi(c,i,6,n);const h=s[a+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,oi(h,i,6,n)}}function O_(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},a=!1;if(!yt(i)){const c=h=>{const u=O_(h,t,!0);u&&(a=!0,Be(o,u))};!e&&t.mixins.length&&t.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}return!r&&!a?(Zt(i)&&s.set(i,null),null):(gt(r)?r.forEach(c=>o[c]=null):Be(o,r),Zt(i)&&s.set(i,o),o)}function Jd(i,t){return!i||!zd(t)?!1:(t=t.slice(2).replace(/Once$/,""),Dt(i,t[0].toLowerCase()+t.slice(1))||Dt(i,Xo(t))||Dt(i,t))}function Hf(i){const{type:t,vnode:e,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:c,render:h,renderCache:u,props:f,data:p,setupState:g,ctx:m,inheritAttrs:v}=i,E=hd(i);let w,C;try{if(e.shapeFlag&4){const L=n||s,M=L;w=Ti(h.call(M,L,u,f,g,p,m)),C=a}else{const L=t;w=Ti(L.length>1?L(f,{attrs:a,slots:o,emit:c}):L(f,null)),C=t.props?a:$S(a)}}catch(L){nc.length=0,Kd(L,i,1),w=Pe(Bo)}let T=w;if(C&&v!==!1){const L=Object.keys(C),{shapeFlag:M}=T;L.length&&M&7&&(r&&L.some(Og)&&(C=BS(C,r)),T=vl(T,C,!1,!0))}return e.dirs&&(T=vl(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&(T.transition=e.transition),w=T,hd(E),w}const $S=i=>{let t;for(const e in i)(e==="class"||e==="style"||zd(e))&&((t||(t={}))[e]=i[e]);return t},BS=(i,t)=>{const e={};for(const s in i)(!Og(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function jS(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:a,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?xb(s,o,h):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!Jd(h,p))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?xb(s,o,h):!0:!!o;return!1}function xb(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!Jd(e,r))return!0}return!1}function zS({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const US=i=>i.__isSuspense;function WS(i,t){t&&t.pendingBranch?gt(i)?t.effects.push(...i):t.effects.push(i):KE(i)}const Ds=Symbol.for("v-fgt"),Zd=Symbol.for("v-txt"),Bo=Symbol.for("v-cmt"),$f=Symbol.for("v-stc"),nc=[];let Ss=null;function es(i=!1){nc.push(Ss=i?null:[])}function VS(){nc.pop(),Ss=nc[nc.length-1]||null}let gc=1;function Tb(i){gc+=i,i<0&&Ss&&(Ss.hasOnce=!0)}function D_(i){return i.dynamicChildren=gc>0?Ss||ma:null,VS(),gc>0&&Ss&&Ss.push(i),i}function As(i,t,e,s,n,r){return D_(xt(i,t,e,s,n,r,!0))}function GS(i,t,e,s,n){return D_(Pe(i,t,e,s,n,!0))}function cp(i){return i?i.__v_isVNode===!0:!1}function Ml(i,t){return i.type===t.type&&i.key===t.key}const F_=({key:i})=>i??null,Du=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?be(i)||os(i)||yt(i)?{i:Es,r:i,k:t,f:!!e}:i:null);function xt(i,t=null,e=null,s=0,n=null,r=i===Ds?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&F_(t),ref:t&&Du(t),scopeId:Yd,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Es};return a?(Kg(c,e),r&128&&i.normalize(c)):e&&(c.shapeFlag|=be(e)?8:16),gc>0&&!o&&Ss&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Ss.push(c),c}const Pe=qS;function qS(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===uS)&&(i=Bo),cp(i)){const a=vl(i,t,!0);return e&&Kg(a,e),gc>0&&!r&&Ss&&(a.shapeFlag&6?Ss[Ss.indexOf(i)]=a:Ss.push(a)),a.patchFlag=-2,a}if(rC(i)&&(i=i.__vccOpts),t){t=XS(t);let{class:a,style:c}=t;a&&!be(a)&&(t.class=Ng(a)),Zt(c)&&(e_(c)&&!gt(c)&&(c=Be({},c)),t.style=Gd(c))}const o=be(i)?1:US(i)?128:RS(i)?64:Zt(i)?4:yt(i)?2:0;return xt(i,t,e,s,n,o,r,!0)}function XS(i){return i?e_(i)||E_(i)?Be({},i):i:null}function vl(i,t,e=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:c}=i,h=t?YS(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&F_(h),ref:t&&t.ref?e&&r?gt(r)?r.concat(Du(t)):[r,Du(t)]:Du(t):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:a,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==Ds?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:c,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&vl(i.ssContent),ssFallback:i.ssFallback&&vl(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return c&&s&&f_(u,c.clone(u)),u}function KS(i=" ",t=0){return Pe(Zd,null,i,t)}function dd(i="",t=!1){return t?(es(),GS(Bo,null,i)):Pe(Bo,null,i)}function Ti(i){return i==null||typeof i=="boolean"?Pe(Bo):gt(i)?Pe(Ds,null,i.slice()):typeof i=="object"?Fn(i):Pe(Zd,null,String(i))}function Fn(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:vl(i)}function Kg(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(gt(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Kg(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!E_(t)?t._ctx=Es:n===3&&Es&&(Es.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else yt(t)?(t={default:t,_ctx:Es},e=32):(t=String(t),s&64?(e=16,t=[KS(t)]):e=8);i.children=t,i.shapeFlag|=e}function YS(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Ng([t.class,s.class]));else if(n==="style")t.style=Gd([t.style,s.style]);else if(zd(n)){const r=t[n],o=s[n];o&&r!==o&&!(gt(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function ci(i,t,e,s=null){oi(i,t,7,[e,s])}const QS=y_();let JS=0;function ZS(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||QS,r={uid:JS++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new _E(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:C_(s,n),emitsOptions:O_(s,n),emit:null,emitted:null,propsDefaults:Jt,inheritAttrs:s.inheritAttrs,ctx:Jt,data:Jt,props:Jt,attrs:Jt,slots:Jt,refs:Jt,setupState:Jt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=HS.bind(null,r),i.ce&&i.ce(r),r}let He=null,fd,hp;{const i=Hv(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};fd=t("__VUE_INSTANCE_SETTERS__",e=>He=e),hp=t("__VUE_SSR_SETTERS__",e=>tf=e)}const tu=i=>{const t=He;return fd(i),i.scope.on(),()=>{i.scope.off(),fd(t)}},Pb=()=>{He&&He.scope.off(),fd(null)};function N_(i){return i.vnode.shapeFlag&4}let tf=!1;function tC(i,t=!1,e=!1){t&&hp(t);const{props:s,children:n}=i.vnode,r=N_(i);wS(i,s,r,t),xS(i,n,e);const o=r?eC(i,t):void 0;return t&&hp(!1),o}function eC(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,pS);const{setup:s}=e;if(s){const n=i.setupContext=s.length>1?iC(i):null,r=tu(i);pr();const o=lr(s,i,0,[i.props,n]);if(gr(),r(),Ov(o)){if(o.then(Pb,Pb),t)return o.then(a=>{Rb(i,a,t)}).catch(a=>{Kd(a,i,0)});i.asyncDep=o}else Rb(i,o,t)}else H_(i,t)}function Rb(i,t,e){yt(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:Zt(t)&&(i.setupState=r_(t)),H_(i,e)}let Lb;function H_(i,t,e){const s=i.type;if(!i.render){if(!t&&Lb&&!s.render){const n=s.template||qg(i).template;if(n){const{isCustomElement:r,compilerOptions:o}=i.appContext.config,{delimiters:a,compilerOptions:c}=s,h=Be(Be({isCustomElement:r,delimiters:a},o),c);s.render=Lb(n,h)}}i.render=s.render||Hs}{const n=tu(i);pr();try{gS(i)}finally{gr(),n()}}}const sC={get(i,t){return rs(i,"get",""),i[t]}};function iC(i){const t=e=>{i.exposed=e||{}};return{attrs:new Proxy(i.attrs,sC),slots:i.slots,emit:i.emit,expose:t}}function ef(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(r_(jE(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in sc)return sc[e](i)},has(t,e){return e in t||e in sc}})):i.proxy}function nC(i,t=!0){return yt(i)?i.displayName||i.name:i.name||t&&i.__name}function rC(i){return yt(i)&&"__vccOpts"in i}const ri=(i,t)=>zE(i,t,tf);function $_(i,t,e){const s=arguments.length;return s===2?Zt(t)&&!gt(t)?cp(t)?Pe(i,null,[t]):Pe(i,t):Pe(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&cp(e)&&(e=[e]),Pe(i,t,e))}const oC="3.4.38";/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const aC="http://www.w3.org/2000/svg",lC="http://www.w3.org/1998/Math/MathML",Wi=typeof document<"u"?document:null,kb=Wi&&Wi.createElement("template"),cC={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?Wi.createElementNS(aC,i):t==="mathml"?Wi.createElementNS(lC,i):e?Wi.createElement(i,{is:e}):Wi.createElement(i);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>Wi.createTextNode(i),createComment:i=>Wi.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Wi.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{kb.innerHTML=s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i;const a=kb.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},hC=Symbol("_vtc");function uC(i,t,e){const s=i[hC];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const pd=Symbol("_vod"),B_=Symbol("_vsh"),dC={beforeMount(i,{value:t},{transition:e}){i[pd]=i.style.display==="none"?"":i.style.display,e&&t?e.beforeEnter(i):Il(i,t)},mounted(i,{value:t},{transition:e}){e&&t&&e.enter(i)},updated(i,{value:t,oldValue:e},{transition:s}){!t!=!e&&(s?t?(s.beforeEnter(i),Il(i,!0),s.enter(i)):s.leave(i,()=>{Il(i,!1)}):Il(i,t))},beforeUnmount(i,{value:t}){Il(i,t)}};function Il(i,t){i.style.display=t?i[pd]:"none",i[B_]=!t}const fC=Symbol(""),pC=/(^|;)\s*display\s*:/;function gC(i,t,e){const s=i.style,n=be(e);let r=!1;if(e&&!n){if(t)if(be(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Fu(s,a,"")}else for(const o in t)e[o]==null&&Fu(s,o,"");for(const o in e)o==="display"&&(r=!0),Fu(s,o,e[o])}else if(n){if(t!==e){const o=s[fC];o&&(e+=";"+o),s.cssText=e,r=pC.test(e)}}else t&&i.removeAttribute("style");pd in i&&(i[pd]=r?s.display:"",i[B_]&&(s.display="none"))}const Mb=/\s*!important$/;function Fu(i,t,e){if(gt(e))e.forEach(s=>Fu(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=mC(i,t);Mb.test(e)?i.setProperty(Xo(s),e.replace(Mb,""),"important"):i[s]=e}}const Ib=["Webkit","Moz","ms"],Bf={};function mC(i,t){const e=Bf[t];if(e)return e;let s=ai(t);if(s!=="filter"&&s in i)return Bf[t]=s;s=Vd(s);for(let n=0;n<Ib.length;n++){const r=Ib[n]+s;if(r in i)return Bf[t]=r}return t}const Ob="http://www.w3.org/1999/xlink";function Db(i,t,e,s,n,r=vE(t)){s&&t.startsWith("xlink:")?e==null?i.removeAttributeNS(Ob,t.slice(6,t.length)):i.setAttributeNS(Ob,t,e):e==null||r&&!$v(e)?i.removeAttribute(t):i.setAttribute(t,r?"":fr(e)?String(e):e)}function bC(i,t,e,s){if(t==="innerHTML"||t==="textContent"){if(e==null)return;i[t]=e;return}const n=i.tagName;if(t==="value"&&n!=="PROGRESS"&&!n.includes("-")){const o=n==="OPTION"?i.getAttribute("value")||"":i.value,a=e==null?"":String(e);(o!==a||!("_value"in i))&&(i.value=a),e==null&&i.removeAttribute(t),i._value=e;return}let r=!1;if(e===""||e==null){const o=typeof i[t];o==="boolean"?e=$v(e):e==null&&o==="string"?(e="",r=!0):o==="number"&&(e=0,r=!0)}try{i[t]=e}catch{}r&&i.removeAttribute(t)}function na(i,t,e,s){i.addEventListener(t,e,s)}function vC(i,t,e,s){i.removeEventListener(t,e,s)}const Fb=Symbol("_vei");function _C(i,t,e,s,n=null){const r=i[Fb]||(i[Fb]={}),o=r[t];if(s&&o)o.value=s;else{const[a,c]=yC(t);if(s){const h=r[t]=EC(s,n);na(i,a,h,c)}else o&&(vC(i,a,o,c),r[t]=void 0)}}const Nb=/(?:Once|Passive|Capture)$/;function yC(i){let t;if(Nb.test(i)){t={};let s;for(;s=i.match(Nb);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Xo(i.slice(2)),t]}let jf=0;const AC=Promise.resolve(),wC=()=>jf||(AC.then(()=>jf=0),jf=Date.now());function EC(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;oi(SC(s,e.value),t,5,[s])};return e.value=i,e.attached=wC(),e}function SC(i,t){if(gt(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Hb=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,CC=(i,t,e,s,n,r)=>{const o=n==="svg";t==="class"?uC(i,s,o):t==="style"?gC(i,e,s):zd(t)?Og(t)||_C(i,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):xC(i,t,s,o))?(bC(i,t,s),!i.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Db(i,t,s,o,r,t!=="value")):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),Db(i,t,s,o))};function xC(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&Hb(t)&&yt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Hb(t)&&be(e)?!1:t in i}const $b=i=>{const t=i.props["onUpdate:modelValue"]||!1;return gt(t)?e=>ku(t,e):t};function TC(i){i.target.composing=!0}function Bb(i){const t=i.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const zf=Symbol("_assign"),PC={created(i,{modifiers:{lazy:t,trim:e,number:s}},n){i[zf]=$b(n);const r=s||n.props&&n.props.type==="number";na(i,t?"change":"input",o=>{if(o.target.composing)return;let a=i.value;e&&(a=a.trim()),r&&(a=Jf(a)),i[zf](a)}),e&&na(i,"change",()=>{i.value=i.value.trim()}),t||(na(i,"compositionstart",TC),na(i,"compositionend",Bb),na(i,"change",Bb))},mounted(i,{value:t}){i.value=t??""},beforeUpdate(i,{value:t,oldValue:e,modifiers:{lazy:s,trim:n,number:r}},o){if(i[zf]=$b(o),i.composing)return;const a=(r||i.type==="number")&&!/^0\d/.test(i.value)?Jf(i.value):i.value,c=t??"";a!==c&&(document.activeElement===i&&i.type!=="range"&&(s&&t===e||n&&i.value.trim()===c)||(i.value=c))}},RC=Be({patchProp:CC},cC);let jb;function LC(){return jb||(jb=LS(RC))}const kC=(...i)=>{const t=LC().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=IC(s);if(!n)return;const r=t._component;!yt(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.innerHTML="";const o=e(n,!1,MC(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function MC(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function IC(i){return be(i)?document.querySelector(i):i}const eu=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},OC={},DC={class:"sticky-header"};function FC(i,t){return es(),As("header",DC," Mallorca Golf Tee Time App ")}const NC=eu(OC,[["render",FC],["__scopeId","data-v-a328d24d"]]);/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ra=typeof document<"u";function HC(i){return i.__esModule||i[Symbol.toStringTag]==="Module"}const zt=Object.assign;function Uf(i,t){const e={};for(const s in t){const n=t[s];e[s]=li(n)?n.map(i):i(n)}return e}const rc=()=>{},li=Array.isArray,j_=/#/g,$C=/&/g,BC=/\//g,jC=/=/g,zC=/\?/g,z_=/\+/g,UC=/%5B/g,WC=/%5D/g,U_=/%5E/g,VC=/%60/g,W_=/%7B/g,GC=/%7C/g,V_=/%7D/g,qC=/%20/g;function Yg(i){return encodeURI(""+i).replace(GC,"|").replace(UC,"[").replace(WC,"]")}function XC(i){return Yg(i).replace(W_,"{").replace(V_,"}").replace(U_,"^")}function up(i){return Yg(i).replace(z_,"%2B").replace(qC,"+").replace(j_,"%23").replace($C,"%26").replace(VC,"`").replace(W_,"{").replace(V_,"}").replace(U_,"^")}function KC(i){return up(i).replace(jC,"%3D")}function YC(i){return Yg(i).replace(j_,"%23").replace(zC,"%3F")}function QC(i){return i==null?"":YC(i).replace(BC,"%2F")}function mc(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const JC=/\/$/,ZC=i=>i.replace(JC,"");function Wf(i,t,e="/"){let s,n={},r="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,a>-1?a:t.length),n=i(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=ix(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:n,hash:mc(o)}}function tx(i,t){const e=t.query?i(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function zb(i,t){return!t||!i.toLowerCase().startsWith(t.toLowerCase())?i:i.slice(t.length)||"/"}function ex(i,t,e){const s=t.matched.length-1,n=e.matched.length-1;return s>-1&&s===n&&_l(t.matched[s],e.matched[n])&&G_(t.params,e.params)&&i(t.query)===i(e.query)&&t.hash===e.hash}function _l(i,t){return(i.aliasOf||i)===(t.aliasOf||t)}function G_(i,t){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(!sx(i[e],t[e]))return!1;return!0}function sx(i,t){return li(i)?Ub(i,t):li(t)?Ub(t,i):i===t}function Ub(i,t){return li(t)?i.length===t.length&&i.every((e,s)=>e===t[s]):i.length===1&&i[0]===t}function ix(i,t){if(i.startsWith("/"))return i;if(!i)return t;const e=t.split("/"),s=i.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const kn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var bc;(function(i){i.pop="pop",i.push="push"})(bc||(bc={}));var oc;(function(i){i.back="back",i.forward="forward",i.unknown=""})(oc||(oc={}));function nx(i){if(!i)if(ra){const t=document.querySelector("base");i=t&&t.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),ZC(i)}const rx=/^[^#]+#/;function ox(i,t){return i.replace(rx,"#")+t}function ax(i,t){const e=document.documentElement.getBoundingClientRect(),s=i.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const sf=()=>({left:window.scrollX,top:window.scrollY});function lx(i){let t;if("el"in i){const e=i.el,s=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=ax(n,i)}else t=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Wb(i,t){return(history.state?history.state.position-t:-1)+i}const dp=new Map;function cx(i,t){dp.set(i,t)}function hx(i){const t=dp.get(i);return dp.delete(i),t}let ux=()=>location.protocol+"//"+location.host;function q_(i,t){const{pathname:e,search:s,hash:n}=t,r=i.indexOf("#");if(r>-1){let a=n.includes(i.slice(r))?i.slice(r).length:1,c=n.slice(a);return c[0]!=="/"&&(c="/"+c),zb(c,"")}return zb(e,i)+s+n}function dx(i,t,e,s){let n=[],r=[],o=null;const a=({state:p})=>{const g=q_(i,location),m=e.value,v=t.value;let E=0;if(p){if(e.value=g,t.value=p,o&&o===m){o=null;return}E=v?p.position-v.position:0}else s(g);n.forEach(w=>{w(e.value,m,{delta:E,type:bc.pop,direction:E?E>0?oc.forward:oc.back:oc.unknown})})};function c(){o=e.value}function h(p){n.push(p);const g=()=>{const m=n.indexOf(p);m>-1&&n.splice(m,1)};return r.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(zt({},p.state,{scroll:sf()}),"")}function f(){for(const p of r)p();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:h,destroy:f}}function Vb(i,t,e,s=!1,n=!1){return{back:i,current:t,forward:e,replaced:s,position:window.history.length,scroll:n?sf():null}}function fx(i){const{history:t,location:e}=window,s={value:q_(i,e)},n={value:t.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,u){const f=i.indexOf("#"),p=f>-1?(e.host&&document.querySelector("base")?i:i.slice(f))+c:ux()+i+c;try{t[u?"replaceState":"pushState"](h,"",p),n.value=h}catch(g){console.error(g),e[u?"replace":"assign"](p)}}function o(c,h){const u=zt({},t.state,Vb(n.value.back,c,n.value.forward,!0),h,{position:n.value.position});r(c,u,!0),s.value=c}function a(c,h){const u=zt({},n.value,t.state,{forward:c,scroll:sf()});r(u.current,u,!0);const f=zt({},Vb(s.value,c,null),{position:u.position+1},h);r(c,f,!1),s.value=c}return{location:s,state:n,push:a,replace:o}}function px(i){i=nx(i);const t=fx(i),e=dx(i,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=zt({location:"",base:i,go:s,createHref:ox.bind(null,i)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function gx(i){return typeof i=="string"||i&&typeof i=="object"}function X_(i){return typeof i=="string"||typeof i=="symbol"}const K_=Symbol("");var Gb;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(Gb||(Gb={}));function yl(i,t){return zt(new Error,{type:i,[K_]:!0},t)}function Bi(i,t){return i instanceof Error&&K_ in i&&(t==null||!!(i.type&t))}const qb="[^/]+?",mx={sensitive:!1,strict:!1,start:!0,end:!0},bx=/[.+*?^${}()[\]/\\]/g;function vx(i,t){const e=zt({},mx,t),s=[];let n=e.start?"^":"";const r=[];for(const h of i){const u=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let f=0;f<h.length;f++){const p=h[f];let g=40+(e.sensitive?.25:0);if(p.type===0)f||(n+="/"),n+=p.value.replace(bx,"\\$&"),g+=40;else if(p.type===1){const{value:m,repeatable:v,optional:E,regexp:w}=p;r.push({name:m,repeatable:v,optional:E});const C=w||qb;if(C!==qb){g+=10;try{new RegExp(`(${C})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${m}" (${C}): `+L.message)}}let T=v?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(T=E&&h.length<2?`(?:/${T})`:"/"+T),E&&(T+="?"),n+=T,g+=20,E&&(g+=-8),v&&(g+=-20),C===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(h){const u=h.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",m=r[p-1];f[m.name]=g&&m.repeatable?g.split("/"):g}return f}function c(h){let u="",f=!1;for(const p of i){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:m,repeatable:v,optional:E}=g,w=m in h?h[m]:"";if(li(w)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const C=li(w)?w.join("/"):w;if(!C)if(E)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function _x(i,t){let e=0;for(;e<i.length&&e<t.length;){const s=t[e]-i[e];if(s)return s;e++}return i.length<t.length?i.length===1&&i[0]===80?-1:1:i.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Y_(i,t){let e=0;const s=i.score,n=t.score;for(;e<s.length&&e<n.length;){const r=_x(s[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-s.length)===1){if(Xb(s))return 1;if(Xb(n))return-1}return n.length-s.length}function Xb(i){const t=i[i.length-1];return i.length>0&&t[t.length-1]<0}const yx={type:0,value:""},Ax=/[a-zA-Z0-9_]/;function wx(i){if(!i)return[[]];if(i==="/")return[[yx]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function t(g){throw new Error(`ERR (${e})/"${h}": ${g}`)}let e=0,s=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let a=0,c,h="",u="";function f(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function p(){h+=c}for(;a<i.length;){if(c=i[a++],c==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:c==="/"?(h&&f(),o()):c===":"?(f(),e=1):p();break;case 4:p(),e=s;break;case 1:c==="("?e=2:Ax.test(c)?p():(f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:e=3:u+=c;break;case 3:f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),f(),o(),n}function Ex(i,t,e){const s=vx(wx(i.path),e),n=zt(s,{record:i,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Sx(i,t){const e=[],s=new Map;t=Qb({strict:!1,end:!0,sensitive:!1},t);function n(f){return s.get(f)}function r(f,p,g){const m=!g,v=Cx(f);v.aliasOf=g&&g.record;const E=Qb(t,f),w=[v];if("alias"in f){const L=typeof f.alias=="string"?[f.alias]:f.alias;for(const M of L)w.push(zt({},v,{components:g?g.record.components:v.components,path:M,aliasOf:g?g.record:v}))}let C,T;for(const L of w){const{path:M}=L;if(p&&M[0]!=="/"){const k=p.record.path,N=k[k.length-1]==="/"?"":"/";L.path=p.record.path+(M&&N+M)}if(C=Ex(L,p,E),g?g.alias.push(C):(T=T||C,T!==C&&T.alias.push(C),m&&f.name&&!Yb(C)&&o(f.name)),Q_(C)&&c(C),v.children){const k=v.children;for(let N=0;N<k.length;N++)r(k[N],C,g&&g.children[N])}g=g||C}return T?()=>{o(T)}:rc}function o(f){if(X_(f)){const p=s.get(f);p&&(s.delete(f),e.splice(e.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=e.indexOf(f);p>-1&&(e.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return e}function c(f){const p=Px(f,e);e.splice(p,0,f),f.record.name&&!Yb(f)&&s.set(f.record.name,f)}function h(f,p){let g,m={},v,E;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw yl(1,{location:f});E=g.record.name,m=zt(Kb(p.params,g.keys.filter(T=>!T.optional).concat(g.parent?g.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),f.params&&Kb(f.params,g.keys.map(T=>T.name))),v=g.stringify(m)}else if(f.path!=null)v=f.path,g=e.find(T=>T.re.test(v)),g&&(m=g.parse(v),E=g.record.name);else{if(g=p.name?s.get(p.name):e.find(T=>T.re.test(p.path)),!g)throw yl(1,{location:f,currentLocation:p});E=g.record.name,m=zt({},p.params,f.params),v=g.stringify(m)}const w=[];let C=g;for(;C;)w.unshift(C.record),C=C.parent;return{name:E,path:v,params:m,matched:w,meta:Tx(w)}}i.forEach(f=>r(f));function u(){e.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function Kb(i,t){const e={};for(const s of t)s in i&&(e[s]=i[s]);return e}function Cx(i){return{path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:void 0,beforeEnter:i.beforeEnter,props:xx(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}}}function xx(i){const t={},e=i.props||!1;if("component"in i)t.default=e;else for(const s in i.components)t[s]=typeof e=="object"?e[s]:e;return t}function Yb(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function Tx(i){return i.reduce((t,e)=>zt(t,e.meta),{})}function Qb(i,t){const e={};for(const s in i)e[s]=s in t?t[s]:i[s];return e}function Px(i,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;Y_(i,t[r])<0?s=r:e=r+1}const n=Rx(i);return n&&(s=t.lastIndexOf(n,s-1)),s}function Rx(i){let t=i;for(;t=t.parent;)if(Q_(t)&&Y_(i,t)===0)return t}function Q_({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function Lx(i){const t={};if(i===""||i==="?")return t;const s=(i[0]==="?"?i.slice(1):i).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(z_," "),o=r.indexOf("="),a=mc(o<0?r:r.slice(0,o)),c=o<0?null:mc(r.slice(o+1));if(a in t){let h=t[a];li(h)||(h=t[a]=[h]),h.push(c)}else t[a]=c}return t}function Jb(i){let t="";for(let e in i){const s=i[e];if(e=KC(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(li(s)?s.map(r=>r&&up(r)):[s&&up(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function kx(i){const t={};for(const e in i){const s=i[e];s!==void 0&&(t[e]=li(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const Mx=Symbol(""),Zb=Symbol(""),nf=Symbol(""),J_=Symbol(""),fp=Symbol("");function Ol(){let i=[];function t(s){return i.push(s),()=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)}}function e(){i=[]}return{add:t,list:()=>i.slice(),reset:e}}function Nn(i,t,e,s,n,r=o=>o()){const o=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,c)=>{const h=p=>{p===!1?c(yl(4,{from:e,to:t})):p instanceof Error?c(p):gx(p)?c(yl(2,{from:t,to:p})):(o&&s.enterCallbacks[n]===o&&typeof p=="function"&&o.push(p),a())},u=r(()=>i.call(s&&s.instances[n],t,e,h));let f=Promise.resolve(u);i.length<3&&(f=f.then(h)),f.catch(p=>c(p))})}function Vf(i,t,e,s,n=r=>r()){const r=[];for(const o of i)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Ix(c)){const u=(c.__vccOpts||c)[t];u&&r.push(Nn(u,e,s,o,a,n))}else{let h=c();r.push(()=>h.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const f=HC(u)?u.default:u;o.components[a]=f;const g=(f.__vccOpts||f)[t];return g&&Nn(g,e,s,o,a,n)()}))}}return r}function Ix(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function tv(i){const t=Li(nf),e=Li(J_),s=ri(()=>{const c=va(i.to);return t.resolve(c)}),n=ri(()=>{const{matched:c}=s.value,{length:h}=c,u=c[h-1],f=e.matched;if(!u||!f.length)return-1;const p=f.findIndex(_l.bind(null,u));if(p>-1)return p;const g=ev(c[h-2]);return h>1&&ev(u)===g&&f[f.length-1].path!==g?f.findIndex(_l.bind(null,c[h-2])):p}),r=ri(()=>n.value>-1&&Nx(e.params,s.value.params)),o=ri(()=>n.value>-1&&n.value===e.matched.length-1&&G_(e.params,s.value.params));function a(c={}){return Fx(c)?t[va(i.replace)?"replace":"push"](va(i.to)).catch(rc):Promise.resolve()}return{route:s,href:ri(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}const Ox=p_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:tv,setup(i,{slots:t}){const e=Xd(tv(i)),{options:s}=Li(nf),n=ri(()=>({[sv(i.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[sv(i.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&t.default(e);return i.custom?r:$_("a",{"aria-current":e.isExactActive?i.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),Dx=Ox;function Fx(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const t=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return i.preventDefault&&i.preventDefault(),!0}}function Nx(i,t){for(const e in t){const s=t[e],n=i[e];if(typeof s=="string"){if(s!==n)return!1}else if(!li(n)||n.length!==s.length||s.some((r,o)=>r!==n[o]))return!1}return!0}function ev(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const sv=(i,t,e)=>i??t??e,Hx=p_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:t,slots:e}){const s=Li(fp),n=ri(()=>i.route||s.value),r=Li(Zb,0),o=ri(()=>{let h=va(r);const{matched:u}=n.value;let f;for(;(f=u[h])&&!f.components;)h++;return h}),a=ri(()=>n.value.matched[o.value]);Ou(Zb,ri(()=>o.value+1)),Ou(Mx,a),Ou(fp,n);const c=Pi();return ic(()=>[c.value,a.value,i.name],([h,u,f],[p,g,m])=>{u&&(u.instances[f]=h,g&&g!==u&&h&&h===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),h&&u&&(!g||!_l(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(v=>v(h))},{flush:"post"}),()=>{const h=n.value,u=i.name,f=a.value,p=f&&f.components[u];if(!p)return iv(e.default,{Component:p,route:h});const g=f.props[u],m=g?g===!0?h.params:typeof g=="function"?g(h):g:null,E=$_(p,zt({},m,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return iv(e.default,{Component:E,route:h})||E}}});function iv(i,t){if(!i)return null;const e=i(t);return e.length===1?e[0]:e}const $x=Hx;function Bx(i){const t=Sx(i.routes,i),e=i.parseQuery||Lx,s=i.stringifyQuery||Jb,n=i.history,r=Ol(),o=Ol(),a=Ol(),c=UE(kn);let h=kn;ra&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Uf.bind(null,O=>""+O),f=Uf.bind(null,QC),p=Uf.bind(null,mc);function g(O,U){let z,rt;return X_(O)?(z=t.getRecordMatcher(O),rt=U):rt=O,t.addRoute(rt,z)}function m(O){const U=t.getRecordMatcher(O);U&&t.removeRoute(U)}function v(){return t.getRoutes().map(O=>O.record)}function E(O){return!!t.getRecordMatcher(O)}function w(O,U){if(U=zt({},U||c.value),typeof O=="string"){const x=Wf(e,O,U.path),I=t.resolve({path:x.path},U),$=n.createHref(x.fullPath);return zt(x,I,{params:p(I.params),hash:mc(x.hash),redirectedFrom:void 0,href:$})}let z;if(O.path!=null)z=zt({},O,{path:Wf(e,O.path,U.path).path});else{const x=zt({},O.params);for(const I in x)x[I]==null&&delete x[I];z=zt({},O,{params:f(x)}),U.params=f(U.params)}const rt=t.resolve(z,U),q=O.hash||"";rt.params=u(p(rt.params));const Ht=tx(s,zt({},O,{hash:XC(q),path:rt.path})),S=n.createHref(Ht);return zt({fullPath:Ht,hash:q,query:s===Jb?kx(O.query):O.query||{}},rt,{redirectedFrom:void 0,href:S})}function C(O){return typeof O=="string"?Wf(e,O,c.value.path):zt({},O)}function T(O,U){if(h!==O)return yl(8,{from:U,to:O})}function L(O){return N(O)}function M(O){return L(zt(C(O),{replace:!0}))}function k(O){const U=O.matched[O.matched.length-1];if(U&&U.redirect){const{redirect:z}=U;let rt=typeof z=="function"?z(O):z;return typeof rt=="string"&&(rt=rt.includes("?")||rt.includes("#")?rt=C(rt):{path:rt},rt.params={}),zt({query:O.query,hash:O.hash,params:rt.path!=null?{}:O.params},rt)}}function N(O,U){const z=h=w(O),rt=c.value,q=O.state,Ht=O.force,S=O.replace===!0,x=k(z);if(x)return N(zt(C(x),{state:typeof x=="object"?zt({},q,x.state):q,force:Ht,replace:S}),U||z);const I=z;I.redirectedFrom=U;let $;return!Ht&&ex(s,rt,z)&&($=yl(16,{to:I,from:rt}),oe(rt,rt,!0,!1)),($?Promise.resolve($):nt(I,rt)).catch(F=>Bi(F)?Bi(F,2)?F:ie(F):Y(F,I,rt)).then(F=>{if(F){if(Bi(F,2))return N(zt({replace:S},C(F.to),{state:typeof F.to=="object"?zt({},q,F.to.state):q,force:Ht}),U||I)}else F=pt(I,rt,!0,S,q);return J(I,rt,F),F})}function W(O,U){const z=T(O,U);return z?Promise.reject(z):Promise.resolve()}function tt(O){const U=ne.values().next().value;return U&&typeof U.runWithContext=="function"?U.runWithContext(O):O()}function nt(O,U){let z;const[rt,q,Ht]=jx(O,U);z=Vf(rt.reverse(),"beforeRouteLeave",O,U);for(const x of rt)x.leaveGuards.forEach(I=>{z.push(Nn(I,O,U))});const S=W.bind(null,O,U);return z.push(S),Ft(z).then(()=>{z=[];for(const x of r.list())z.push(Nn(x,O,U));return z.push(S),Ft(z)}).then(()=>{z=Vf(q,"beforeRouteUpdate",O,U);for(const x of q)x.updateGuards.forEach(I=>{z.push(Nn(I,O,U))});return z.push(S),Ft(z)}).then(()=>{z=[];for(const x of Ht)if(x.beforeEnter)if(li(x.beforeEnter))for(const I of x.beforeEnter)z.push(Nn(I,O,U));else z.push(Nn(x.beforeEnter,O,U));return z.push(S),Ft(z)}).then(()=>(O.matched.forEach(x=>x.enterCallbacks={}),z=Vf(Ht,"beforeRouteEnter",O,U,tt),z.push(S),Ft(z))).then(()=>{z=[];for(const x of o.list())z.push(Nn(x,O,U));return z.push(S),Ft(z)}).catch(x=>Bi(x,8)?x:Promise.reject(x))}function J(O,U,z){a.list().forEach(rt=>tt(()=>rt(O,U,z)))}function pt(O,U,z,rt,q){const Ht=T(O,U);if(Ht)return Ht;const S=U===kn,x=ra?history.state:{};z&&(rt||S?n.replace(O.fullPath,zt({scroll:S&&x&&x.scroll},q)):n.push(O.fullPath,q)),c.value=O,oe(O,U,z,S),ie()}let ht;function wt(){ht||(ht=n.listen((O,U,z)=>{if(!Yt.listening)return;const rt=w(O),q=k(rt);if(q){N(zt(q,{replace:!0}),rt).catch(rc);return}h=rt;const Ht=c.value;ra&&cx(Wb(Ht.fullPath,z.delta),sf()),nt(rt,Ht).catch(S=>Bi(S,12)?S:Bi(S,2)?(N(S.to,rt).then(x=>{Bi(x,20)&&!z.delta&&z.type===bc.pop&&n.go(-1,!1)}).catch(rc),Promise.reject()):(z.delta&&n.go(-z.delta,!1),Y(S,rt,Ht))).then(S=>{S=S||pt(rt,Ht,!1),S&&(z.delta&&!Bi(S,8)?n.go(-z.delta,!1):z.type===bc.pop&&Bi(S,20)&&n.go(-1,!1)),J(rt,Ht,S)}).catch(rc)}))}let At=Ol(),dt=Ol(),V;function Y(O,U,z){ie(O);const rt=dt.list();return rt.length?rt.forEach(q=>q(O,U,z)):console.error(O),Promise.reject(O)}function Kt(){return V&&c.value!==kn?Promise.resolve():new Promise((O,U)=>{At.add([O,U])})}function ie(O){return V||(V=!O,wt(),At.list().forEach(([U,z])=>O?z(O):U()),At.reset()),O}function oe(O,U,z,rt){const{scrollBehavior:q}=i;if(!ra||!q)return Promise.resolve();const Ht=!z&&hx(Wb(O.fullPath,0))||(rt||!z)&&history.state&&history.state.scroll||null;return a_().then(()=>q(O,U,Ht)).then(S=>S&&lx(S)).catch(S=>Y(S,O,U))}const Et=O=>n.go(O);let D;const ne=new Set,Yt={currentRoute:c,listening:!0,addRoute:g,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:E,getRoutes:v,resolve:w,options:i,push:L,replace:M,go:Et,back:()=>Et(-1),forward:()=>Et(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:dt.add,isReady:Kt,install(O){const U=this;O.component("RouterLink",Dx),O.component("RouterView",$x),O.config.globalProperties.$router=U,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>va(c)}),ra&&!D&&c.value===kn&&(D=!0,L(n.location).catch(q=>{}));const z={};for(const q in kn)Object.defineProperty(z,q,{get:()=>c.value[q],enumerable:!0});O.provide(nf,U),O.provide(J_,Zv(z)),O.provide(fp,c);const rt=O.unmount;ne.add(O),O.unmount=function(){ne.delete(O),ne.size<1&&(h=kn,ht&&ht(),ht=null,c.value=kn,D=!1,V=!1),rt()}}};function Ft(O){return O.reduce((U,z)=>U.then(()=>tt(z)),Promise.resolve())}return Yt}function jx(i,t){const e=[],s=[],n=[],r=Math.max(t.matched.length,i.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(i.matched.find(h=>_l(h,a))?s.push(a):e.push(a));const c=i.matched[o];c&&(t.matched.find(h=>_l(h,c))||n.push(c))}return[e,s,n]}function zx(){return Li(nf)}const Ux={class:"sticky-footer"},Wx={__name:"Footer",setup(i){const t=zx(),e=()=>{t.push({path:"/"})},s=()=>{window.open("https://mallorca-golf.es/#book/","_blank")},n=()=>{t.push({path:"/golf-courses"})};return(r,o)=>(es(),As("footer",Ux,[xt("div",{class:"footer-icons"},[xt("i",{class:"fas fa-home",onClick:e}),xt("button",{class:"booking-button",onClick:n},"Tee Time booking..."),xt("i",{class:"fas fa-external-link-alt",onClick:s})])]))}},Vx=eu(Wx,[["__scopeId","data-v-69e845d3"]]);var Gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qx(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var n=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(e,s,n.get?n:{enumerable:!0,get:function(){return i[s]}})}),e}var Xx={exports:{}},Ge="top",Cs="bottom",xs="right",qe="left",rf="auto",xl=[Ge,Cs,xs,qe],jo="start",Al="end",Z_="clippingParents",Qg="viewport",oa="popper",ty="reference",pp=xl.reduce(function(i,t){return i.concat([t+"-"+jo,t+"-"+Al])},[]),Jg=[].concat(xl,[rf]).reduce(function(i,t){return i.concat([t,t+"-"+jo,t+"-"+Al])},[]),ey="beforeRead",sy="read",iy="afterRead",ny="beforeMain",ry="main",oy="afterMain",ay="beforeWrite",ly="write",cy="afterWrite",hy=[ey,sy,iy,ny,ry,oy,ay,ly,cy];function Oi(i){return i?(i.nodeName||"").toLowerCase():null}function Ts(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function zo(i){var t=Ts(i).Element;return i instanceof t||i instanceof Element}function $s(i){var t=Ts(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function Zg(i){if(typeof ShadowRoot>"u")return!1;var t=Ts(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function Kx(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},n=t.attributes[e]||{},r=t.elements[e];!$s(r)||!Oi(r)||(Object.assign(r.style,s),Object.keys(n).forEach(function(o){var a=n[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Yx(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var n=t.elements[s],r=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),a=o.reduce(function(c,h){return c[h]="",c},{});!$s(n)||!Oi(n)||(Object.assign(n.style,a),Object.keys(r).forEach(function(c){n.removeAttribute(c)}))})}}const tm={name:"applyStyles",enabled:!0,phase:"write",fn:Kx,effect:Yx,requires:["computeStyles"]};function ki(i){return i.split("-")[0]}var Ho=Math.max,gd=Math.min,wl=Math.round;function gp(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function uy(){return!/^((?!chrome|android).)*safari/i.test(gp())}function El(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=i.getBoundingClientRect(),n=1,r=1;t&&$s(i)&&(n=i.offsetWidth>0&&wl(s.width)/i.offsetWidth||1,r=i.offsetHeight>0&&wl(s.height)/i.offsetHeight||1);var o=zo(i)?Ts(i):window,a=o.visualViewport,c=!uy()&&e,h=(s.left+(c&&a?a.offsetLeft:0))/n,u=(s.top+(c&&a?a.offsetTop:0))/r,f=s.width/n,p=s.height/r;return{width:f,height:p,top:u,right:h+f,bottom:u+p,left:h,x:h,y:u}}function em(i){var t=El(i),e=i.offsetWidth,s=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:s}}function dy(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&Zg(e)){var s=t;do{if(s&&i.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Cn(i){return Ts(i).getComputedStyle(i)}function Qx(i){return["table","td","th"].indexOf(Oi(i))>=0}function mr(i){return((zo(i)?i.ownerDocument:i.document)||window.document).documentElement}function of(i){return Oi(i)==="html"?i:i.assignedSlot||i.parentNode||(Zg(i)?i.host:null)||mr(i)}function nv(i){return!$s(i)||Cn(i).position==="fixed"?null:i.offsetParent}function Jx(i){var t=/firefox/i.test(gp()),e=/Trident/i.test(gp());if(e&&$s(i)){var s=Cn(i);if(s.position==="fixed")return null}var n=of(i);for(Zg(n)&&(n=n.host);$s(n)&&["html","body"].indexOf(Oi(n))<0;){var r=Cn(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function su(i){for(var t=Ts(i),e=nv(i);e&&Qx(e)&&Cn(e).position==="static";)e=nv(e);return e&&(Oi(e)==="html"||Oi(e)==="body"&&Cn(e).position==="static")?t:e||Jx(i)||t}function sm(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function ac(i,t,e){return Ho(i,gd(t,e))}function Zx(i,t,e){var s=ac(i,t,e);return s>e?e:s}function fy(){return{top:0,right:0,bottom:0,left:0}}function py(i){return Object.assign({},fy(),i)}function gy(i,t){return t.reduce(function(e,s){return e[s]=i,e},{})}var tT=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,py(typeof t!="number"?t:gy(t,xl))};function eT(i){var t,e=i.state,s=i.name,n=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=ki(e.placement),c=sm(a),h=[qe,xs].indexOf(a)>=0,u=h?"height":"width";if(!(!r||!o)){var f=tT(n.padding,e),p=em(r),g=c==="y"?Ge:qe,m=c==="y"?Cs:xs,v=e.rects.reference[u]+e.rects.reference[c]-o[c]-e.rects.popper[u],E=o[c]-e.rects.reference[c],w=su(r),C=w?c==="y"?w.clientHeight||0:w.clientWidth||0:0,T=v/2-E/2,L=f[g],M=C-p[u]-f[m],k=C/2-p[u]/2+T,N=ac(L,k,M),W=c;e.modifiersData[s]=(t={},t[W]=N,t.centerOffset=N-k,t)}}function sT(i){var t=i.state,e=i.options,s=e.element,n=s===void 0?"[data-popper-arrow]":s;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||dy(t.elements.popper,n)&&(t.elements.arrow=n))}const my={name:"arrow",enabled:!0,phase:"main",fn:eT,effect:sT,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sl(i){return i.split("-")[1]}var iT={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nT(i,t){var e=i.x,s=i.y,n=t.devicePixelRatio||1;return{x:wl(e*n)/n||0,y:wl(s*n)/n||0}}function rv(i){var t,e=i.popper,s=i.popperRect,n=i.placement,r=i.variation,o=i.offsets,a=i.position,c=i.gpuAcceleration,h=i.adaptive,u=i.roundOffsets,f=i.isFixed,p=o.x,g=p===void 0?0:p,m=o.y,v=m===void 0?0:m,E=typeof u=="function"?u({x:g,y:v}):{x:g,y:v};g=E.x,v=E.y;var w=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),T=qe,L=Ge,M=window;if(h){var k=su(e),N="clientHeight",W="clientWidth";if(k===Ts(e)&&(k=mr(e),Cn(k).position!=="static"&&a==="absolute"&&(N="scrollHeight",W="scrollWidth")),k=k,n===Ge||(n===qe||n===xs)&&r===Al){L=Cs;var tt=f&&k===M&&M.visualViewport?M.visualViewport.height:k[N];v-=tt-s.height,v*=c?1:-1}if(n===qe||(n===Ge||n===Cs)&&r===Al){T=xs;var nt=f&&k===M&&M.visualViewport?M.visualViewport.width:k[W];g-=nt-s.width,g*=c?1:-1}}var J=Object.assign({position:a},h&&iT),pt=u===!0?nT({x:g,y:v},Ts(e)):{x:g,y:v};if(g=pt.x,v=pt.y,c){var ht;return Object.assign({},J,(ht={},ht[L]=C?"0":"",ht[T]=w?"0":"",ht.transform=(M.devicePixelRatio||1)<=1?"translate("+g+"px, "+v+"px)":"translate3d("+g+"px, "+v+"px, 0)",ht))}return Object.assign({},J,(t={},t[L]=C?v+"px":"",t[T]=w?g+"px":"",t.transform="",t))}function rT(i){var t=i.state,e=i.options,s=e.gpuAcceleration,n=s===void 0?!0:s,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,c=a===void 0?!0:a,h={placement:ki(t.placement),variation:Sl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,rv(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,rv(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const im={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rT,data:{}};var Su={passive:!0};function oT(i){var t=i.state,e=i.instance,s=i.options,n=s.scroll,r=n===void 0?!0:n,o=s.resize,a=o===void 0?!0:o,c=Ts(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&h.forEach(function(u){u.addEventListener("scroll",e.update,Su)}),a&&c.addEventListener("resize",e.update,Su),function(){r&&h.forEach(function(u){u.removeEventListener("scroll",e.update,Su)}),a&&c.removeEventListener("resize",e.update,Su)}}const nm={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:oT,data:{}};var aT={left:"right",right:"left",bottom:"top",top:"bottom"};function Nu(i){return i.replace(/left|right|bottom|top/g,function(t){return aT[t]})}var lT={start:"end",end:"start"};function ov(i){return i.replace(/start|end/g,function(t){return lT[t]})}function rm(i){var t=Ts(i),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function om(i){return El(mr(i)).left+rm(i).scrollLeft}function cT(i,t){var e=Ts(i),s=mr(i),n=e.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,c=0;if(n){r=n.width,o=n.height;var h=uy();(h||!h&&t==="fixed")&&(a=n.offsetLeft,c=n.offsetTop)}return{width:r,height:o,x:a+om(i),y:c}}function hT(i){var t,e=mr(i),s=rm(i),n=(t=i.ownerDocument)==null?void 0:t.body,r=Ho(e.scrollWidth,e.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Ho(e.scrollHeight,e.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-s.scrollLeft+om(i),c=-s.scrollTop;return Cn(n||e).direction==="rtl"&&(a+=Ho(e.clientWidth,n?n.clientWidth:0)-r),{width:r,height:o,x:a,y:c}}function am(i){var t=Cn(i),e=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+n+s)}function by(i){return["html","body","#document"].indexOf(Oi(i))>=0?i.ownerDocument.body:$s(i)&&am(i)?i:by(of(i))}function lc(i,t){var e;t===void 0&&(t=[]);var s=by(i),n=s===((e=i.ownerDocument)==null?void 0:e.body),r=Ts(s),o=n?[r].concat(r.visualViewport||[],am(s)?s:[]):s,a=t.concat(o);return n?a:a.concat(lc(of(o)))}function mp(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function uT(i,t){var e=El(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function av(i,t,e){return t===Qg?mp(cT(i,e)):zo(t)?uT(t,e):mp(hT(mr(i)))}function dT(i){var t=lc(of(i)),e=["absolute","fixed"].indexOf(Cn(i).position)>=0,s=e&&$s(i)?su(i):i;return zo(s)?t.filter(function(n){return zo(n)&&dy(n,s)&&Oi(n)!=="body"}):[]}function fT(i,t,e,s){var n=t==="clippingParents"?dT(i):[].concat(t),r=[].concat(n,[e]),o=r[0],a=r.reduce(function(c,h){var u=av(i,h,s);return c.top=Ho(u.top,c.top),c.right=gd(u.right,c.right),c.bottom=gd(u.bottom,c.bottom),c.left=Ho(u.left,c.left),c},av(i,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function vy(i){var t=i.reference,e=i.element,s=i.placement,n=s?ki(s):null,r=s?Sl(s):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,c;switch(n){case Ge:c={x:o,y:t.y-e.height};break;case Cs:c={x:o,y:t.y+t.height};break;case xs:c={x:t.x+t.width,y:a};break;case qe:c={x:t.x-e.width,y:a};break;default:c={x:t.x,y:t.y}}var h=n?sm(n):null;if(h!=null){var u=h==="y"?"height":"width";switch(r){case jo:c[h]=c[h]-(t[u]/2-e[u]/2);break;case Al:c[h]=c[h]+(t[u]/2-e[u]/2);break}}return c}function Cl(i,t){t===void 0&&(t={});var e=t,s=e.placement,n=s===void 0?i.placement:s,r=e.strategy,o=r===void 0?i.strategy:r,a=e.boundary,c=a===void 0?Z_:a,h=e.rootBoundary,u=h===void 0?Qg:h,f=e.elementContext,p=f===void 0?oa:f,g=e.altBoundary,m=g===void 0?!1:g,v=e.padding,E=v===void 0?0:v,w=py(typeof E!="number"?E:gy(E,xl)),C=p===oa?ty:oa,T=i.rects.popper,L=i.elements[m?C:p],M=fT(zo(L)?L:L.contextElement||mr(i.elements.popper),c,u,o),k=El(i.elements.reference),N=vy({reference:k,element:T,strategy:"absolute",placement:n}),W=mp(Object.assign({},T,N)),tt=p===oa?W:k,nt={top:M.top-tt.top+w.top,bottom:tt.bottom-M.bottom+w.bottom,left:M.left-tt.left+w.left,right:tt.right-M.right+w.right},J=i.modifiersData.offset;if(p===oa&&J){var pt=J[n];Object.keys(nt).forEach(function(ht){var wt=[xs,Cs].indexOf(ht)>=0?1:-1,At=[Ge,Cs].indexOf(ht)>=0?"y":"x";nt[ht]+=pt[At]*wt})}return nt}function pT(i,t){t===void 0&&(t={});var e=t,s=e.placement,n=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,c=e.allowedAutoPlacements,h=c===void 0?Jg:c,u=Sl(s),f=u?a?pp:pp.filter(function(m){return Sl(m)===u}):xl,p=f.filter(function(m){return h.indexOf(m)>=0});p.length===0&&(p=f);var g=p.reduce(function(m,v){return m[v]=Cl(i,{placement:v,boundary:n,rootBoundary:r,padding:o})[ki(v)],m},{});return Object.keys(g).sort(function(m,v){return g[m]-g[v]})}function gT(i){if(ki(i)===rf)return[];var t=Nu(i);return[ov(i),t,ov(t)]}function mT(i){var t=i.state,e=i.options,s=i.name;if(!t.modifiersData[s]._skip){for(var n=e.mainAxis,r=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!0:o,c=e.fallbackPlacements,h=e.padding,u=e.boundary,f=e.rootBoundary,p=e.altBoundary,g=e.flipVariations,m=g===void 0?!0:g,v=e.allowedAutoPlacements,E=t.options.placement,w=ki(E),C=w===E,T=c||(C||!m?[Nu(E)]:gT(E)),L=[E].concat(T).reduce(function(ne,Yt){return ne.concat(ki(Yt)===rf?pT(t,{placement:Yt,boundary:u,rootBoundary:f,padding:h,flipVariations:m,allowedAutoPlacements:v}):Yt)},[]),M=t.rects.reference,k=t.rects.popper,N=new Map,W=!0,tt=L[0],nt=0;nt<L.length;nt++){var J=L[nt],pt=ki(J),ht=Sl(J)===jo,wt=[Ge,Cs].indexOf(pt)>=0,At=wt?"width":"height",dt=Cl(t,{placement:J,boundary:u,rootBoundary:f,altBoundary:p,padding:h}),V=wt?ht?xs:qe:ht?Cs:Ge;M[At]>k[At]&&(V=Nu(V));var Y=Nu(V),Kt=[];if(r&&Kt.push(dt[pt]<=0),a&&Kt.push(dt[V]<=0,dt[Y]<=0),Kt.every(function(ne){return ne})){tt=J,W=!1;break}N.set(J,Kt)}if(W)for(var ie=m?3:1,oe=function(Yt){var Ft=L.find(function(O){var U=N.get(O);if(U)return U.slice(0,Yt).every(function(z){return z})});if(Ft)return tt=Ft,"break"},Et=ie;Et>0;Et--){var D=oe(Et);if(D==="break")break}t.placement!==tt&&(t.modifiersData[s]._skip=!0,t.placement=tt,t.reset=!0)}}const _y={name:"flip",enabled:!0,phase:"main",fn:mT,requiresIfExists:["offset"],data:{_skip:!1}};function lv(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function cv(i){return[Ge,xs,Cs,qe].some(function(t){return i[t]>=0})}function bT(i){var t=i.state,e=i.name,s=t.rects.reference,n=t.rects.popper,r=t.modifiersData.preventOverflow,o=Cl(t,{elementContext:"reference"}),a=Cl(t,{altBoundary:!0}),c=lv(o,s),h=lv(a,n,r),u=cv(c),f=cv(h);t.modifiersData[e]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const yy={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bT};function vT(i,t,e){var s=ki(i),n=[qe,Ge].indexOf(s)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*n,[qe,xs].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function _T(i){var t=i.state,e=i.options,s=i.name,n=e.offset,r=n===void 0?[0,0]:n,o=Jg.reduce(function(u,f){return u[f]=vT(f,t.rects,r),u},{}),a=o[t.placement],c=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=o}const Ay={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_T};function yT(i){var t=i.state,e=i.name;t.modifiersData[e]=vy({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const lm={name:"popperOffsets",enabled:!0,phase:"read",fn:yT,data:{}};function AT(i){return i==="x"?"y":"x"}function wT(i){var t=i.state,e=i.options,s=i.name,n=e.mainAxis,r=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!1:o,c=e.boundary,h=e.rootBoundary,u=e.altBoundary,f=e.padding,p=e.tether,g=p===void 0?!0:p,m=e.tetherOffset,v=m===void 0?0:m,E=Cl(t,{boundary:c,rootBoundary:h,padding:f,altBoundary:u}),w=ki(t.placement),C=Sl(t.placement),T=!C,L=sm(w),M=AT(L),k=t.modifiersData.popperOffsets,N=t.rects.reference,W=t.rects.popper,tt=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,nt=typeof tt=="number"?{mainAxis:tt,altAxis:tt}:Object.assign({mainAxis:0,altAxis:0},tt),J=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,pt={x:0,y:0};if(k){if(r){var ht,wt=L==="y"?Ge:qe,At=L==="y"?Cs:xs,dt=L==="y"?"height":"width",V=k[L],Y=V+E[wt],Kt=V-E[At],ie=g?-W[dt]/2:0,oe=C===jo?N[dt]:W[dt],Et=C===jo?-W[dt]:-N[dt],D=t.elements.arrow,ne=g&&D?em(D):{width:0,height:0},Yt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:fy(),Ft=Yt[wt],O=Yt[At],U=ac(0,N[dt],ne[dt]),z=T?N[dt]/2-ie-U-Ft-nt.mainAxis:oe-U-Ft-nt.mainAxis,rt=T?-N[dt]/2+ie+U+O+nt.mainAxis:Et+U+O+nt.mainAxis,q=t.elements.arrow&&su(t.elements.arrow),Ht=q?L==="y"?q.clientTop||0:q.clientLeft||0:0,S=(ht=J==null?void 0:J[L])!=null?ht:0,x=V+z-S-Ht,I=V+rt-S,$=ac(g?gd(Y,x):Y,V,g?Ho(Kt,I):Kt);k[L]=$,pt[L]=$-V}if(a){var F,j=L==="x"?Ge:qe,K=L==="x"?Cs:xs,G=k[M],X=M==="y"?"height":"width",B=G+E[j],st=G-E[K],lt=[Ge,qe].indexOf(w)!==-1,at=(F=J==null?void 0:J[M])!=null?F:0,ft=lt?B:G-N[X]-W[X]-at+nt.altAxis,mt=lt?G+N[X]+W[X]-at-nt.altAxis:st,Ct=g&&lt?Zx(ft,G,mt):ac(g?ft:B,G,g?mt:st);k[M]=Ct,pt[M]=Ct-G}t.modifiersData[s]=pt}}const wy={name:"preventOverflow",enabled:!0,phase:"main",fn:wT,requiresIfExists:["offset"]};function ET(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function ST(i){return i===Ts(i)||!$s(i)?rm(i):ET(i)}function CT(i){var t=i.getBoundingClientRect(),e=wl(t.width)/i.offsetWidth||1,s=wl(t.height)/i.offsetHeight||1;return e!==1||s!==1}function xT(i,t,e){e===void 0&&(e=!1);var s=$s(t),n=$s(t)&&CT(t),r=mr(t),o=El(i,n,e),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!e)&&((Oi(t)!=="body"||am(r))&&(a=ST(t)),$s(t)?(c=El(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):r&&(c.x=om(r))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function TT(i){var t=new Map,e=new Set,s=[];i.forEach(function(r){t.set(r.name,r)});function n(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var c=t.get(a);c&&n(c)}}),s.push(r)}return i.forEach(function(r){e.has(r.name)||n(r)}),s}function PT(i){var t=TT(i);return hy.reduce(function(e,s){return e.concat(t.filter(function(n){return n.phase===s}))},[])}function RT(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function LT(i){var t=i.reduce(function(e,s){var n=e[s.name];return e[s.name]=n?Object.assign({},n,s,{options:Object.assign({},n.options,s.options),data:Object.assign({},n.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var hv={placement:"bottom",modifiers:[],strategy:"absolute"};function uv(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function af(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,s=e===void 0?[]:e,n=t.defaultOptions,r=n===void 0?hv:n;return function(a,c,h){h===void 0&&(h=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},hv,r),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},f=[],p=!1,g={state:u,setOptions:function(w){var C=typeof w=="function"?w(u.options):w;v(),u.options=Object.assign({},r,u.options,C),u.scrollParents={reference:zo(a)?lc(a):a.contextElement?lc(a.contextElement):[],popper:lc(c)};var T=PT(LT([].concat(s,u.options.modifiers)));return u.orderedModifiers=T.filter(function(L){return L.enabled}),m(),g.update()},forceUpdate:function(){if(!p){var w=u.elements,C=w.reference,T=w.popper;if(uv(C,T)){u.rects={reference:xT(C,su(T),u.options.strategy==="fixed"),popper:em(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(nt){return u.modifiersData[nt.name]=Object.assign({},nt.data)});for(var L=0;L<u.orderedModifiers.length;L++){if(u.reset===!0){u.reset=!1,L=-1;continue}var M=u.orderedModifiers[L],k=M.fn,N=M.options,W=N===void 0?{}:N,tt=M.name;typeof k=="function"&&(u=k({state:u,options:W,name:tt,instance:g})||u)}}}},update:RT(function(){return new Promise(function(E){g.forceUpdate(),E(u)})}),destroy:function(){v(),p=!0}};if(!uv(a,c))return g;g.setOptions(h).then(function(E){!p&&h.onFirstUpdate&&h.onFirstUpdate(E)});function m(){u.orderedModifiers.forEach(function(E){var w=E.name,C=E.options,T=C===void 0?{}:C,L=E.effect;if(typeof L=="function"){var M=L({state:u,name:w,instance:g,options:T}),k=function(){};f.push(M||k)}})}function v(){f.forEach(function(E){return E()}),f=[]}return g}}var kT=af(),MT=[nm,lm,im,tm],IT=af({defaultModifiers:MT}),OT=[nm,lm,im,tm,Ay,_y,wy,my,yy],DT=af({defaultModifiers:OT});const FT=Object.freeze(Object.defineProperty({__proto__:null,afterMain:oy,afterRead:iy,afterWrite:cy,applyStyles:tm,arrow:my,auto:rf,basePlacements:xl,beforeMain:ny,beforeRead:ey,beforeWrite:ay,bottom:Cs,clippingParents:Z_,computeStyles:im,createPopper:DT,createPopperBase:kT,createPopperLite:IT,detectOverflow:Cl,end:Al,eventListeners:nm,flip:_y,hide:yy,left:qe,main:ry,modifierPhases:hy,offset:Ay,placements:Jg,popper:oa,popperGenerator:af,popperOffsets:lm,preventOverflow:wy,read:sy,reference:ty,right:xs,start:jo,top:Ge,variationPlacements:pp,viewport:Qg,write:ly},Symbol.toStringTag,{value:"Module"})),NT=qx(FT);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(i,t){(function(e,s){i.exports=s(NT)})(Gx,function(e){function s(R){const d=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(R){for(const b in R)if(b!=="default"){const P=Object.getOwnPropertyDescriptor(R,b);Object.defineProperty(d,b,P.get?P:{enumerable:!0,get:()=>R[b]})}}return d.default=R,Object.freeze(d)}const n=s(e),r=new Map,o={set(R,d,b){r.has(R)||r.set(R,new Map);const P=r.get(R);P.has(d)||P.size===0?P.set(d,b):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(P.keys())[0]}.`)},get:(R,d)=>r.has(R)&&r.get(R).get(d)||null,remove(R,d){if(!r.has(R))return;const b=r.get(R);b.delete(d),b.size===0&&r.delete(R)}},a="transitionend",c=R=>(R&&window.CSS&&window.CSS.escape&&(R=R.replace(/#([^\s"#']+)/g,(d,b)=>`#${CSS.escape(b)}`)),R),h=R=>{R.dispatchEvent(new Event(a))},u=R=>!(!R||typeof R!="object")&&(R.jquery!==void 0&&(R=R[0]),R.nodeType!==void 0),f=R=>u(R)?R.jquery?R[0]:R:typeof R=="string"&&R.length>0?document.querySelector(c(R)):null,p=R=>{if(!u(R)||R.getClientRects().length===0)return!1;const d=getComputedStyle(R).getPropertyValue("visibility")==="visible",b=R.closest("details:not([open])");if(!b)return d;if(b!==R){const P=R.closest("summary");if(P&&P.parentNode!==b||P===null)return!1}return d},g=R=>!R||R.nodeType!==Node.ELEMENT_NODE||!!R.classList.contains("disabled")||(R.disabled!==void 0?R.disabled:R.hasAttribute("disabled")&&R.getAttribute("disabled")!=="false"),m=R=>{if(!document.documentElement.attachShadow)return null;if(typeof R.getRootNode=="function"){const d=R.getRootNode();return d instanceof ShadowRoot?d:null}return R instanceof ShadowRoot?R:R.parentNode?m(R.parentNode):null},v=()=>{},E=R=>{R.offsetHeight},w=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,C=[],T=()=>document.documentElement.dir==="rtl",L=R=>{var d;d=()=>{const b=w();if(b){const P=R.NAME,H=b.fn[P];b.fn[P]=R.jQueryInterface,b.fn[P].Constructor=R,b.fn[P].noConflict=()=>(b.fn[P]=H,R.jQueryInterface)}},document.readyState==="loading"?(C.length||document.addEventListener("DOMContentLoaded",()=>{for(const b of C)b()}),C.push(d)):d()},M=(R,d=[],b=R)=>typeof R=="function"?R(...d):b,k=(R,d,b=!0)=>{if(!b)return void M(R);const P=(ot=>{if(!ot)return 0;let{transitionDuration:Rt,transitionDelay:te}=window.getComputedStyle(ot);const Ye=Number.parseFloat(Rt),ls=Number.parseFloat(te);return Ye||ls?(Rt=Rt.split(",")[0],te=te.split(",")[0],1e3*(Number.parseFloat(Rt)+Number.parseFloat(te))):0})(d)+5;let H=!1;const Q=({target:ot})=>{ot===d&&(H=!0,d.removeEventListener(a,Q),M(R))};d.addEventListener(a,Q),setTimeout(()=>{H||h(d)},P)},N=(R,d,b,P)=>{const H=R.length;let Q=R.indexOf(d);return Q===-1?!b&&P?R[H-1]:R[0]:(Q+=b?1:-1,P&&(Q=(Q+H)%H),R[Math.max(0,Math.min(Q,H-1))])},W=/[^.]*(?=\..*)\.|.*/,tt=/\..*/,nt=/::\d+$/,J={};let pt=1;const ht={mouseenter:"mouseover",mouseleave:"mouseout"},wt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function At(R,d){return d&&`${d}::${pt++}`||R.uidEvent||pt++}function dt(R){const d=At(R);return R.uidEvent=d,J[d]=J[d]||{},J[d]}function V(R,d,b=null){return Object.values(R).find(P=>P.callable===d&&P.delegationSelector===b)}function Y(R,d,b){const P=typeof d=="string",H=P?b:d||b;let Q=Et(R);return wt.has(Q)||(Q=R),[P,H,Q]}function Kt(R,d,b,P,H){if(typeof d!="string"||!R)return;let[Q,ot,Rt]=Y(d,b,P);d in ht&&(ot=(Tr=>function(zs){if(!zs.relatedTarget||zs.relatedTarget!==zs.delegateTarget&&!zs.delegateTarget.contains(zs.relatedTarget))return Tr.call(this,zs)})(ot));const te=dt(R),Ye=te[Rt]||(te[Rt]={}),ls=V(Ye,ot,Q?b:null);if(ls)return void(ls.oneOff=ls.oneOff&&H);const js=At(ot,d.replace(W,"")),Hi=Q?function($i,Tr,zs){return function kl(bu){const nE=$i.querySelectorAll(Tr);for(let{target:Pr}=bu;Pr&&Pr!==this;Pr=Pr.parentNode)for(const rE of nE)if(rE===Pr)return ne(bu,{delegateTarget:Pr}),kl.oneOff&&D.off($i,bu.type,Tr,zs),zs.apply(Pr,[bu])}}(R,b,ot):function($i,Tr){return function zs(kl){return ne(kl,{delegateTarget:$i}),zs.oneOff&&D.off($i,kl.type,Tr),Tr.apply($i,[kl])}}(R,ot);Hi.delegationSelector=Q?b:null,Hi.callable=ot,Hi.oneOff=H,Hi.uidEvent=js,Ye[js]=Hi,R.addEventListener(Rt,Hi,Q)}function ie(R,d,b,P,H){const Q=V(d[b],P,H);Q&&(R.removeEventListener(b,Q,!!H),delete d[b][Q.uidEvent])}function oe(R,d,b,P){const H=d[b]||{};for(const[Q,ot]of Object.entries(H))Q.includes(P)&&ie(R,d,b,ot.callable,ot.delegationSelector)}function Et(R){return R=R.replace(tt,""),ht[R]||R}const D={on(R,d,b,P){Kt(R,d,b,P,!1)},one(R,d,b,P){Kt(R,d,b,P,!0)},off(R,d,b,P){if(typeof d!="string"||!R)return;const[H,Q,ot]=Y(d,b,P),Rt=ot!==d,te=dt(R),Ye=te[ot]||{},ls=d.startsWith(".");if(Q===void 0){if(ls)for(const js of Object.keys(te))oe(R,te,js,d.slice(1));for(const[js,Hi]of Object.entries(Ye)){const $i=js.replace(nt,"");Rt&&!d.includes($i)||ie(R,te,ot,Hi.callable,Hi.delegationSelector)}}else{if(!Object.keys(Ye).length)return;ie(R,te,ot,Q,H?b:null)}},trigger(R,d,b){if(typeof d!="string"||!R)return null;const P=w();let H=null,Q=!0,ot=!0,Rt=!1;d!==Et(d)&&P&&(H=P.Event(d,b),P(R).trigger(H),Q=!H.isPropagationStopped(),ot=!H.isImmediatePropagationStopped(),Rt=H.isDefaultPrevented());const te=ne(new Event(d,{bubbles:Q,cancelable:!0}),b);return Rt&&te.preventDefault(),ot&&R.dispatchEvent(te),te.defaultPrevented&&H&&H.preventDefault(),te}};function ne(R,d={}){for(const[b,P]of Object.entries(d))try{R[b]=P}catch{Object.defineProperty(R,b,{configurable:!0,get:()=>P})}return R}function Yt(R){if(R==="true")return!0;if(R==="false")return!1;if(R===Number(R).toString())return Number(R);if(R===""||R==="null")return null;if(typeof R!="string")return R;try{return JSON.parse(decodeURIComponent(R))}catch{return R}}function Ft(R){return R.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const O={setDataAttribute(R,d,b){R.setAttribute(`data-bs-${Ft(d)}`,b)},removeDataAttribute(R,d){R.removeAttribute(`data-bs-${Ft(d)}`)},getDataAttributes(R){if(!R)return{};const d={},b=Object.keys(R.dataset).filter(P=>P.startsWith("bs")&&!P.startsWith("bsConfig"));for(const P of b){let H=P.replace(/^bs/,"");H=H.charAt(0).toLowerCase()+H.slice(1,H.length),d[H]=Yt(R.dataset[P])}return d},getDataAttribute:(R,d)=>Yt(R.getAttribute(`data-bs-${Ft(d)}`))};class U{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,b){const P=u(b)?O.getDataAttribute(b,"config"):{};return{...this.constructor.Default,...typeof P=="object"?P:{},...u(b)?O.getDataAttributes(b):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,b=this.constructor.DefaultType){for(const[H,Q]of Object.entries(b)){const ot=d[H],Rt=u(ot)?"element":(P=ot)==null?`${P}`:Object.prototype.toString.call(P).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(Q).test(Rt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${H}" provided type "${Rt}" but expected type "${Q}".`)}var P}}class z extends U{constructor(d,b){super(),(d=f(d))&&(this._element=d,this._config=this._getConfig(b),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),D.off(this._element,this.constructor.EVENT_KEY);for(const d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,b,P=!0){k(d,b,P)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return o.get(f(d),this.DATA_KEY)}static getOrCreateInstance(d,b={}){return this.getInstance(d)||new this(d,typeof b=="object"?b:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}const rt=R=>{let d=R.getAttribute("data-bs-target");if(!d||d==="#"){let b=R.getAttribute("href");if(!b||!b.includes("#")&&!b.startsWith("."))return null;b.includes("#")&&!b.startsWith("#")&&(b=`#${b.split("#")[1]}`),d=b&&b!=="#"?b.trim():null}return d?d.split(",").map(b=>c(b)).join(","):null},q={find:(R,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,R)),findOne:(R,d=document.documentElement)=>Element.prototype.querySelector.call(d,R),children:(R,d)=>[].concat(...R.children).filter(b=>b.matches(d)),parents(R,d){const b=[];let P=R.parentNode.closest(d);for(;P;)b.push(P),P=P.parentNode.closest(d);return b},prev(R,d){let b=R.previousElementSibling;for(;b;){if(b.matches(d))return[b];b=b.previousElementSibling}return[]},next(R,d){let b=R.nextElementSibling;for(;b;){if(b.matches(d))return[b];b=b.nextElementSibling}return[]},focusableChildren(R){const d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(b=>`${b}:not([tabindex^="-"])`).join(",");return this.find(d,R).filter(b=>!g(b)&&p(b))},getSelectorFromElement(R){const d=rt(R);return d&&q.findOne(d)?d:null},getElementFromSelector(R){const d=rt(R);return d?q.findOne(d):null},getMultipleElementsFromSelector(R){const d=rt(R);return d?q.find(d):[]}},Ht=(R,d="hide")=>{const b=`click.dismiss${R.EVENT_KEY}`,P=R.NAME;D.on(document,b,`[data-bs-dismiss="${P}"]`,function(H){if(["A","AREA"].includes(this.tagName)&&H.preventDefault(),g(this))return;const Q=q.getElementFromSelector(this)||this.closest(`.${P}`);R.getOrCreateInstance(Q)[d]()})},S=".bs.alert",x=`close${S}`,I=`closed${S}`;class $ extends z{static get NAME(){return"alert"}close(){if(D.trigger(this._element,x).defaultPrevented)return;this._element.classList.remove("show");const d=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,d)}_destroyElement(){this._element.remove(),D.trigger(this._element,I),this.dispose()}static jQueryInterface(d){return this.each(function(){const b=$.getOrCreateInstance(this);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}Ht($,"close"),L($);const F='[data-bs-toggle="button"]';class j extends z{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const b=j.getOrCreateInstance(this);d==="toggle"&&b[d]()})}}D.on(document,"click.bs.button.data-api",F,R=>{R.preventDefault();const d=R.target.closest(F);j.getOrCreateInstance(d).toggle()}),L(j);const K=".bs.swipe",G=`touchstart${K}`,X=`touchmove${K}`,B=`touchend${K}`,st=`pointerdown${K}`,lt=`pointerup${K}`,at={endCallback:null,leftCallback:null,rightCallback:null},ft={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class mt extends U{constructor(d,b){super(),this._element=d,d&&mt.isSupported()&&(this._config=this._getConfig(b),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return at}static get DefaultType(){return ft}static get NAME(){return"swipe"}dispose(){D.off(this._element,K)}_start(d){this._supportPointerEvents?this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX):this._deltaX=d.touches[0].clientX}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),M(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){const d=Math.abs(this._deltaX);if(d<=40)return;const b=d/this._deltaX;this._deltaX=0,b&&M(b>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(D.on(this._element,st,d=>this._start(d)),D.on(this._element,lt,d=>this._end(d)),this._element.classList.add("pointer-event")):(D.on(this._element,G,d=>this._start(d)),D.on(this._element,X,d=>this._move(d)),D.on(this._element,B,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType==="pen"||d.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ct=".bs.carousel",Ot=".data-api",Qt="next",ve="prev",as="left",vr="right",_r=`slide${Ct}`,Jo=`slid${Ct}`,je=`keydown${Ct}`,Ps=`mouseenter${Ct}`,au=`mouseleave${Ct}`,_w=`dragstart${Ct}`,yw=`load${Ct}${Ot}`,Aw=`click${Ct}${Ot}`,Em="carousel",lu="active",Sm=".active",Cm=".carousel-item",ww=Sm+Cm,Ew={ArrowLeft:vr,ArrowRight:as},Sw={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Cw={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Zo extends z{constructor(d,b){super(d,b),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=q.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Em&&this.cycle()}static get Default(){return Sw}static get DefaultType(){return Cw}static get NAME(){return"carousel"}next(){this._slide(Qt)}nextWhenVisible(){!document.hidden&&p(this._element)&&this.next()}prev(){this._slide(ve)}pause(){this._isSliding&&h(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?D.one(this._element,Jo,()=>this.cycle()):this.cycle())}to(d){const b=this._getItems();if(d>b.length-1||d<0)return;if(this._isSliding)return void D.one(this._element,Jo,()=>this.to(d));const P=this._getItemIndex(this._getActive());if(P===d)return;const H=d>P?Qt:ve;this._slide(H,b[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&D.on(this._element,je,d=>this._keydown(d)),this._config.pause==="hover"&&(D.on(this._element,Ps,()=>this.pause()),D.on(this._element,au,()=>this._maybeEnableCycle())),this._config.touch&&mt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const b of q.find(".carousel-item img",this._element))D.on(b,_w,P=>P.preventDefault());const d={leftCallback:()=>this._slide(this._directionToOrder(as)),rightCallback:()=>this._slide(this._directionToOrder(vr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new mt(this._element,d)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const b=Ew[d.key];b&&(d.preventDefault(),this._slide(this._directionToOrder(b)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;const b=q.findOne(Sm,this._indicatorsElement);b.classList.remove(lu),b.removeAttribute("aria-current");const P=q.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);P&&(P.classList.add(lu),P.setAttribute("aria-current","true"))}_updateInterval(){const d=this._activeElement||this._getActive();if(!d)return;const b=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=b||this._config.defaultInterval}_slide(d,b=null){if(this._isSliding)return;const P=this._getActive(),H=d===Qt,Q=b||N(this._getItems(),P,H,this._config.wrap);if(Q===P)return;const ot=this._getItemIndex(Q),Rt=js=>D.trigger(this._element,js,{relatedTarget:Q,direction:this._orderToDirection(d),from:this._getItemIndex(P),to:ot});if(Rt(_r).defaultPrevented||!P||!Q)return;const te=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ot),this._activeElement=Q;const Ye=H?"carousel-item-start":"carousel-item-end",ls=H?"carousel-item-next":"carousel-item-prev";Q.classList.add(ls),E(Q),P.classList.add(Ye),Q.classList.add(Ye),this._queueCallback(()=>{Q.classList.remove(Ye,ls),Q.classList.add(lu),P.classList.remove(lu,ls,Ye),this._isSliding=!1,Rt(Jo)},P,this._isAnimated()),te&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return q.findOne(ww,this._element)}_getItems(){return q.find(Cm,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return T()?d===as?ve:Qt:d===as?Qt:ve}_orderToDirection(d){return T()?d===ve?as:vr:d===ve?vr:as}static jQueryInterface(d){return this.each(function(){const b=Zo.getOrCreateInstance(this,d);if(typeof d!="number"){if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}}else b.to(d)})}}D.on(document,Aw,"[data-bs-slide], [data-bs-slide-to]",function(R){const d=q.getElementFromSelector(this);if(!d||!d.classList.contains(Em))return;R.preventDefault();const b=Zo.getOrCreateInstance(d),P=this.getAttribute("data-bs-slide-to");return P?(b.to(P),void b._maybeEnableCycle()):O.getDataAttribute(this,"slide")==="next"?(b.next(),void b._maybeEnableCycle()):(b.prev(),void b._maybeEnableCycle())}),D.on(window,yw,()=>{const R=q.find('[data-bs-ride="carousel"]');for(const d of R)Zo.getOrCreateInstance(d)}),L(Zo);const Tl=".bs.collapse",xw=`show${Tl}`,Tw=`shown${Tl}`,Pw=`hide${Tl}`,Rw=`hidden${Tl}`,Lw=`click${Tl}.data-api`,yf="show",ta="collapse",cu="collapsing",kw=`:scope .${ta} .${ta}`,Af='[data-bs-toggle="collapse"]',Mw={parent:null,toggle:!0},Iw={parent:"(null|element)",toggle:"boolean"};class ea extends z{constructor(d,b){super(d,b),this._isTransitioning=!1,this._triggerArray=[];const P=q.find(Af);for(const H of P){const Q=q.getSelectorFromElement(H),ot=q.find(Q).filter(Rt=>Rt===this._element);Q!==null&&ot.length&&this._triggerArray.push(H)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Mw}static get DefaultType(){return Iw}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(H=>H!==this._element).map(H=>ea.getOrCreateInstance(H,{toggle:!1}))),d.length&&d[0]._isTransitioning||D.trigger(this._element,xw).defaultPrevented)return;for(const H of d)H.hide();const b=this._getDimension();this._element.classList.remove(ta),this._element.classList.add(cu),this._element.style[b]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const P=`scroll${b[0].toUpperCase()+b.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(cu),this._element.classList.add(ta,yf),this._element.style[b]="",D.trigger(this._element,Tw)},this._element,!0),this._element.style[b]=`${this._element[P]}px`}hide(){if(this._isTransitioning||!this._isShown()||D.trigger(this._element,Pw).defaultPrevented)return;const d=this._getDimension();this._element.style[d]=`${this._element.getBoundingClientRect()[d]}px`,E(this._element),this._element.classList.add(cu),this._element.classList.remove(ta,yf);for(const b of this._triggerArray){const P=q.getElementFromSelector(b);P&&!this._isShown(P)&&this._addAriaAndCollapsedClass([b],!1)}this._isTransitioning=!0,this._element.style[d]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(cu),this._element.classList.add(ta),D.trigger(this._element,Rw)},this._element,!0)}_isShown(d=this._element){return d.classList.contains(yf)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=f(d.parent),d}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const d=this._getFirstLevelChildren(Af);for(const b of d){const P=q.getElementFromSelector(b);P&&this._addAriaAndCollapsedClass([b],this._isShown(P))}}_getFirstLevelChildren(d){const b=q.find(kw,this._config.parent);return q.find(d,this._config.parent).filter(P=>!b.includes(P))}_addAriaAndCollapsedClass(d,b){if(d.length)for(const P of d)P.classList.toggle("collapsed",!b),P.setAttribute("aria-expanded",b)}static jQueryInterface(d){const b={};return typeof d=="string"&&/show|hide/.test(d)&&(b.toggle=!1),this.each(function(){const P=ea.getOrCreateInstance(this,b);if(typeof d=="string"){if(P[d]===void 0)throw new TypeError(`No method named "${d}"`);P[d]()}})}}D.on(document,Lw,Af,function(R){(R.target.tagName==="A"||R.delegateTarget&&R.delegateTarget.tagName==="A")&&R.preventDefault();for(const d of q.getMultipleElementsFromSelector(this))ea.getOrCreateInstance(d,{toggle:!1}).toggle()}),L(ea);const xm="dropdown",yr=".bs.dropdown",wf=".data-api",Ow="ArrowUp",Tm="ArrowDown",Dw=`hide${yr}`,Fw=`hidden${yr}`,Nw=`show${yr}`,Hw=`shown${yr}`,Pm=`click${yr}${wf}`,Rm=`keydown${yr}${wf}`,$w=`keyup${yr}${wf}`,sa="show",Ar='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Bw=`${Ar}.${sa}`,hu=".dropdown-menu",jw=T()?"top-end":"top-start",zw=T()?"top-start":"top-end",Uw=T()?"bottom-end":"bottom-start",Ww=T()?"bottom-start":"bottom-end",Vw=T()?"left-start":"right-start",Gw=T()?"right-start":"left-start",qw={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Xw={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Bs extends z{constructor(d,b){super(d,b),this._popper=null,this._parent=this._element.parentNode,this._menu=q.next(this._element,hu)[0]||q.prev(this._element,hu)[0]||q.findOne(hu,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return qw}static get DefaultType(){return Xw}static get NAME(){return xm}toggle(){return this._isShown()?this.hide():this.show()}show(){if(g(this._element)||this._isShown())return;const d={relatedTarget:this._element};if(!D.trigger(this._element,Nw,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const b of[].concat(...document.body.children))D.on(b,"mouseover",v);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(sa),this._element.classList.add(sa),D.trigger(this._element,Hw,d)}}hide(){if(g(this._element)||!this._isShown())return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!D.trigger(this._element,Dw,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(const b of[].concat(...document.body.children))D.off(b,"mouseover",v);this._popper&&this._popper.destroy(),this._menu.classList.remove(sa),this._element.classList.remove(sa),this._element.setAttribute("aria-expanded","false"),O.removeDataAttribute(this._menu,"popper"),D.trigger(this._element,Fw,d)}}_getConfig(d){if(typeof(d=super._getConfig(d)).reference=="object"&&!u(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${xm.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(n===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let d=this._element;this._config.reference==="parent"?d=this._parent:u(this._config.reference)?d=f(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);const b=this._getPopperConfig();this._popper=n.createPopper(d,this._menu,b)}_isShown(){return this._menu.classList.contains(sa)}_getPlacement(){const d=this._parent;if(d.classList.contains("dropend"))return Vw;if(d.classList.contains("dropstart"))return Gw;if(d.classList.contains("dropup-center"))return"top";if(d.classList.contains("dropdown-center"))return"bottom";const b=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?b?zw:jw:b?Ww:Uw}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(b=>Number.parseInt(b,10)):typeof d=="function"?b=>d(b,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(O.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...M(this._config.popperConfig,[d])}}_selectMenuItem({key:d,target:b}){const P=q.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(H=>p(H));P.length&&N(P,b,d===Tm,!P.includes(b)).focus()}static jQueryInterface(d){return this.each(function(){const b=Bs.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0)throw new TypeError(`No method named "${d}"`);b[d]()}})}static clearMenus(d){if(d.button===2||d.type==="keyup"&&d.key!=="Tab")return;const b=q.find(Bw);for(const P of b){const H=Bs.getInstance(P);if(!H||H._config.autoClose===!1)continue;const Q=d.composedPath(),ot=Q.includes(H._menu);if(Q.includes(H._element)||H._config.autoClose==="inside"&&!ot||H._config.autoClose==="outside"&&ot||H._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;const Rt={relatedTarget:H._element};d.type==="click"&&(Rt.clickEvent=d),H._completeHide(Rt)}}static dataApiKeydownHandler(d){const b=/input|textarea/i.test(d.target.tagName),P=d.key==="Escape",H=[Ow,Tm].includes(d.key);if(!H&&!P||b&&!P)return;d.preventDefault();const Q=this.matches(Ar)?this:q.prev(this,Ar)[0]||q.next(this,Ar)[0]||q.findOne(Ar,d.delegateTarget.parentNode),ot=Bs.getOrCreateInstance(Q);if(H)return d.stopPropagation(),ot.show(),void ot._selectMenuItem(d);ot._isShown()&&(d.stopPropagation(),ot.hide(),Q.focus())}}D.on(document,Rm,Ar,Bs.dataApiKeydownHandler),D.on(document,Rm,hu,Bs.dataApiKeydownHandler),D.on(document,Pm,Bs.clearMenus),D.on(document,$w,Bs.clearMenus),D.on(document,Pm,Ar,function(R){R.preventDefault(),Bs.getOrCreateInstance(this).toggle()}),L(Bs);const Lm="backdrop",km="show",Mm=`mousedown.bs.${Lm}`,Kw={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Yw={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Im extends U{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return Kw}static get DefaultType(){return Yw}static get NAME(){return Lm}show(d){if(!this._config.isVisible)return void M(d);this._append();const b=this._getElement();this._config.isAnimated&&E(b),b.classList.add(km),this._emulateAnimation(()=>{M(d)})}hide(d){this._config.isVisible?(this._getElement().classList.remove(km),this._emulateAnimation(()=>{this.dispose(),M(d)})):M(d)}dispose(){this._isAppended&&(D.off(this._element,Mm),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=f(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),D.on(d,Mm,()=>{M(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){k(d,this._getElement(),this._config.isAnimated)}}const uu=".bs.focustrap",Qw=`focusin${uu}`,Jw=`keydown.tab${uu}`,Om="backward",Zw={autofocus:!0,trapElement:null},t0={autofocus:"boolean",trapElement:"element"};class Dm extends U{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Zw}static get DefaultType(){return t0}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),D.off(document,uu),D.on(document,Qw,d=>this._handleFocusin(d)),D.on(document,Jw,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,D.off(document,uu))}_handleFocusin(d){const{trapElement:b}=this._config;if(d.target===document||d.target===b||b.contains(d.target))return;const P=q.focusableChildren(b);P.length===0?b.focus():this._lastTabNavDirection===Om?P[P.length-1].focus():P[0].focus()}_handleKeydown(d){d.key==="Tab"&&(this._lastTabNavDirection=d.shiftKey?Om:"forward")}}const Fm=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Nm=".sticky-top",du="padding-right",Hm="margin-right";class Ef{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,du,b=>b+d),this._setElementAttributes(Fm,du,b=>b+d),this._setElementAttributes(Nm,Hm,b=>b-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,du),this._resetElementAttributes(Fm,du),this._resetElementAttributes(Nm,Hm)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,b,P){const H=this.getWidth();this._applyManipulationCallback(d,Q=>{if(Q!==this._element&&window.innerWidth>Q.clientWidth+H)return;this._saveInitialAttribute(Q,b);const ot=window.getComputedStyle(Q).getPropertyValue(b);Q.style.setProperty(b,`${P(Number.parseFloat(ot))}px`)})}_saveInitialAttribute(d,b){const P=d.style.getPropertyValue(b);P&&O.setDataAttribute(d,b,P)}_resetElementAttributes(d,b){this._applyManipulationCallback(d,P=>{const H=O.getDataAttribute(P,b);H!==null?(O.removeDataAttribute(P,b),P.style.setProperty(b,H)):P.style.removeProperty(b)})}_applyManipulationCallback(d,b){if(u(d))b(d);else for(const P of q.find(d,this._element))b(P)}}const Rs=".bs.modal",e0=`hide${Rs}`,s0=`hidePrevented${Rs}`,$m=`hidden${Rs}`,Bm=`show${Rs}`,i0=`shown${Rs}`,n0=`resize${Rs}`,r0=`click.dismiss${Rs}`,o0=`mousedown.dismiss${Rs}`,a0=`keydown.dismiss${Rs}`,l0=`click${Rs}.data-api`,jm="modal-open",zm="show",Sf="modal-static",c0={backdrop:!0,focus:!0,keyboard:!0},h0={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class wr extends z{constructor(d,b){super(d,b),this._dialog=q.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ef,this._addEventListeners()}static get Default(){return c0}static get DefaultType(){return h0}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||D.trigger(this._element,Bm,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(jm),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){this._isShown&&!this._isTransitioning&&(D.trigger(this._element,e0).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(zm),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){D.off(window,Rs),D.off(this._dialog,Rs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Im({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Dm({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const b=q.findOne(".modal-body",this._dialog);b&&(b.scrollTop=0),E(this._element),this._element.classList.add(zm),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,D.trigger(this._element,i0,{relatedTarget:d})},this._dialog,this._isAnimated())}_addEventListeners(){D.on(this._element,a0,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),D.on(window,n0,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),D.on(this._element,o0,d=>{D.one(this._element,r0,b=>{this._element===d.target&&this._element===b.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(jm),this._resetAdjustments(),this._scrollBar.reset(),D.trigger(this._element,$m)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(D.trigger(this._element,s0).defaultPrevented)return;const d=this._element.scrollHeight>document.documentElement.clientHeight,b=this._element.style.overflowY;b==="hidden"||this._element.classList.contains(Sf)||(d||(this._element.style.overflowY="hidden"),this._element.classList.add(Sf),this._queueCallback(()=>{this._element.classList.remove(Sf),this._queueCallback(()=>{this._element.style.overflowY=b},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,b=this._scrollBar.getWidth(),P=b>0;if(P&&!d){const H=T()?"paddingLeft":"paddingRight";this._element.style[H]=`${b}px`}if(!P&&d){const H=T()?"paddingRight":"paddingLeft";this._element.style[H]=`${b}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,b){return this.each(function(){const P=wr.getOrCreateInstance(this,d);if(typeof d=="string"){if(P[d]===void 0)throw new TypeError(`No method named "${d}"`);P[d](b)}})}}D.on(document,l0,'[data-bs-toggle="modal"]',function(R){const d=q.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&R.preventDefault(),D.one(d,Bm,P=>{P.defaultPrevented||D.one(d,$m,()=>{p(this)&&this.focus()})});const b=q.findOne(".modal.show");b&&wr.getInstance(b).hide(),wr.getOrCreateInstance(d).toggle(this)}),Ht(wr),L(wr);const Fi=".bs.offcanvas",Um=".data-api",u0=`load${Fi}${Um}`,Wm="show",Vm="showing",Gm="hiding",qm=".offcanvas.show",d0=`show${Fi}`,f0=`shown${Fi}`,p0=`hide${Fi}`,Xm=`hidePrevented${Fi}`,Km=`hidden${Fi}`,g0=`resize${Fi}`,m0=`click${Fi}${Um}`,b0=`keydown.dismiss${Fi}`,v0={backdrop:!0,keyboard:!0,scroll:!1},_0={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ni extends z{constructor(d,b){super(d,b),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return v0}static get DefaultType(){return _0}static get NAME(){return"offcanvas"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||D.trigger(this._element,d0,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ef().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Vm),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Wm),this._element.classList.remove(Vm),D.trigger(this._element,f0,{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(D.trigger(this._element,p0).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Gm),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Wm,Gm),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ef().reset(),D.trigger(this._element,Km)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const d=!!this._config.backdrop;return new Im({className:"offcanvas-backdrop",isVisible:d,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:d?()=>{this._config.backdrop!=="static"?this.hide():D.trigger(this._element,Xm)}:null})}_initializeFocusTrap(){return new Dm({trapElement:this._element})}_addEventListeners(){D.on(this._element,b0,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():D.trigger(this._element,Xm))})}static jQueryInterface(d){return this.each(function(){const b=Ni.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}D.on(document,m0,'[data-bs-toggle="offcanvas"]',function(R){const d=q.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&R.preventDefault(),g(this))return;D.one(d,Km,()=>{p(this)&&this.focus()});const b=q.findOne(qm);b&&b!==d&&Ni.getInstance(b).hide(),Ni.getOrCreateInstance(d).toggle(this)}),D.on(window,u0,()=>{for(const R of q.find(qm))Ni.getOrCreateInstance(R).show()}),D.on(window,g0,()=>{for(const R of q.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(R).position!=="fixed"&&Ni.getOrCreateInstance(R).hide()}),Ht(Ni),L(Ni);const Ym={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},y0=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),A0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,w0=(R,d)=>{const b=R.nodeName.toLowerCase();return d.includes(b)?!y0.has(b)||!!A0.test(R.nodeValue):d.filter(P=>P instanceof RegExp).some(P=>P.test(b))},E0={allowList:Ym,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},S0={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},C0={entry:"(string|element|function|null)",selector:"(string|element)"};class x0 extends U{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return E0}static get DefaultType(){return S0}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){const d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(const[H,Q]of Object.entries(this._config.content))this._setContent(d,Q,H);const b=d.children[0],P=this._resolvePossibleFunction(this._config.extraClass);return P&&b.classList.add(...P.split(" ")),b}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(const[b,P]of Object.entries(d))super._typeCheckConfig({selector:b,entry:P},C0)}_setContent(d,b,P){const H=q.findOne(P,d);H&&((b=this._resolvePossibleFunction(b))?u(b)?this._putElementInTemplate(f(b),H):this._config.html?H.innerHTML=this._maybeSanitize(b):H.textContent=b:H.remove())}_maybeSanitize(d){return this._config.sanitize?function(b,P,H){if(!b.length)return b;if(H&&typeof H=="function")return H(b);const Q=new window.DOMParser().parseFromString(b,"text/html"),ot=[].concat(...Q.body.querySelectorAll("*"));for(const Rt of ot){const te=Rt.nodeName.toLowerCase();if(!Object.keys(P).includes(te)){Rt.remove();continue}const Ye=[].concat(...Rt.attributes),ls=[].concat(P["*"]||[],P[te]||[]);for(const js of Ye)w0(js,ls)||Rt.removeAttribute(js.nodeName)}return Q.body.innerHTML}(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return M(d,[this])}_putElementInTemplate(d,b){if(this._config.html)return b.innerHTML="",void b.append(d);b.textContent=d.textContent}}const T0=new Set(["sanitize","allowList","sanitizeFn"]),Cf="fade",fu="show",Qm=".modal",Jm="hide.bs.modal",Pl="hover",xf="focus",P0={AUTO:"auto",TOP:"top",RIGHT:T()?"left":"right",BOTTOM:"bottom",LEFT:T()?"right":"left"},R0={allowList:Ym,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},L0={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Er extends z{constructor(d,b){if(n===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(d,b),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return R0}static get DefaultType(){return L0}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),D.off(this._element.closest(Qm),Jm,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const d=D.trigger(this._element,this.constructor.eventName("show")),b=(m(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!b)return;this._disposePopper();const P=this._getTipElement();this._element.setAttribute("aria-describedby",P.getAttribute("id"));const{container:H}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(H.append(P),D.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(P),P.classList.add(fu),"ontouchstart"in document.documentElement)for(const Q of[].concat(...document.body.children))D.on(Q,"mouseover",v);this._queueCallback(()=>{D.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!D.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(fu),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))D.off(d,"mouseover",v);this._activeTrigger.click=!1,this._activeTrigger[xf]=!1,this._activeTrigger[Pl]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),D.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){const b=this._getTemplateFactory(d).toHtml();if(!b)return null;b.classList.remove(Cf,fu),b.classList.add(`bs-${this.constructor.NAME}-auto`);const P=(H=>{do H+=Math.floor(1e6*Math.random());while(document.getElementById(H));return H})(this.constructor.NAME).toString();return b.setAttribute("id",P),this._isAnimated()&&b.classList.add(Cf),b}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new x0({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Cf)}_isShown(){return this.tip&&this.tip.classList.contains(fu)}_createPopper(d){const b=M(this._config.placement,[this,d,this._element]),P=P0[b.toUpperCase()];return n.createPopper(this._element,d,this._getPopperConfig(P))}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(b=>Number.parseInt(b,10)):typeof d=="function"?b=>d(b,this._element):d}_resolvePossibleFunction(d){return M(d,[this._element])}_getPopperConfig(d){const b={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:P=>{this._getTipElement().setAttribute("data-popper-placement",P.state.placement)}}]};return{...b,...M(this._config.popperConfig,[b])}}_setListeners(){const d=this._config.trigger.split(" ");for(const b of d)if(b==="click")D.on(this._element,this.constructor.eventName("click"),this._config.selector,P=>{this._initializeOnDelegatedTarget(P).toggle()});else if(b!=="manual"){const P=b===Pl?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),H=b===Pl?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");D.on(this._element,P,this._config.selector,Q=>{const ot=this._initializeOnDelegatedTarget(Q);ot._activeTrigger[Q.type==="focusin"?xf:Pl]=!0,ot._enter()}),D.on(this._element,H,this._config.selector,Q=>{const ot=this._initializeOnDelegatedTarget(Q);ot._activeTrigger[Q.type==="focusout"?xf:Pl]=ot._element.contains(Q.relatedTarget),ot._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},D.on(this._element.closest(Qm),Jm,this._hideModalHandler)}_fixTitle(){const d=this._element.getAttribute("title");d&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,b){clearTimeout(this._timeout),this._timeout=setTimeout(d,b)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){const b=O.getDataAttributes(this._element);for(const P of Object.keys(b))T0.has(P)&&delete b[P];return d={...b,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:f(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){const d={};for(const[b,P]of Object.entries(this._config))this.constructor.Default[b]!==P&&(d[b]=P);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){const b=Er.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0)throw new TypeError(`No method named "${d}"`);b[d]()}})}}L(Er);const k0={...Er.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},M0={...Er.DefaultType,content:"(null|string|element|function)"};class pu extends Er{static get Default(){return k0}static get DefaultType(){return M0}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){const b=pu.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0)throw new TypeError(`No method named "${d}"`);b[d]()}})}}L(pu);const Tf=".bs.scrollspy",I0=`activate${Tf}`,Zm=`click${Tf}`,O0=`load${Tf}.data-api`,ia="active",Pf="[href]",tb=".nav-link",D0=`${tb}, .nav-item > ${tb}, .list-group-item`,F0={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},N0={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Rl extends z{constructor(d,b){super(d,b),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return F0}static get DefaultType(){return N0}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=f(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(b=>Number.parseFloat(b))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(D.off(this._config.target,Zm),D.on(this._config.target,Zm,Pf,d=>{const b=this._observableSections.get(d.target.hash);if(b){d.preventDefault();const P=this._rootElement||window,H=b.offsetTop-this._element.offsetTop;if(P.scrollTo)return void P.scrollTo({top:H,behavior:"smooth"});P.scrollTop=H}}))}_getNewObserver(){const d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(b=>this._observerCallback(b),d)}_observerCallback(d){const b=ot=>this._targetLinks.get(`#${ot.target.id}`),P=ot=>{this._previousScrollData.visibleEntryTop=ot.target.offsetTop,this._process(b(ot))},H=(this._rootElement||document.documentElement).scrollTop,Q=H>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=H;for(const ot of d){if(!ot.isIntersecting){this._activeTarget=null,this._clearActiveClass(b(ot));continue}const Rt=ot.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Q&&Rt){if(P(ot),!H)return}else Q||Rt||P(ot)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const d=q.find(Pf,this._config.target);for(const b of d){if(!b.hash||g(b))continue;const P=q.findOne(decodeURI(b.hash),this._element);p(P)&&(this._targetLinks.set(decodeURI(b.hash),b),this._observableSections.set(b.hash,P))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(ia),this._activateParents(d),D.trigger(this._element,I0,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains("dropdown-item"))q.findOne(".dropdown-toggle",d.closest(".dropdown")).classList.add(ia);else for(const b of q.parents(d,".nav, .list-group"))for(const P of q.prev(b,D0))P.classList.add(ia)}_clearActiveClass(d){d.classList.remove(ia);const b=q.find(`${Pf}.${ia}`,d);for(const P of b)P.classList.remove(ia)}static jQueryInterface(d){return this.each(function(){const b=Rl.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}D.on(window,O0,()=>{for(const R of q.find('[data-bs-spy="scroll"]'))Rl.getOrCreateInstance(R)}),L(Rl);const Sr=".bs.tab",H0=`hide${Sr}`,$0=`hidden${Sr}`,B0=`show${Sr}`,j0=`shown${Sr}`,z0=`click${Sr}`,U0=`keydown${Sr}`,W0=`load${Sr}`,V0="ArrowLeft",eb="ArrowRight",G0="ArrowUp",sb="ArrowDown",Rf="Home",ib="End",Cr="active",nb="fade",Lf="show",rb=".dropdown-toggle",kf=`:not(${rb})`,ob='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Mf=`.nav-link${kf}, .list-group-item${kf}, [role="tab"]${kf}, ${ob}`,q0=`.${Cr}[data-bs-toggle="tab"], .${Cr}[data-bs-toggle="pill"], .${Cr}[data-bs-toggle="list"]`;class xr extends z{constructor(d){super(d),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),D.on(this._element,U0,b=>this._keydown(b)))}static get NAME(){return"tab"}show(){const d=this._element;if(this._elemIsActive(d))return;const b=this._getActiveElem(),P=b?D.trigger(b,H0,{relatedTarget:d}):null;D.trigger(d,B0,{relatedTarget:b}).defaultPrevented||P&&P.defaultPrevented||(this._deactivate(b,d),this._activate(d,b))}_activate(d,b){d&&(d.classList.add(Cr),this._activate(q.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),D.trigger(d,j0,{relatedTarget:b})):d.classList.add(Lf)},d,d.classList.contains(nb)))}_deactivate(d,b){d&&(d.classList.remove(Cr),d.blur(),this._deactivate(q.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),D.trigger(d,$0,{relatedTarget:b})):d.classList.remove(Lf)},d,d.classList.contains(nb)))}_keydown(d){if(![V0,eb,G0,sb,Rf,ib].includes(d.key))return;d.stopPropagation(),d.preventDefault();const b=this._getChildren().filter(H=>!g(H));let P;if([Rf,ib].includes(d.key))P=b[d.key===Rf?0:b.length-1];else{const H=[eb,sb].includes(d.key);P=N(b,d.target,H,!0)}P&&(P.focus({preventScroll:!0}),xr.getOrCreateInstance(P).show())}_getChildren(){return q.find(Mf,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,b){this._setAttributeIfNotExists(d,"role","tablist");for(const P of b)this._setInitialAttributesOnChild(P)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);const b=this._elemIsActive(d),P=this._getOuterElement(d);d.setAttribute("aria-selected",b),P!==d&&this._setAttributeIfNotExists(P,"role","presentation"),b||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){const b=q.getElementFromSelector(d);b&&(this._setAttributeIfNotExists(b,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(b,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,b){const P=this._getOuterElement(d);if(!P.classList.contains("dropdown"))return;const H=(Q,ot)=>{const Rt=q.findOne(Q,P);Rt&&Rt.classList.toggle(ot,b)};H(rb,Cr),H(".dropdown-menu",Lf),P.setAttribute("aria-expanded",b)}_setAttributeIfNotExists(d,b,P){d.hasAttribute(b)||d.setAttribute(b,P)}_elemIsActive(d){return d.classList.contains(Cr)}_getInnerElement(d){return d.matches(Mf)?d:q.findOne(Mf,d)}_getOuterElement(d){return d.closest(".nav-item, .list-group-item")||d}static jQueryInterface(d){return this.each(function(){const b=xr.getOrCreateInstance(this);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}D.on(document,z0,ob,function(R){["A","AREA"].includes(this.tagName)&&R.preventDefault(),g(this)||xr.getOrCreateInstance(this).show()}),D.on(window,W0,()=>{for(const R of q.find(q0))xr.getOrCreateInstance(R)}),L(xr);const Rn=".bs.toast",X0=`mouseover${Rn}`,K0=`mouseout${Rn}`,Y0=`focusin${Rn}`,Q0=`focusout${Rn}`,J0=`hide${Rn}`,Z0=`hidden${Rn}`,tE=`show${Rn}`,eE=`shown${Rn}`,ab="hide",gu="show",mu="showing",sE={animation:"boolean",autohide:"boolean",delay:"number"},iE={animation:!0,autohide:!0,delay:5e3};class Ll extends z{constructor(d,b){super(d,b),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return iE}static get DefaultType(){return sE}static get NAME(){return"toast"}show(){D.trigger(this._element,tE).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ab),E(this._element),this._element.classList.add(gu,mu),this._queueCallback(()=>{this._element.classList.remove(mu),D.trigger(this._element,eE),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(D.trigger(this._element,J0).defaultPrevented||(this._element.classList.add(mu),this._queueCallback(()=>{this._element.classList.add(ab),this._element.classList.remove(mu,gu),D.trigger(this._element,Z0)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(gu),super.dispose()}isShown(){return this._element.classList.contains(gu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,b){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=b;break;case"focusin":case"focusout":this._hasKeyboardInteraction=b}if(b)return void this._clearTimeout();const P=d.relatedTarget;this._element===P||this._element.contains(P)||this._maybeScheduleHide()}_setListeners(){D.on(this._element,X0,d=>this._onInteraction(d,!0)),D.on(this._element,K0,d=>this._onInteraction(d,!1)),D.on(this._element,Y0,d=>this._onInteraction(d,!0)),D.on(this._element,Q0,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const b=Ll.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0)throw new TypeError(`No method named "${d}"`);b[d](this)}})}}return Ht(Ll),L(Ll),{Alert:$,Button:j,Carousel:Zo,Collapse:ea,Dropdown:Bs,Modal:wr,Offcanvas:Ni,Popover:pu,ScrollSpy:Rl,Tab:xr,Toast:Ll,Tooltip:Er}})})(Xx);const HT={class:"full-screen-bg"},$T={__name:"DefaultLayout",setup(i){return(t,e)=>{const s=hS("router-view");return es(),As("div",HT,[Pe(NC),Pe(s),Pe(Vx)])}}},BT=eu($T,[["__scopeId","data-v-ab58516a"]]),jT={class:"full-screen-bg"},zT={__name:"App",setup(i){return(t,e)=>(es(),As("div",jT,[Pe(BT)]))}},UT="modulepreload",WT=function(i){return"/"+i},dv={},Cu=function(t,e,s){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.all(e.map(a=>{if(a=WT(a),a in dv)return;dv[a]=!0;const c=a.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":UT,c||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),c)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};var cc={};cc.d=(i,t)=>{for(var e in t)cc.o(t,e)&&!cc.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};cc.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var vt=globalThis.pdfjsLib={};cc.d(vt,{AbortException:()=>Yo,AnnotationEditorLayer:()=>xg,AnnotationEditorParamsType:()=>bt,AnnotationEditorType:()=>kt,AnnotationEditorUIManager:()=>Wo,AnnotationLayer:()=>BP,AnnotationMode:()=>$n,CMapCompressionType:()=>vp,ColorPicker:()=>Ad,DOMSVGFactory:()=>um,DrawLayer:()=>Lg,FeatureTest:()=>ss,GlobalWorkerOptions:()=>An,ImageKind:()=>Hu,InvalidPDFException:()=>Sy,MissingPDFException:()=>Ko,OPS:()=>Vs,PDFDataRangeTransport:()=>vA,PDFDateString:()=>Ly,PDFWorker:()=>wa,PasswordResponses:()=>XT,PermissionFlag:()=>qT,PixelsPerInch:()=>hr,RenderingCancelledException:()=>dm,TextLayer:()=>vc,UnexpectedResponseException:()=>uf,Util:()=>ct,VerbosityLevel:()=>lf,XfaLayer:()=>yA,build:()=>yP,createValidAbsoluteUrl:()=>JT,fetchData:()=>mf,getDocument:()=>uP,getFilenameFromUrl:()=>l1,getPdfFilenameFromUrl:()=>c1,getXfaPageViewport:()=>h1,isDataScheme:()=>bf,isPdfFile:()=>fm,noContextMenu:()=>ns,normalizeUnicode:()=>n1,setLayerDimensions:()=>Uo,shadow:()=>Mt,version:()=>_P});const $e=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Ey=[1,0,0,1,0,0],bp=[.001,0,0,.001,0,0],VT=1e7,Gf=1.35,ys={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$n={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},GT="pdfjs_internal_editor_",kt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},bt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},qT={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Le={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Hu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Dl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},lf={ERRORS:0,WARNINGS:1,INFOS:5},vp={NONE:0,BINARY:1},Vs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},XT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let cf=lf.WARNINGS;function KT(i){Number.isInteger(i)&&(cf=i)}function YT(){return cf}function hf(i){cf>=lf.INFOS&&console.log(`Info: ${i}`)}function St(i){cf>=lf.WARNINGS&&console.log(`Warning: ${i}`)}function Wt(i){throw new Error(i)}function me(i,t){i||Wt(t)}function QT(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function JT(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=i1(i)}catch{}}const s=t?new URL(i,t):new URL(i);if(QT(s))return s}catch{}return null}function Mt(i,t,e,s=!1){return Object.defineProperty(i,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const br=function(){function t(e,s){this.constructor===t&&Wt("Cannot initialize BaseException."),this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class _p extends br{constructor(t,e){super(t,"PasswordException"),this.code=e}}class yp extends br{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Sy extends br{constructor(t){super(t,"InvalidPDFException")}}class Ko extends br{constructor(t){super(t,"MissingPDFException")}}class uf extends br{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class ZT extends br{constructor(t){super(t,"FormatError")}}class Yo extends br{constructor(t){super(t,"AbortException")}}function Cy(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Wt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),o=i.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function df(i){typeof i!="string"&&Wt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=i.charCodeAt(s)&255;return e}function t1(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function cm(i){const t=Object.create(null);for(const[e,s]of i)t[e]=s;return t}function e1(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function s1(){try{return new Function(""),!0}catch{return!1}}class ss{static get isLittleEndian(){return Mt(this,"isLittleEndian",e1())}static get isEvalSupported(){return Mt(this,"isEvalSupported",s1())}static get isOffscreenCanvasSupported(){return Mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Mt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Mt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return Mt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const qf=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var En,$u,Ap;class ct{static makeHexColor(t,e,s){return`#${qf[t]}${qf[e]}${qf[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const s=t[0]*e[0]+t[1]*e[2]+e[4],n=t[0]*e[1]+t[1]*e[3]+e[5];return[s,n]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2],n=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s;return[n,r]}static getAxialAlignedBoundingBox(t,e){const s=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],n[0],r[0],o[0]),Math.min(s[1],n[1],r[1],o[1]),Math.max(s[0],n[0],r[0],o[0]),Math.max(s[1],n[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(s+o)/2,c=Math.sqrt((s+o)**2-4*(s*o-r*n))/2,h=a+c||1,u=a-c||1;return[Math.sqrt(h),Math.sqrt(u)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,n,o]}static bezierBoundingBox(t,e,s,n,r,o,a,c,h){return h?(h[0]=Math.min(h[0],t,a),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,a),h[3]=Math.max(h[3],e,c)):h=[Math.min(t,a),Math.min(e,c),Math.max(t,a),Math.max(e,c)],y(this,En,Ap).call(this,t,s,r,a,e,n,o,c,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),h),y(this,En,Ap).call(this,t,s,r,a,e,n,o,c,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h),h}}En=new WeakSet,$u=function(t,e,s,n,r,o,a,c,h,u){if(h<=0||h>=1)return;const f=1-h,p=h*h,g=p*h,m=f*(f*(f*t+3*h*e)+3*p*s)+g*n,v=f*(f*(f*r+3*h*o)+3*p*a)+g*c;u[0]=Math.min(u[0],m),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],m),u[3]=Math.max(u[3],v)},Ap=function(t,e,s,n,r,o,a,c,h,u,f,p){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&y(this,En,$u).call(this,t,e,s,n,r,o,a,c,-f/u,p);return}const g=u**2-4*f*h;if(g<0)return;const m=Math.sqrt(g),v=2*h;y(this,En,$u).call(this,t,e,s,n,r,o,a,c,(-u+m)/v,p),y(this,En,$u).call(this,t,e,s,n,r,o,a,c,(-u-m)/v,p)},A(ct,En);function i1(i){return decodeURIComponent(escape(i))}let Xf=null,fv=null;function n1(i){return Xf||(Xf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,fv=new Map([["","t"]])),i.replaceAll(Xf,(t,e,s)=>e?e.normalize("NFKC"):fv.get(s))}function r1(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return Cy(i)}const xy="pdfjs_internal_id_",ji={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class ff{constructor(){this.constructor===ff&&Wt("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,n,r){return"none"}destroy(t=!1){}}var yc;const _m=class _m{constructor({enableHWA:t=!1}={}){A(this,yc,!1);this.constructor===_m&&Wt("Cannot initialize BaseCanvasFactory."),_(this,yc,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,yc)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Wt("Abstract method `_createCanvas` called.")}};yc=new WeakMap;let md=_m;class pf{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===pf&&Wt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),s=this.isCompressed?vp.BINARY:vp.NONE;return this._fetchData(e,s).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){Wt("Abstract method `_fetchData` called.")}}class gf{constructor({baseUrl:t=null}){this.constructor===gf&&Wt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){Wt("Abstract method `_fetchData` called.")}}class hm{constructor(){this.constructor===hm&&Wt("Cannot initialize BaseSVGFactory.")}create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Wt("Abstract method `_createSVG` called.")}}const Ui="http://www.w3.org/2000/svg",Dr=class Dr{};_t(Dr,"CSS",96),_t(Dr,"PDF",72),_t(Dr,"PDF_TO_CSS_UNITS",Dr.CSS/Dr.PDF);let hr=Dr;var Nr,Hr,ui,Ki,Ie,Ed,$r,it,ke,aa,la,Bu,ca,Ty,wp,ha,$l,Bl,Ep,jl;class o1 extends ff{constructor({docId:e,ownerDocument:s=globalThis.document}={}){super();A(this,it);A(this,Nr);A(this,Hr);A(this,ui);A(this,Ki);A(this,Ie);A(this,Ed);A(this,$r,0);_(this,Ki,e),_(this,Ie,s)}addFilter(e){if(!e)return"none";let s=l(this,it,ke).get(e);if(s)return s;const[n,r,o]=y(this,it,Bu).call(this,e),a=e.length===1?n:`${n}${r}${o}`;if(s=l(this,it,ke).get(a),s)return l(this,it,ke).set(e,s),s;const c=`g_${l(this,Ki)}_transfer_map_${cs(this,$r)._++}`,h=y(this,it,ca).call(this,c);l(this,it,ke).set(e,h),l(this,it,ke).set(a,h);const u=y(this,it,ha).call(this,c);return y(this,it,Bl).call(this,n,r,o,u),h}addHCMFilter(e,s){var m;const n=`${e}-${s}`,r="base";let o=l(this,it,aa).get(r);if((o==null?void 0:o.key)===n||(o?((m=o.filter)==null||m.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},l(this,it,aa).set(r,o)),!e||!s))return o.url;const a=y(this,it,jl).call(this,e);e=ct.makeHexColor(...a);const c=y(this,it,jl).call(this,s);if(s=ct.makeHexColor(...c),l(this,it,la).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let v=0;v<=255;v++){const E=v/255;h[v]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const u=h.join(","),f=`g_${l(this,Ki)}_hcm_filter`,p=o.filter=y(this,it,ha).call(this,f);y(this,it,Bl).call(this,u,u,u,p),y(this,it,wp).call(this,p);const g=(v,E)=>{const w=a[v]/255,C=c[v]/255,T=new Array(E+1);for(let L=0;L<=E;L++)T[L]=w+L/E*(C-w);return T.join(",")};return y(this,it,Bl).call(this,g(0,5),g(1,5),g(2,5),p),o.url=y(this,it,ca).call(this,f),o.url}addAlphaFilter(e){let s=l(this,it,ke).get(e);if(s)return s;const[n]=y(this,it,Bu).call(this,[e]),r=`alpha_${n}`;if(s=l(this,it,ke).get(r),s)return l(this,it,ke).set(e,s),s;const o=`g_${l(this,Ki)}_alpha_map_${cs(this,$r)._++}`,a=y(this,it,ca).call(this,o);l(this,it,ke).set(e,a),l(this,it,ke).set(r,a);const c=y(this,it,ha).call(this,o);return y(this,it,Ep).call(this,n,c),a}addLuminosityFilter(e){let s=l(this,it,ke).get(e||"luminosity");if(s)return s;let n,r;if(e?([n]=y(this,it,Bu).call(this,[e]),r=`luminosity_${n}`):r="luminosity",s=l(this,it,ke).get(r),s)return l(this,it,ke).set(e,s),s;const o=`g_${l(this,Ki)}_luminosity_map_${cs(this,$r)._++}`,a=y(this,it,ca).call(this,o);l(this,it,ke).set(e,a),l(this,it,ke).set(r,a);const c=y(this,it,ha).call(this,o);return y(this,it,Ty).call(this,c),e&&y(this,it,Ep).call(this,n,c),a}addHighlightHCMFilter(e,s,n,r,o){var C;const a=`${s}-${n}-${r}-${o}`;let c=l(this,it,aa).get(e);if((c==null?void 0:c.key)===a||(c?((C=c.filter)==null||C.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,it,aa).set(e,c)),!s||!n))return c.url;const[h,u]=[s,n].map(y(this,it,jl).bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,m]=[r,o].map(y(this,it,jl).bind(this));p<f&&([f,p,g,m]=[p,f,m,g]),l(this,it,la).style.color="";const v=(T,L,M)=>{const k=new Array(256),N=(p-f)/M,W=T/255,tt=(L-T)/(255*M);let nt=0;for(let J=0;J<=M;J++){const pt=Math.round(f+J*N),ht=W+J*tt;for(let wt=nt;wt<=pt;wt++)k[wt]=ht;nt=pt+1}for(let J=nt;J<256;J++)k[J]=k[nt-1];return k.join(",")},E=`g_${l(this,Ki)}_hcm_${e}_filter`,w=c.filter=y(this,it,ha).call(this,E);return y(this,it,wp).call(this,w),y(this,it,Bl).call(this,v(g[0],m[0],5),v(g[1],m[1],5),v(g[2],m[2],5),w),c.url=y(this,it,ca).call(this,E),c.url}destroy(e=!1){e&&l(this,it,aa).size!==0||(l(this,ui)&&(l(this,ui).parentNode.parentNode.remove(),_(this,ui,null)),l(this,Hr)&&(l(this,Hr).clear(),_(this,Hr,null)),_(this,$r,0))}}Nr=new WeakMap,Hr=new WeakMap,ui=new WeakMap,Ki=new WeakMap,Ie=new WeakMap,Ed=new WeakMap,$r=new WeakMap,it=new WeakSet,ke=function(){return l(this,Hr)||_(this,Hr,new Map)},aa=function(){return l(this,Ed)||_(this,Ed,new Map)},la=function(){if(!l(this,ui)){const e=l(this,Ie).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=l(this,Ie).createElementNS(Ui,"svg");n.setAttribute("width",0),n.setAttribute("height",0),_(this,ui,l(this,Ie).createElementNS(Ui,"defs")),e.append(n),n.append(l(this,ui)),l(this,Ie).body.append(e)}return l(this,ui)},Bu=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=h[p]/255;const f=u.join(",");return[f,f,f]}const[s,n,r]=e,o=new Array(256),a=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,a[h]=n[h]/255,c[h]=r[h]/255;return[o.join(","),a.join(","),c.join(",")]},ca=function(e){if(l(this,Nr)===void 0){_(this,Nr,"");const s=l(this,Ie).URL;s!==l(this,Ie).baseURI&&(bf(s)?St('#createUrl: ignore "data:"-URL for performance reasons.'):_(this,Nr,s.split("#",1)[0]))}return`url(${l(this,Nr)}#${e})`},Ty=function(e){const s=l(this,Ie).createElementNS(Ui,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},wp=function(e){const s=l(this,Ie).createElementNS(Ui,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},ha=function(e){const s=l(this,Ie).createElementNS(Ui,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),l(this,it,la).append(s),s},$l=function(e,s,n){const r=l(this,Ie).createElementNS(Ui,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)},Bl=function(e,s,n,r){const o=l(this,Ie).createElementNS(Ui,"feComponentTransfer");r.append(o),y(this,it,$l).call(this,o,"feFuncR",e),y(this,it,$l).call(this,o,"feFuncG",s),y(this,it,$l).call(this,o,"feFuncB",n)},Ep=function(e,s){const n=l(this,Ie).createElementNS(Ui,"feComponentTransfer");s.append(n),y(this,it,$l).call(this,n,"feFuncA",e)},jl=function(e){return l(this,it,la).style.color=e,pm(getComputedStyle(l(this,it,la)).getPropertyValue("color"))};class a1 extends md{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}async function mf(i,t="text"){if(zl(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class Py extends pf{_fetchData(t,e){return mf(t,this.isCompressed?"arraybuffer":"text").then(s=>({cMapData:s instanceof ArrayBuffer?new Uint8Array(s):df(s),compressionType:e}))}}class Ry extends gf{_fetchData(t){return mf(t,"arraybuffer").then(e=>new Uint8Array(e))}}class um extends hm{_createSVG(t){return document.createElementNS(Ui,t)}}class iu{constructor({viewBox:t,scale:e,rotation:s,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=s,this.offsetX=n,this.offsetY=r;const a=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let h,u,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,u=0,f=0,p=1;break;case 90:h=0,u=1,f=1,p=0;break;case 270:h=0,u=-1,f=-1,p=0;break;case 0:h=1,u=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let g,m,v,E;h===0?(g=Math.abs(c-t[1])*e+n,m=Math.abs(a-t[0])*e+r,v=(t[3]-t[1])*e,E=(t[2]-t[0])*e):(g=Math.abs(a-t[0])*e+n,m=Math.abs(c-t[1])*e+r,v=(t[2]-t[0])*e,E=(t[3]-t[1])*e),this.transform=[h*e,u*e,f*e,p*e,g-h*e*a-f*e*c,m-u*e*a-p*e*c],this.width=v,this.height=E}get rawDims(){const{viewBox:t}=this;return Mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new iu({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){return ct.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=ct.applyTransform([t[0],t[1]],this.transform),s=ct.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return ct.applyInverseTransform([t,e],this.transform)}}class dm extends br{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function bf(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function fm(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function l1(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function c1(i,t="document.pdf"){if(typeof i!="string")return t;if(bf(i))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(i);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class pv{constructor(){_t(this,"started",Object.create(null));_t(this,"times",[])}time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:n,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-n}ms
`);return t.join("")}}function zl(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function ns(i){i.preventDefault()}let gv;class Ly{static toDateObject(t){if(!t||typeof t!="string")return null;gv||(gv=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=gv.exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,h==="-"?(o+=u,a+=f):h==="+"&&(o-=u,a-=f),new Date(Date.UTC(s,n,r,o,a,c))}}function h1(i,{scale:t=1,rotation:e=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new iu({viewBox:r,scale:t,rotation:e})}function pm(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${i}"`),[0,0,0])}function u1(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;i.set(e,pm(s))}t.remove()}function se(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform();return[t,e,s,n,r,o]}function zi(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform().invertSelf();return[t,e,s,n,r,o]}function Uo(i,t,e=!1,s=!0){if(t instanceof iu){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:o}=i,a=ss.isCSSRoundSupported,c=`var(--scale-factor) * ${n}px`,h=`var(--scale-factor) * ${r}px`,u=a?`round(${c}, 1px)`:`calc(${c})`,f=a?`round(${h}, 1px)`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}s&&i.setAttribute("data-main-rotation",t.rotation)}var Br,jr,ds,zr,Sd,ky,Xe,My,Iy,ju,Oy,Cp;const Cd=class Cd{constructor(t){A(this,Xe);A(this,Br,null);A(this,jr,null);A(this,ds);A(this,zr,null);_(this,ds,t)}render(){const t=_(this,Br,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,ds)._uiManager._signal;t.addEventListener("contextmenu",ns,{signal:e}),t.addEventListener("pointerdown",y(Cd,Sd,ky),{signal:e});const s=_(this,zr,document.createElement("div"));s.className="buttons",t.append(s);const n=l(this,ds).toolbarPosition;if(n){const{style:r}=t,o=l(this,ds)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return y(this,Xe,Oy).call(this),t}hide(){var t;l(this,Br).classList.add("hidden"),(t=l(this,jr))==null||t.hideDropdown()}show(){l(this,Br).classList.remove("hidden")}addAltTextButton(t){y(this,Xe,ju).call(this,t),l(this,zr).prepend(t,l(this,Xe,Cp))}addColorPicker(t){_(this,jr,t);const e=t.renderButton();y(this,Xe,ju).call(this,e),l(this,zr).prepend(e,l(this,Xe,Cp))}remove(){var t;l(this,Br).remove(),(t=l(this,jr))==null||t.destroy(),_(this,jr,null)}};Br=new WeakMap,jr=new WeakMap,ds=new WeakMap,zr=new WeakMap,Sd=new WeakSet,ky=function(t){t.stopPropagation()},Xe=new WeakSet,My=function(t){l(this,ds)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},Iy=function(t){l(this,ds)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},ju=function(t){const e=l(this,ds)._uiManager._signal;t.addEventListener("focusin",y(this,Xe,My).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",y(this,Xe,Iy).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ns,{signal:e})},Oy=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${l(this,ds).editorType}-button`),y(this,Xe,ju).call(this,t),t.addEventListener("click",e=>{l(this,ds)._uiManager.delete()},{signal:l(this,ds)._uiManager._signal}),l(this,zr).append(t)},Cp=function(){const t=document.createElement("div");return t.className="divider",t},A(Cd,Sd);let Sp=Cd;var Ac,Ur,Wr,ur,Dy,Fy,Ny;class d1{constructor(t){A(this,ur);A(this,Ac,null);A(this,Ur,null);A(this,Wr);_(this,Wr,t)}show(t,e,s){const[n,r]=y(this,ur,Fy).call(this,e,s),{style:o}=l(this,Ur)||_(this,Ur,y(this,ur,Dy).call(this));t.append(l(this,Ur)),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Ur).remove()}}Ac=new WeakMap,Ur=new WeakMap,Wr=new WeakMap,ur=new WeakSet,Dy=function(){const t=_(this,Ur,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ns,{signal:l(this,Wr)._signal});const e=_(this,Ac,document.createElement("div"));return e.className="buttons",t.append(e),y(this,ur,Ny).call(this),t},Fy=function(t,e){let s=0,n=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){n=a,s=o;continue}e?a>n&&(n=a):a<n&&(n=a)}return[e?1-n:n,s]},Ny=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,Wr)._signal;t.addEventListener("contextmenu",ns,{signal:s}),t.addEventListener("click",()=>{l(this,Wr).highlightSelection("floating_button")},{signal:s}),l(this,Ac).append(t)};function bd(i,t,e){for(const s of e)t.addEventListener(s,i[s].bind(i))}function f1(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var xd;class p1{constructor(){A(this,xd,0)}get id(){return`${GT}${cs(this,xd)._++}`}}xd=new WeakMap;var wc,Td,ks,Ec,Tp;const ym=class ym{constructor(){A(this,Ec);A(this,wc,r1());A(this,Td,0);A(this,ks,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Mt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:n,type:r}=t;return y(this,Ec,Tp).call(this,`${e}_${s}_${n}_${r}`,t)}async getFromUrl(t){return y(this,Ec,Tp).call(this,t,t)}async getFromId(t){l(this,ks)||_(this,ks,new Map);const e=l(this,ks).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=l(this,ks).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){l(this,ks)||_(this,ks,new Map);const e=l(this,ks).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${l(this,wc)}_`)}};wc=new WeakMap,Td=new WeakMap,ks=new WeakMap,Ec=new WeakSet,Tp=async function(t,e){l(this,ks)||_(this,ks,new Map);let s=l(this,ks).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,wc)}_${cs(this,Td)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(s.url=e,n=await mf(e,"blob")):n=s.file=e,n.type==="image/svg+xml"){const r=ym._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((h,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,h()},o.onload=async()=>{const f=s.svgUrl=o.result;a.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(n),await c}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){console.error(n),s=null}return l(this,ks).set(t,s),s&&l(this,ks).set(s.id,s),s};let xp=ym;var _e,Bn,Sc,ye;class g1{constructor(t=128){A(this,_e,[]);A(this,Bn,!1);A(this,Sc);A(this,ye,-1);_(this,Sc,t)}add({cmd:t,undo:e,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(n&&t(),l(this,Bn))return;const c={cmd:t,undo:e,post:s,type:r};if(l(this,ye)===-1){l(this,_e).length>0&&(l(this,_e).length=0),_(this,ye,0),l(this,_e).push(c);return}if(o&&l(this,_e)[l(this,ye)].type===r){a&&(c.undo=l(this,_e)[l(this,ye)].undo),l(this,_e)[l(this,ye)]=c;return}const h=l(this,ye)+1;h===l(this,Sc)?l(this,_e).splice(0,1):(_(this,ye,h),h<l(this,_e).length&&l(this,_e).splice(h)),l(this,_e).push(c)}undo(){if(l(this,ye)===-1)return;_(this,Bn,!0);const{undo:t,post:e}=l(this,_e)[l(this,ye)];t(),e==null||e(),_(this,Bn,!1),_(this,ye,l(this,ye)-1)}redo(){if(l(this,ye)<l(this,_e).length-1){_(this,ye,l(this,ye)+1),_(this,Bn,!0);const{cmd:t,post:e}=l(this,_e)[l(this,ye)];t(),e==null||e(),_(this,Bn,!1)}}hasSomethingToUndo(){return l(this,ye)!==-1}hasSomethingToRedo(){return l(this,ye)<l(this,_e).length-1}destroy(){_(this,_e,null)}}_e=new WeakMap,Bn=new WeakMap,Sc=new WeakMap,ye=new WeakMap;var Pd,Hy;class nu{constructor(t){A(this,Pd);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ss.platform;for(const[s,n,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(y(this,Pd,Hy).call(this,e));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(n.bind(t,...o,e)(),r||(e.stopPropagation(),e.preventDefault()))}}Pd=new WeakSet,Hy=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Rd=class Rd{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return u1(t),Mt(this,"_colors",t)}convert(t){const e=pm(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,n]of this._colors)if(n.every((r,o)=>r===e[o]))return Rd._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?ct.makeHexColor(...e):t}};_t(Rd,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Pp=Rd;var Ea,fs,de,Se,Sa,Yi,Ca,Gs,xa,Vr,di,qs,Gr,Cc,xc,Tc,fi,Ta,jn,pi,Ld,zn,Pc,qr,Rc,Pa,Ae,jt,Qi,Xr,Lc,kc,Mc,Ic,Oc,Dc,Fc,Nc,Hc,$c,Bc,jc,zc,Un,gi,Ji,Uc,Z,zu,Rp,$y,By,Uu,jy,zy,Uy,Lp,Wy,kp,Mp,Vy,Ue,Mn,Gy,qy,Ip,Xy,Ul,Op;const ga=class ga{constructor(t,e,s,n,r,o,a,c,h,u){A(this,Z);A(this,Ea,new AbortController);A(this,fs,null);A(this,de,new Map);A(this,Se,new Map);A(this,Sa,null);A(this,Yi,null);A(this,Ca,null);A(this,Gs,new g1);A(this,xa,0);A(this,Vr,new Set);A(this,di,null);A(this,qs,null);A(this,Gr,new Set);A(this,Cc,!1);A(this,xc,!1);A(this,Tc,null);A(this,fi,null);A(this,Ta,null);A(this,jn,!1);A(this,pi,null);A(this,Ld,new p1);A(this,zn,!1);A(this,Pc,!1);A(this,qr,null);A(this,Rc,null);A(this,Pa,null);A(this,Ae,kt.NONE);A(this,jt,new Set);A(this,Qi,null);A(this,Xr,null);A(this,Lc,null);A(this,kc,this.blur.bind(this));A(this,Mc,this.focus.bind(this));A(this,Ic,this.copy.bind(this));A(this,Oc,this.cut.bind(this));A(this,Dc,this.paste.bind(this));A(this,Fc,this.keydown.bind(this));A(this,Nc,this.keyup.bind(this));A(this,Hc,this.onEditingAction.bind(this));A(this,$c,this.onPageChanging.bind(this));A(this,Bc,this.onScaleChanging.bind(this));A(this,jc,this.onRotationChanging.bind(this));A(this,zc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Un,[0,0]);A(this,gi,null);A(this,Ji,null);A(this,Uc,null);this._signal=l(this,Ea).signal,_(this,Ji,t),_(this,Uc,e),_(this,Sa,s),this._eventBus=n,this._eventBus._on("editingaction",l(this,Hc)),this._eventBus._on("pagechanging",l(this,$c)),this._eventBus._on("scalechanging",l(this,Bc)),this._eventBus._on("rotationchanging",l(this,jc)),y(this,Z,jy).call(this),y(this,Z,Vy).call(this),y(this,Z,Lp).call(this),_(this,Yi,r.annotationStorage),_(this,Tc,r.filterFactory),_(this,Xr,o),_(this,Ta,a||null),_(this,Cc,c),_(this,xc,h),_(this,Pa,u||null),this.viewParameters={realScale:hr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=ga.prototype,e=o=>l(o,Ji).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new nu([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ji).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ji).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s;(t=l(this,Ea))==null||t.abort(),_(this,Ea,null),this._signal=null,this._eventBus._off("editingaction",l(this,Hc)),this._eventBus._off("pagechanging",l(this,$c)),this._eventBus._off("scalechanging",l(this,Bc)),this._eventBus._off("rotationchanging",l(this,jc));for(const n of l(this,Se).values())n.destroy();l(this,Se).clear(),l(this,de).clear(),l(this,Gr).clear(),_(this,fs,null),l(this,jt).clear(),l(this,Gs).destroy(),(e=l(this,Sa))==null||e.destroy(),(s=l(this,pi))==null||s.hide(),_(this,pi,null),l(this,fi)&&(clearTimeout(l(this,fi)),_(this,fi,null)),l(this,gi)&&(clearTimeout(l(this,gi)),_(this,gi,null))}async mlGuess(t){var e;return((e=l(this,Pa))==null?void 0:e.guess(t))||null}async isMLEnabledFor(t){var e;return!!await((e=l(this,Pa))==null?void 0:e.isEnabledFor(t))}get useNewAltTextFlow(){return l(this,xc)}get hcmFilter(){return Mt(this,"hcmFilter",l(this,Xr)?l(this,Tc).addHCMFilter(l(this,Xr).foreground,l(this,Xr).background):"none")}get direction(){return Mt(this,"direction",getComputedStyle(l(this,Ji)).direction)}get highlightColors(){return Mt(this,"highlightColors",l(this,Ta)?new Map(l(this,Ta).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){_(this,Rc,t)}editAltText(t){var e;(e=l(this,Sa))==null||e.editAltText(this,t)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onPageChanging({pageNumber:t}){_(this,xa,t-1)}focusMainContainer(){l(this,Ji).focus()}findParent(t,e){for(const s of l(this,Se).values()){const{x:n,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=n&&t<=n+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){l(this,Uc).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,Gr).add(t)}removeShouldRescale(t){l(this,Gr).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*hr.PDF_TO_CSS_UNITS;for(const e of l(this,Gr))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=e,a=e.toString(),h=y(this,Z,zu).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const f=y(this,Z,Rp).call(this,h),p=l(this,Ae)===kt.NONE,g=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o,text:a}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(kt.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&l(this,Yi)&&!l(this,Yi).has(t.id)&&l(this,Yi).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,jn)&&(_(this,jn,!1),y(this,Z,Uu).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,jt))if(e.div.contains(t)){_(this,qr,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,qr))return;const[t,e]=l(this,qr);_(this,qr,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){y(this,Z,Lp).call(this),y(this,Z,kp).call(this)}removeEditListeners(){y(this,Z,Wy).call(this),y(this,Z,Mp).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of l(this,qs))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of l(this,qs))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=l(this,fs))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of l(this,jt)){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of l(this,qs))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){St(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const c of s){const h=n.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)y(this,Z,Ip).call(this,c);y(this,Z,Op).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){St(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Ae)!==kt.NONE&&!this.isEditorHandlingKeyboard&&ga._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,jn)&&(_(this,jn,!1),y(this,Z,Uu).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(y(this,Z,zy).call(this),y(this,Z,kp).call(this),y(this,Z,Ue).call(this,{isEditing:l(this,Ae)!==kt.NONE,isEmpty:y(this,Z,Ul).call(this),hasSomethingToUndo:l(this,Gs).hasSomethingToUndo(),hasSomethingToRedo:l(this,Gs).hasSomethingToRedo(),hasSelectedEditor:!1})):(y(this,Z,Uy).call(this),y(this,Z,Mp).call(this),y(this,Z,Ue).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,qs)){_(this,qs,t);for(const e of l(this,qs))y(this,Z,Mn).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,Ld).id}get currentLayer(){return l(this,Se).get(l(this,xa))}getLayer(t){return l(this,Se).get(t)}get currentPageIndex(){return l(this,xa)}addLayer(t){l(this,Se).set(t.pageIndex,t),l(this,zn)?t.enable():t.disable()}removeLayer(t){l(this,Se).delete(t.pageIndex)}updateMode(t,e=null,s=!1){if(l(this,Ae)!==t){if(_(this,Ae,t),t===kt.NONE){this.setEditingState(!1),y(this,Z,qy).call(this);return}this.setEditingState(!0),y(this,Z,Gy).call(this),this.unselectAll();for(const n of l(this,Se).values())n.updateMode(t);if(!e&&s){this.addNewEditorFromKeyboard();return}if(e){for(const n of l(this,de).values())if(n.annotationElementId===e){this.setSelected(n),n.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,Ae)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(l(this,qs)){switch(t){case bt.CREATE:this.currentLayer.addNewEditor();return;case bt.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,Rc))==null||s.updateColor(e);break;case bt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Lc)||_(this,Lc,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const n of l(this,jt))n.updateParams(t,e);for(const n of l(this,qs))n.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of l(this,de).values())o.editorType===t&&o.show(e);(((r=l(this,Lc))==null?void 0:r.get(bt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&y(this,Z,Mn).call(this,[[bt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,Pc)!==t){_(this,Pc,t);for(const e of l(this,Se).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of l(this,de).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return l(this,de).get(t)}addEditor(t){l(this,de).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(l(this,fi)&&clearTimeout(l(this,fi)),_(this,fi,setTimeout(()=>{this.focusMainContainer(),_(this,fi,null)},0))),l(this,de).delete(t.id),this.unselect(t),(!t.annotationElementId||!l(this,Vr).has(t.annotationElementId))&&((e=l(this,Yi))==null||e.remove(t.id))}addDeletedAnnotationElement(t){l(this,Vr).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,Vr).has(t)}removeDeletedAnnotationElement(t){l(this,Vr).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,fs)!==t&&(_(this,fs,t),t&&y(this,Z,Mn).call(this,t.propertiesToUpdate))}updateUI(t){l(this,Z,Xy)===t&&y(this,Z,Mn).call(this,t.propertiesToUpdate)}toggleSelected(t){if(l(this,jt).has(t)){l(this,jt).delete(t),t.unselect(),y(this,Z,Ue).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,jt).add(t),t.select(),y(this,Z,Mn).call(this,t.propertiesToUpdate),y(this,Z,Ue).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of l(this,jt))e!==t&&e.unselect();l(this,jt).clear(),l(this,jt).add(t),t.select(),y(this,Z,Mn).call(this,t.propertiesToUpdate),y(this,Z,Ue).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,jt).has(t)}get firstSelectedEditor(){return l(this,jt).values().next().value}unselect(t){t.unselect(),l(this,jt).delete(t),y(this,Z,Ue).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,jt).size!==0}get isEnterHandled(){return l(this,jt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Gs).undo(),y(this,Z,Ue).call(this,{hasSomethingToUndo:l(this,Gs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:y(this,Z,Ul).call(this)})}redo(){l(this,Gs).redo(),y(this,Z,Ue).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Gs).hasSomethingToRedo(),isEmpty:y(this,Z,Ul).call(this)})}addCommands(t){l(this,Gs).add(t),y(this,Z,Ue).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:y(this,Z,Ul).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...l(this,jt)],e=()=>{for(const n of t)n.remove()},s=()=>{for(const n of t)y(this,Z,Ip).call(this,n)};this.addCommands({cmd:e,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=l(this,fs))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,fs)||this.hasSelection}selectAll(){for(const t of l(this,jt))t.commit();y(this,Z,Op).call(this,l(this,de).values())}unselectAll(){if(!(l(this,fs)&&(l(this,fs).commitOrRemove(),l(this,Ae)!==kt.NONE))&&this.hasSelection){for(const t of l(this,jt))t.unselect();l(this,jt).clear(),y(this,Z,Ue).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,Un)[0]+=t,l(this,Un)[1]+=e;const[n,r]=l(this,Un),o=[...l(this,jt)],a=1e3;l(this,gi)&&clearTimeout(l(this,gi)),_(this,gi,setTimeout(()=>{_(this,gi,null),l(this,Un)[0]=l(this,Un)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,de).has(c.id)&&c.translateInPage(n,r)},undo:()=>{for(const c of o)l(this,de).has(c.id)&&c.translateInPage(-n,-r)},mustExec:!1})},a));for(const c of o)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,di,new Map);for(const t of l(this,jt))l(this,di).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,di))return!1;this.disableUserSelect(!1);const t=l(this,di);_(this,di,null);let e=!1;for(const[{x:n,y:r,pageIndex:o},a]of t)a.newX=n,a.newY=r,a.newPageIndex=o,e||(e=n!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const s=(n,r,o,a)=>{if(l(this,de).has(n.id)){const c=l(this,Se).get(a);c?n._setParentAndPosition(c,r,o):(n.pageIndex=a,n.x=r,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:o,newPageIndex:a}]of t)s(n,r,o,a)},undo:()=>{for(const[n,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(n,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,di))for(const s of l(this,di).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,jt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,fs)===t}getActive(){return l(this,fs)}getMode(){return l(this,Ae)}get imageManager(){return Mt(this,"imageManager",new xp)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(h,u,f,p)=>({x:(u-n)/o,y:1-(h+f-s)/r,width:p/o,height:f/r});break;case"180":a=(h,u,f,p)=>({x:1-(h+f-s)/r,y:1-(u+p-n)/o,width:f/r,height:p/o});break;case"270":a=(h,u,f,p)=>({x:1-(u+p-n)/o,y:(h-s)/r,width:p/o,height:f/r});break;default:a=(h,u,f,p)=>({x:(h-s)/r,y:(u-n)/o,width:f/r,height:p/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const f=e.getRangeAt(h);if(!f.collapsed)for(const{x:p,y:g,width:m,height:v}of f.getClientRects())m===0||v===0||c.push(a(p,g,m,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,Ca)||_(this,Ca,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,Ca))==null||e.delete(t)}renderAnnotationElement(t){var n;const e=(n=l(this,Ca))==null?void 0:n.get(t.data.id);if(!e)return;const s=l(this,Yi).getRawValue(e);s&&(l(this,Ae)===kt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};Ea=new WeakMap,fs=new WeakMap,de=new WeakMap,Se=new WeakMap,Sa=new WeakMap,Yi=new WeakMap,Ca=new WeakMap,Gs=new WeakMap,xa=new WeakMap,Vr=new WeakMap,di=new WeakMap,qs=new WeakMap,Gr=new WeakMap,Cc=new WeakMap,xc=new WeakMap,Tc=new WeakMap,fi=new WeakMap,Ta=new WeakMap,jn=new WeakMap,pi=new WeakMap,Ld=new WeakMap,zn=new WeakMap,Pc=new WeakMap,qr=new WeakMap,Rc=new WeakMap,Pa=new WeakMap,Ae=new WeakMap,jt=new WeakMap,Qi=new WeakMap,Xr=new WeakMap,Lc=new WeakMap,kc=new WeakMap,Mc=new WeakMap,Ic=new WeakMap,Oc=new WeakMap,Dc=new WeakMap,Fc=new WeakMap,Nc=new WeakMap,Hc=new WeakMap,$c=new WeakMap,Bc=new WeakMap,jc=new WeakMap,zc=new WeakMap,Un=new WeakMap,gi=new WeakMap,Ji=new WeakMap,Uc=new WeakMap,Z=new WeakSet,zu=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Rp=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of l(this,Se).values())if(s.hasTextLayer(t))return s;return null},$y=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=y(this,Z,zu).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(l(this,pi)||_(this,pi,new d1(this)),l(this,pi).show(s,n,this.direction==="ltr"))},By=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){l(this,Qi)&&((r=l(this,pi))==null||r.hide(),_(this,Qi,null),y(this,Z,Ue).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,Qi))return;const n=y(this,Z,zu).call(this,t).closest(".textLayer");if(!n){l(this,Qi)&&((o=l(this,pi))==null||o.hide(),_(this,Qi,null),y(this,Z,Ue).call(this,{hasSelectedText:!1}));return}if((a=l(this,pi))==null||a.hide(),_(this,Qi,e),y(this,Z,Ue).call(this,{hasSelectedText:!0}),!(l(this,Ae)!==kt.HIGHLIGHT&&l(this,Ae)!==kt.NONE)&&(l(this,Ae)===kt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,jn,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Ae)===kt.HIGHLIGHT?y(this,Z,Rp).call(this,n):null;c==null||c.toggleDrawing();const h=this._signal,u=f=>{f.type==="pointerup"&&f.button!==0||(c==null||c.toggleDrawing(!0),window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),f.type==="pointerup"&&y(this,Z,Uu).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:h}),window.addEventListener("blur",u,{signal:h})}},Uu=function(t=""){l(this,Ae)===kt.HIGHLIGHT?this.highlightSelection(t):l(this,Cc)&&y(this,Z,$y).call(this)},jy=function(){document.addEventListener("selectionchange",y(this,Z,By).bind(this),{signal:this._signal})},zy=function(){const t=this._signal;window.addEventListener("focus",l(this,Mc),{signal:t}),window.addEventListener("blur",l(this,kc),{signal:t})},Uy=function(){window.removeEventListener("focus",l(this,Mc)),window.removeEventListener("blur",l(this,kc))},Lp=function(){const t=this._signal;window.addEventListener("keydown",l(this,Fc),{signal:t}),window.addEventListener("keyup",l(this,Nc),{signal:t})},Wy=function(){window.removeEventListener("keydown",l(this,Fc)),window.removeEventListener("keyup",l(this,Nc))},kp=function(){const t=this._signal;document.addEventListener("copy",l(this,Ic),{signal:t}),document.addEventListener("cut",l(this,Oc),{signal:t}),document.addEventListener("paste",l(this,Dc),{signal:t})},Mp=function(){document.removeEventListener("copy",l(this,Ic)),document.removeEventListener("cut",l(this,Oc)),document.removeEventListener("paste",l(this,Dc))},Vy=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ue=function(t){Object.entries(t).some(([s,n])=>l(this,zc)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,zc),t)}),l(this,Ae)===kt.HIGHLIGHT&&t.hasSelectedEditor===!1&&y(this,Z,Mn).call(this,[[bt.HIGHLIGHT_FREE,!0]]))},Mn=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Gy=function(){if(!l(this,zn)){_(this,zn,!0);for(const t of l(this,Se).values())t.enable();for(const t of l(this,de).values())t.enable()}},qy=function(){if(this.unselectAll(),l(this,zn)){_(this,zn,!1);for(const t of l(this,Se).values())t.disable();for(const t of l(this,de).values())t.disable()}},Ip=function(t){const e=l(this,Se).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Xy=function(){let t=null;for(t of l(this,jt));return t},Ul=function(){if(l(this,de).size===0)return!0;if(l(this,de).size===1)for(const t of l(this,de).values())return t.isEmpty();return!1},Op=function(t){for(const e of l(this,jt))e.unselect();l(this,jt).clear();for(const e of t)e.isEmpty()||(l(this,jt).add(e),e.select());y(this,Z,Ue).call(this,{hasSelectedEditor:this.hasSelection})},_t(ga,"TRANSLATE_SMALL",1),_t(ga,"TRANSLATE_BIG",10);let Wo=ga;var Zi,tn,Xs,en,ps,Ra,Ks,Wc,Dp;const Vi=class Vi{constructor(t){A(this,Wc);A(this,Zi,"");A(this,tn,!1);A(this,Xs,null);A(this,en,null);A(this,ps,null);A(this,Ra,!1);A(this,Ks,null);_(this,Ks,t)}static initialize(t){Vi._l10nPromise||(Vi._l10nPromise=t)}async render(){const t=_(this,Xs,document.createElement("button"));t.className="altText";const e=await Vi._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const s=l(this,Ks)._uiManager._signal;t.addEventListener("contextmenu",ns,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),l(this,Ks)._uiManager.editAltText(l(this,Ks))};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(_(this,Ra,!0),n(r))},{signal:s}),await y(this,Wc,Dp).call(this),t}finish(){l(this,Xs)&&(l(this,Xs).focus({focusVisible:l(this,Ra)}),_(this,Ra,!1))}isEmpty(){return!l(this,Zi)&&!l(this,tn)}get data(){return{altText:l(this,Zi),decorative:l(this,tn)}}set data({altText:t,decorative:e}){l(this,Zi)===t&&l(this,tn)===e||(_(this,Zi,t),_(this,tn,e),y(this,Wc,Dp).call(this))}toggle(t=!1){l(this,Xs)&&(!t&&l(this,ps)&&(clearTimeout(l(this,ps)),_(this,ps,null)),l(this,Xs).disabled=!t)}destroy(){var t;(t=l(this,Xs))==null||t.remove(),_(this,Xs,null),_(this,en,null)}};Zi=new WeakMap,tn=new WeakMap,Xs=new WeakMap,en=new WeakMap,ps=new WeakMap,Ra=new WeakMap,Ks=new WeakMap,Wc=new WeakSet,Dp=async function(){var n;const t=l(this,Xs);if(!t)return;if(!l(this,Zi)&&!l(this,tn)){t.classList.remove("done"),(n=l(this,en))==null||n.remove();return}t.classList.add("done"),Vi._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(r=>{t.setAttribute("aria-label",r)});let e=l(this,en);if(!e){_(this,en,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const r=e.id=`alt-text-tooltip-${l(this,Ks).id}`;t.setAttribute("aria-describedby",r);const o=100,a=l(this,Ks)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(l(this,ps)),_(this,ps,null)},{once:!0}),t.addEventListener("mouseenter",()=>{_(this,ps,setTimeout(()=>{_(this,ps,null),l(this,en).classList.add("show"),l(this,Ks)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),t.addEventListener("mouseleave",()=>{var c;l(this,ps)&&(clearTimeout(l(this,ps)),_(this,ps,null)),(c=l(this,en))==null||c.classList.remove("show")},{signal:a})}e.innerText=l(this,tn)?await Vi._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):l(this,Zi),e.parentNode||t.append(e);const s=l(this,Ks).getImageForAltText();s==null||s.setAttribute("aria-describedby",e.id)},_t(Vi,"_l10nPromise",null);let vd=Vi;var Kr,Ys,Oe,La,Yr,Ce,Qr,ka,Ma,De,Vc,Jr,Wn,Gc,Zr,sn,mi,Ia,Oa,Ms,qc,kd,Tt,Fp,Xc,Np,Hp,Ky,Yy,$p,Bp,jp,Qy,Jy,Zy,tA,zp,Wl;const Gt=class Gt{constructor(t){A(this,Tt);A(this,Kr,null);A(this,Ys,null);A(this,Oe,null);A(this,La,!1);A(this,Yr,!1);A(this,Ce,null);A(this,Qr,null);A(this,ka,this.focusin.bind(this));A(this,Ma,this.focusout.bind(this));A(this,De,null);A(this,Vc,"");A(this,Jr,!1);A(this,Wn,null);A(this,Gc,!1);A(this,Zr,!1);A(this,sn,!1);A(this,mi,null);A(this,Ia,0);A(this,Oa,0);A(this,Ms,null);_t(this,"_initialOptions",Object.create(null));_t(this,"_isVisible",!0);_t(this,"_uiManager",null);_t(this,"_focusEventsAllowed",!0);_t(this,"_l10nPromise",null);A(this,qc,!1);A(this,kd,Gt._zIndex++);this.constructor===Gt&&Wt("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Gt.prototype._resizeWithKeyboard,e=Wo.TRANSLATE_SMALL,s=Wo.TRANSLATE_BIG;return Mt(this,"_resizerKeyboardManager",new nu([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Gt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new m1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,s){if(Gt._l10nPromise||(Gt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,t.get(r.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),s!=null&&s.strings)for(const r of s.strings)Gt._l10nPromise.set(r,t.get(r));if(Gt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Gt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Wt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,qc)}set _isDraggable(t){var e;_(this,qc,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,kd)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):y(this,Tt,Wl).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Jr)?_(this,Jr,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,n){const[r,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/r,this.y=(e+n)/o,this.fixAndSetPosition()}translate(t,e){y(this,Tt,Fp).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,Wn)||_(this,Wn,[this.x,this.y]),y(this,Tt,Fp).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){l(this,Wn)||_(this,Wn,[this.x,this.y]);const[s,n]=this.parentDimensions;if(this.x+=t/s,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,c]=this.getBaseTranslation();r+=a,o+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Wn)&&(l(this,Wn)[0]!==this.x||l(this,Wn)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=Gt,n=s/t,r=s/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,s]=this.pageDimensions;let{x:n,y:r,width:o,height:a}=this;if(o*=e,a*=s,n*=e,r*=s,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-o,n)),r=Math.max(0,Math.min(s-a,r));break;case 90:n=Math.max(0,Math.min(e-a,n)),r=Math.min(s,Math.max(o,r));break;case 180:n=Math.min(e,Math.max(o,n)),r=Math.min(s,Math.max(a,r));break;case 270:n=Math.min(e,Math.max(a,n)),r=Math.max(0,Math.min(s-o,r));break}this.x=n/=e,this.y=r/=s;const[c,h]=this.getBaseTranslation();n+=c,r+=h;const{style:u}=this.div;u.left=`${(100*n).toFixed(2)}%`,u.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return y(s=Gt,Xc,Np).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return y(s=Gt,Xc,Np).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this,n=e*t,r=s*t;return ss.isCSSRoundSupported?[Math.round(n),Math.round(r)]:[n,r]}setDims(t,e){const[s,n]=this.parentDimensions;this.div.style.width=`${(100*t/s).toFixed(2)}%`,l(this,Yr)||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,n=s.endsWith("%"),r=!l(this,Yr)&&e.endsWith("%");if(n&&r)return;const[o,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!l(this,Yr)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=l(this,Oe))==null||t.finish()}async addEditToolbar(){return l(this,De)||l(this,Zr)?l(this,De):(_(this,De,new Sp(this)),this.div.append(l(this,De).render()),l(this,Oe)&&l(this,De).addAltTextButton(await l(this,Oe).render()),l(this,De))}removeEditToolbar(){var t;l(this,De)&&(l(this,De).remove(),_(this,De,null),(t=l(this,Oe))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Oe)||(vd.initialize(Gt._l10nPromise),_(this,Oe,new vd(this)),l(this,Kr)&&(l(this,Oe).data=l(this,Kr),_(this,Kr,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=l(this,Oe))==null?void 0:t.data}set altTextData(t){l(this,Oe)&&(l(this,Oe).data=t)}hasAltText(){var t;return!((t=l(this,Oe))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,La)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",l(this,ka),{signal:t}),this.div.addEventListener("focusout",l(this,Ma),{signal:t});const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*s/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),bd(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=ss.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(_(this,Jr,!0),this._isDraggable){y(this,Tt,Qy).call(this,t);return}y(this,Tt,jp).call(this,t)}moveInDOM(){l(this,mi)&&clearTimeout(l(this,mi)),_(this,mi,setTimeout(()=>{var t;_(this,mi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition()}getRect(t,e,s=this.rotation){const n=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,h=t/n,u=e/n,f=this.x*r,p=this.y*o,g=this.width*r,m=this.height*o;switch(s){case 0:return[f+h+a,o-p-u-m+c,f+h+g+a,o-p-u+c];case 90:return[f+u+a,o-p+h+c,f+u+m+a,o-p+h+g+c];case 180:return[f-h-g+a,o-p+u+c,f-h+a,o-p+u+m+c];case 270:return[f-u-m+a,o-p-h-g+c,f-u+a,o-p-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,r,o]=t,a=r-s,c=o-n;switch(this.rotation){case 0:return[s,e-o,a,c];case 90:return[s,e-n,c,a];case 180:return[r,e-n,a,c];case 270:return[r,e-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_(this,Zr,!0)}disableEditMode(){_(this,Zr,!1)}isInEditMode(){return l(this,Zr)}shouldGetKeyboardEvents(){return l(this,sn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,s;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",l(this,ka),{signal:t}),(s=this.div)==null||s.addEventListener("focusout",l(this,Ma),{signal:t})}rotate(t){}serialize(t=!1,e=null){Wt("An editor must be serializable")}static deserialize(t,e,s){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});n.rotation=t.rotation,_(n,Kr,t.accessibilityData);const[r,o]=n.pageDimensions,[a,c,h,u]=n.getRectInCurrentCoords(t.rect,o);return n.x=a/r,n.y=c/o,n.width=h/r,n.height=u/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",l(this,ka)),this.div.removeEventListener("focusout",l(this,Ma)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,mi)&&(clearTimeout(l(this,mi)),_(this,mi,null)),y(this,Tt,Wl).call(this),this.removeEditToolbar(),l(this,Ms)){for(const t of l(this,Ms).values())clearTimeout(t);_(this,Ms,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(y(this,Tt,Ky).call(this),l(this,Ce).classList.remove("hidden"),bd(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),_(this,Qr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,Ce).children;if(!l(this,Ys)){_(this,Ys,Array.from(e));const o=y(this,Tt,Jy).bind(this),a=y(this,Tt,Zy).bind(this),c=this._uiManager._signal;for(const h of l(this,Ys)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",a,{signal:c}),h.addEventListener("focus",y(this,Tt,tA).bind(this,u),{signal:c}),Gt._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(f=>h.setAttribute("aria-label",f))}}const s=l(this,Ys)[0];let n=0;for(const o of e){if(o===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ys).length/4);if(r!==n){if(r<n)for(let a=0;a<n-r;a++)l(this,Ce).append(l(this,Ce).firstChild);else if(r>n)for(let a=0;a<r-n;a++)l(this,Ce).firstChild.before(l(this,Ce).lastChild);let o=0;for(const a of e){const h=l(this,Ys)[o++].getAttribute("data-resizer-name");Gt._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(u=>a.setAttribute("aria-label",u))}}y(this,Tt,zp).call(this,0),_(this,sn,!0),l(this,Ce).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,sn)&&y(this,Tt,Bp).call(this,l(this,Vc),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){y(this,Tt,Wl).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!l(this,De)){this.addEditToolbar().then(()=>{var s,n;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((n=l(this,De))==null||n.show())});return}(e=l(this,De))==null||e.show()}unselect(){var t,e,s,n;(t=l(this,Ce))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=l(this,De))==null||n.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Gc)}set isEditing(t){_(this,Gc,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){_(this,Yr,!0);const s=t/e,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,Ms)||_(this,Ms,new Map);const{action:s}=t;let n=l(this,Ms).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),l(this,Ms).delete(s),l(this,Ms).size===0&&_(this,Ms,null)},Gt._telemetryTimeout),l(this,Ms).set(s,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),_(this,La,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,La,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Kr=new WeakMap,Ys=new WeakMap,Oe=new WeakMap,La=new WeakMap,Yr=new WeakMap,Ce=new WeakMap,Qr=new WeakMap,ka=new WeakMap,Ma=new WeakMap,De=new WeakMap,Vc=new WeakMap,Jr=new WeakMap,Wn=new WeakMap,Gc=new WeakMap,Zr=new WeakMap,sn=new WeakMap,mi=new WeakMap,Ia=new WeakMap,Oa=new WeakMap,Ms=new WeakMap,qc=new WeakMap,kd=new WeakMap,Tt=new WeakSet,Fp=function([t,e],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/e,this.fixAndSetPosition()},Xc=new WeakSet,Np=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Hp=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},Ky=function(){if(l(this,Ce))return;_(this,Ce,document.createElement("div")),l(this,Ce).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const n=document.createElement("div");l(this,Ce).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",y(this,Tt,Yy).bind(this,s),{signal:e}),n.addEventListener("contextmenu",ns,{signal:e}),n.tabIndex=-1}this.div.prepend(l(this,Ce))},Yy=function(t,e){var v;e.preventDefault();const{isMac:s}=ss.platform;if(e.button!==0||e.ctrlKey&&s)return;(v=l(this,Oe))==null||v.toggle(!1);const n=y(this,Tt,Bp).bind(this,t),r=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",n,a),window.addEventListener("contextmenu",ns,{signal:o});const c=this.x,h=this.y,u=this.width,f=this.height,p=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const m=()=>{var E;this.parent.togglePointerEvents(!0),(E=l(this,Oe))==null||E.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",n,a),window.removeEventListener("contextmenu",ns),this.parent.div.style.cursor=p,this.div.style.cursor=g,y(this,Tt,$p).call(this,c,h,u,f)};window.addEventListener("pointerup",m,{signal:o}),window.addEventListener("blur",m,{signal:o})},$p=function(t,e,s,n){const r=this.x,o=this.y,a=this.width,c=this.height;r===t&&o===e&&a===s&&c===n||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=r,this.y=o;const[h,u]=this.parentDimensions;this.setDims(h*a,u*c),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=n,this.x=t,this.y=e;const[h,u]=this.parentDimensions;this.setDims(h*s,u*n),this.fixAndSetPosition()},mustExec:!0})},Bp=function(t,e){const[s,n]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,h=Gt.MIN_SIZE/s,u=Gt.MIN_SIZE/n,f=V=>Math.round(V*1e4)/1e4,p=y(this,Tt,Hp).call(this,this.rotation),g=(V,Y)=>[p[0]*V+p[2]*Y,p[1]*V+p[3]*Y],m=y(this,Tt,Hp).call(this,360-this.rotation),v=(V,Y)=>[m[0]*V+m[2]*Y,m[1]*V+m[3]*Y];let E,w,C=!1,T=!1;switch(t){case"topLeft":C=!0,E=(V,Y)=>[0,0],w=(V,Y)=>[V,Y];break;case"topMiddle":E=(V,Y)=>[V/2,0],w=(V,Y)=>[V/2,Y];break;case"topRight":C=!0,E=(V,Y)=>[V,0],w=(V,Y)=>[0,Y];break;case"middleRight":T=!0,E=(V,Y)=>[V,Y/2],w=(V,Y)=>[0,Y/2];break;case"bottomRight":C=!0,E=(V,Y)=>[V,Y],w=(V,Y)=>[0,0];break;case"bottomMiddle":E=(V,Y)=>[V/2,Y],w=(V,Y)=>[V/2,0];break;case"bottomLeft":C=!0,E=(V,Y)=>[0,Y],w=(V,Y)=>[V,0];break;case"middleLeft":T=!0,E=(V,Y)=>[0,Y/2],w=(V,Y)=>[V,Y/2];break}const L=E(a,c),M=w(a,c);let k=g(...M);const N=f(r+k[0]),W=f(o+k[1]);let tt=1,nt=1,[J,pt]=this.screenToPageTranslation(e.movementX,e.movementY);if([J,pt]=v(J/s,pt/n),C){const V=Math.hypot(a,c);tt=nt=Math.max(Math.min(Math.hypot(M[0]-L[0]-J,M[1]-L[1]-pt)/V,1/a,1/c),h/a,u/c)}else T?tt=Math.max(h,Math.min(1,Math.abs(M[0]-L[0]-J)))/a:nt=Math.max(u,Math.min(1,Math.abs(M[1]-L[1]-pt)))/c;const ht=f(a*tt),wt=f(c*nt);k=g(...w(ht,wt));const At=N-k[0],dt=W-k[1];this.width=ht,this.height=wt,this.x=At,this.y=dt,this.setDims(s*ht,n*wt),this.fixAndSetPosition()},jp=function(t){const{isMac:e}=ss.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Qy=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let s,n;const r=this._uiManager._signal;e&&(this.div.classList.add("moving"),s={passive:!0,capture:!0,signal:r},_(this,Ia,t.clientX),_(this,Oa,t.clientY),n=a=>{const{clientX:c,clientY:h}=a,[u,f]=this.screenToPageTranslation(c-l(this,Ia),h-l(this,Oa));_(this,Ia,c),_(this,Oa,h),this._uiManager.dragSelectedEditors(u,f)},window.addEventListener("pointermove",n,s));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,s)),_(this,Jr,!1),this._uiManager.endDragSession()||y(this,Tt,jp).call(this,t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},Jy=function(t){Gt._resizerKeyboardManager.exec(this,t)},Zy=function(t){var e;l(this,sn)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,Ce)&&y(this,Tt,Wl).call(this)},tA=function(t){_(this,Vc,l(this,sn)?t:"")},zp=function(t){if(l(this,Ys))for(const e of l(this,Ys))e.tabIndex=t},Wl=function(){if(_(this,sn,!1),y(this,Tt,zp).call(this,-1),l(this,Qr)){const{savedX:t,savedY:e,savedWidth:s,savedHeight:n}=l(this,Qr);y(this,Tt,$p).call(this,t,e,s,n),_(this,Qr,null)}},A(Gt,Xc),_t(Gt,"_borderLineWidth",-1),_t(Gt,"_colorManager",new Pp),_t(Gt,"_zIndex",1),_t(Gt,"_telemetryTimeout",1e3);let $t=Gt;class m1 extends $t{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const mv=3285377520,Ls=4294901760,hi=65535;class eA{constructor(t){this.h1=t?t&4294967295:mv,this.h2=t?t&4294967295:mv}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let v=0,E=t.length;v<E;v++){const w=t.charCodeAt(v);w<=255?e[s++]=w:(e[s++]=w>>>8,e[s++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,o=new Uint32Array(e.buffer,0,n);let a=0,c=0,h=this.h1,u=this.h2;const f=3432918353,p=461845907,g=f&hi,m=p&hi;for(let v=0;v<n;v++)v&1?(a=o[v],a=a*f&Ls|a*g&hi,a=a<<15|a>>>17,a=a*p&Ls|a*m&hi,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[v],c=c*f&Ls|c*g&hi,c=c<<15|c>>>17,c=c*p&Ls|c*m&hi,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[n*4+2]<<16;case 2:a^=e[n*4+1]<<8;case 1:a^=e[n*4],a=a*f&Ls|a*g&hi,a=a<<15|a>>>17,a=a*p&Ls|a*m&hi,n&1?h^=a:u^=a}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ls|t*36045&hi,e=e*4283543511&Ls|((e<<16|t>>>16)*2950163797&Ls)>>>16,t^=e>>>1,t=t*444984403&Ls|t*60499&hi,e=e*3301882366&Ls|((e<<16|t>>>16)*3120437893&Ls)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Up=Object.freeze({map:null,hash:"",transfer:void 0});var to,eo,we,Md,sA;class gm{constructor(){A(this,Md);A(this,to,!1);A(this,eo,null);A(this,we,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=l(this,we).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return l(this,we).get(t)}remove(t){if(l(this,we).delete(t),l(this,we).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of l(this,we).values())if(e instanceof $t)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=l(this,we).get(t);let n=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(n=!0,s[r]=o);else n=!0,l(this,we).set(t,e);n&&y(this,Md,sA).call(this),e instanceof $t&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,we).has(t)}getAll(){return l(this,we).size>0?cm(l(this,we)):null}setAll(t){for(const[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return l(this,we).size}resetModified(){l(this,to)&&(_(this,to,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iA(this)}get serializable(){if(l(this,we).size===0)return Up;const t=new Map,e=new eA,s=[],n=Object.create(null);let r=!1;for(const[o,a]of l(this,we)){const c=a instanceof $t?a.serialize(!1,n):a;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:Up}get editorStats(){let t=null;const e=new Map;for(const s of l(this,we).values()){if(!(s instanceof $t))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,c]of Object.entries(n)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){_(this,eo,null)}get modifiedIds(){if(l(this,eo))return l(this,eo);const t=[];for(const e of l(this,we).values())!(e instanceof $t)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return _(this,eo,{ids:new Set(t),hash:t.join(",")})}}to=new WeakMap,eo=new WeakMap,we=new WeakMap,Md=new WeakSet,sA=function(){l(this,to)||(_(this,to,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Kc;class iA extends gm{constructor(e){super();A(this,Kc);const{map:s,hash:n,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);_(this,Kc,{map:o,hash:n,transfer:r})}get print(){Wt("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Kc)}get modifiedIds(){return Mt(this,"modifiedIds",{ids:new Set,hash:""})}}Kc=new WeakMap;var Da;class b1{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,Da,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Da).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||l(this,Da).has(t.loadedName))){if(me(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:n,style:r}=t,o=new FontFace(s,n,r);this.addNativeFontFace(o);try{await o.load(),l(this,Da).add(s),e==null||e(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Wt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw St(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Mt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return($e||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Mt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(me(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:e,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Mt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(L,M){return L.charCodeAt(M)<<24|L.charCodeAt(M+1)<<16|L.charCodeAt(M+2)<<8|L.charCodeAt(M+3)&255}function n(L,M,k,N){const W=L.substring(0,M),tt=L.substring(M+k);return W+N+tt}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let h=0;function u(L,M){if(++h>30){St("Load test font never loaded."),M();return}if(c.font="30px "+L,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(u.bind(null,L,M))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=n(p,976,f.length,f);const m=16,v=1482184792;let E=s(p,m);for(r=0,o=f.length-3;r<o;r+=4)E=E-v+s(f,r)|0;r<f.length&&(E=E-v+s(f+"XXX",r)|0),p=n(p,m,4,t1(E));const w=`url(data:font/opentype;base64,${btoa(p)});`,C=`@font-face {font-family:"${f}";src:${w}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const L of[t.loadedName,f]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=L,T.append(M)}this._document.body.append(T),u(f,()=>{T.remove(),e.complete()})}}Da=new WeakMap;class v1{constructor(t,{disableFontFace:e=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=e===!0,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=Cy(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),s}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let s;try{s=t.get(this.loadedName+"_path_"+e)}catch(r){St(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[e]=function(r,o){};const n=[];for(let r=0,o=s.length;r<o;)switch(s[r++]){case ji.BEZIER_CURVE_TO:{const[a,c,h,u,f,p]=s.slice(r,r+6);n.push(g=>g.bezierCurveTo(a,c,h,u,f,p)),r+=6}break;case ji.MOVE_TO:{const[a,c]=s.slice(r,r+2);n.push(h=>h.moveTo(a,c)),r+=2}break;case ji.LINE_TO:{const[a,c]=s.slice(r,r+2);n.push(h=>h.lineTo(a,c)),r+=2}break;case ji.QUADRATIC_CURVE_TO:{const[a,c,h,u]=s.slice(r,r+4);n.push(f=>f.quadraticCurveTo(a,c,h,u)),r+=4}break;case ji.RESTORE:n.push(a=>a.restore());break;case ji.SAVE:n.push(a=>a.save());break;case ji.SCALE:me(n.length===2,"Scale command is only valid at the third position.");break;case ji.TRANSFORM:{const[a,c,h,u,f,p]=s.slice(r,r+6);n.push(g=>g.transform(a,c,h,u,f,p)),r+=6}break;case ji.TRANSLATE:{const[a,c]=s.slice(r,r+2);n.push(h=>h.translate(a,c)),r+=2}break}return this.compiledGlyphs[e]=function(o,a){n[0](o),n[1](o),o.scale(a,-a);for(let c=2,h=n.length;c<h;c++)n[c](o)}}}if($e){var Wp=Promise.withResolvers(),hc=null;(async()=>{const t=await Cu(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await Cu(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Cu(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Cu(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,o;return new Map(Object.entries({fs:t,http:e,https:s,url:n,canvas:r,path2d:o}))})().then(t=>{hc=t,Wp.resolve()},t=>{St(`loadPackages: ${t}`),hc=new Map,Wp.resolve()})}class Di{static get promise(){return Wp.promise}static get(t){return hc==null?void 0:hc.get(t)}}const nA=function(i){return Di.get("fs").promises.readFile(i).then(e=>new Uint8Array(e))};class _1 extends ff{}class y1 extends md{_createCanvas(t,e){return Di.get("canvas").createCanvas(t,e)}}class A1 extends pf{_fetchData(t,e){return nA(t).then(s=>({cMapData:s,compressionType:e}))}}class w1 extends gf{_fetchData(t){return nA(t)}}const Ve={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Vp(i,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,s),i.clip(n)}class ru{constructor(){this.constructor===ru&&Wt("Cannot initialize BaseShadingPattern.")}getPattern(){Wt("Abstract method `getPattern` called.")}}class E1 extends ru{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,n){let r;if(n===Ve.STROKE||n===Ve.FILL){const o=e.current.getClippedPathBoundingBox(n,se(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",a,c,!0),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=ct.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),Vp(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const f=new DOMMatrix(s);r.setTransform(f)}else Vp(t,this._bbox),r=this._createGradient(t);return r}}function Kf(i,t,e,s,n,r,o,a){const c=t.coords,h=t.colors,u=i.data,f=i.width*4;let p;c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p),c[s+1]>c[n+1]&&(p=s,s=n,n=p,p=o,o=a,a=p),c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p);const g=(c[e]+t.offsetX)*t.scaleX,m=(c[e+1]+t.offsetY)*t.scaleY,v=(c[s]+t.offsetX)*t.scaleX,E=(c[s+1]+t.offsetY)*t.scaleY,w=(c[n]+t.offsetX)*t.scaleX,C=(c[n+1]+t.offsetY)*t.scaleY;if(m>=C)return;const T=h[r],L=h[r+1],M=h[r+2],k=h[o],N=h[o+1],W=h[o+2],tt=h[a],nt=h[a+1],J=h[a+2],pt=Math.round(m),ht=Math.round(C);let wt,At,dt,V,Y,Kt,ie,oe;for(let Et=pt;Et<=ht;Et++){if(Et<E){const O=Et<m?0:(m-Et)/(m-E);wt=g-(g-v)*O,At=T-(T-k)*O,dt=L-(L-N)*O,V=M-(M-W)*O}else{let O;Et>C?O=1:E===C?O=0:O=(E-Et)/(E-C),wt=v-(v-w)*O,At=k-(k-tt)*O,dt=N-(N-nt)*O,V=W-(W-J)*O}let D;Et<m?D=0:Et>C?D=1:D=(m-Et)/(m-C),Y=g-(g-w)*D,Kt=T-(T-tt)*D,ie=L-(L-nt)*D,oe=M-(M-J)*D;const ne=Math.round(Math.min(wt,Y)),Yt=Math.round(Math.max(wt,Y));let Ft=f*Et+ne*4;for(let O=ne;O<=Yt;O++)D=(wt-O)/(wt-Y),D<0?D=0:D>1&&(D=1),u[Ft++]=At-(At-Kt)*D|0,u[Ft++]=dt-(dt-ie)*D|0,u[Ft++]=V-(V-oe)*D|0,u[Ft++]=255}}function S1(i,t,e){const s=t.coords,n=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,c=Math.floor(s.length/a)-1,h=a-1;for(r=0;r<c;r++){let u=r*a;for(let f=0;f<h;f++,u++)Kf(i,e,s[u],s[u+1],s[u+a],n[u],n[u+1],n[u+a]),Kf(i,e,s[u+a+1],s[u+1],s[u+a],n[u+a+1],n[u+1],n[u+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)Kf(i,e,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class C1 extends ru{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=h/f,m=u/p,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/g,scaleY:1/m},E=f+2*2,w=p+2*2,C=s.getCanvas("mesh",E,w,!1),T=C.context,L=T.createImageData(f,p);if(e){const k=L.data;for(let N=0,W=k.length;N<W;N+=4)k[N]=e[0],k[N+1]=e[1],k[N+2]=e[2],k[N+3]=255}for(const k of this._figures)S1(L,k,v);return T.putImageData(L,2,2),{canvas:C.canvas,offsetX:a-2*g,offsetY:c-2*m,scaleX:g,scaleY:m}}getPattern(t,e,s,n){Vp(t,this._bbox);let r;if(n===Ve.SHADING)r=ct.singularValueDecompose2dScale(se(t));else if(r=ct.singularValueDecompose2dScale(e.baseTransform),this.matrix){const a=ct.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,n===Ve.SHADING?null:this._background,e.cachedCanvases);return n!==Ve.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class x1 extends ru{getPattern(){return"hotpink"}}function T1(i){switch(i[0]){case"RadialAxial":return new E1(i);case"Mesh":return new C1(i);case"Dummy":return new x1}throw new Error(`Unknown IR type: ${i[0]}`)}const bv={COLORED:1,UNCOLORED:2},Id=class Id{constructor(t,e,s,n,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,s=this.bbox,n=this.xstep,r=this.ystep,o=this.paintType,a=this.tilingType,c=this.color,h=this.canvasGraphicsFactory;hf("TilingType: "+a);const u=s[0],f=s[1],p=s[2],g=s[3],m=ct.singularValueDecompose2dScale(this.matrix),v=ct.singularValueDecompose2dScale(this.baseTransform),E=[m[0]*v[0],m[1]*v[1]],w=this.getSizeAndScale(n,this.ctx.canvas.width,E[0]),C=this.getSizeAndScale(r,this.ctx.canvas.height,E[1]),T=t.cachedCanvases.getCanvas("pattern",w.size,C.size,!0),L=T.context,M=h.createCanvasGraphics(L);M.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(M,o,c);let k=u,N=f,W=p,tt=g;return u<0&&(k=0,W+=Math.abs(u)),f<0&&(N=0,tt+=Math.abs(f)),L.translate(-(w.scale*k),-(C.scale*N)),M.transform(w.scale,0,0,C.scale,0,0),L.save(),this.clipBbox(M,k,N,W,tt),M.baseTransform=se(M.ctx),M.executeOperatorList(e),M.endDrawing(),{canvas:T.canvas,scaleX:w.scale,scaleY:C.scale,offsetX:k,offsetY:N}}getSizeAndScale(t,e,s){t=Math.abs(t);const n=Math.max(Id.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=n?r=n:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,n,r){const o=n-e,a=r-s;t.ctx.rect(e,s,o,a),t.current.updateRectMinMax(se(t.ctx),[e,s,n,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,r=t.current;switch(e){case bv.COLORED:const o=this.ctx;n.fillStyle=o.fillStyle,n.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case bv.UNCOLORED:const a=ct.makeHexColor(s[0],s[1],s[2]);n.fillStyle=a,n.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new ZT(`Unsupported paint type: ${e}`)}}getPattern(t,e,s,n){let r=s;n!==Ve.SHADING&&(r=ct.transform(r,e.baseTransform),this.matrix&&(r=ct.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};_t(Id,"MAX_PATTERN_SIZE",3e3);let Gp=Id;function P1({src:i,srcPos:t=0,dest:e,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=ss.isLittleEndian?4278190080:255,[c,h]=o?[r,a]:[a,r],u=s>>3,f=s&7,p=i.length;e=new Uint32Array(e.buffer);let g=0;for(let m=0;m<n;m++){for(const E=t+u;t<E;t++){const w=t<p?i[t]:255;e[g++]=w&128?h:c,e[g++]=w&64?h:c,e[g++]=w&32?h:c,e[g++]=w&16?h:c,e[g++]=w&8?h:c,e[g++]=w&4?h:c,e[g++]=w&2?h:c,e[g++]=w&1?h:c}if(f===0)continue;const v=t<p?i[t++]:255;for(let E=0;E<f;E++)e[g++]=v&1<<7-E?h:c}return{srcPos:t,destPos:g}}const vv=16,_v=100,R1=15,yv=10,Av=1e3,ts=16;function L1(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(s,n){t.translate(s,n),this.__originalTranslate(s,n)},i.scale=function(s,n){t.scale(s,n),this.__originalScale(s,n)},i.transform=function(s,n,r,o,a,c){t.transform(s,n,r,o,a,c),this.__originalTransform(s,n,r,o,a,c)},i.setTransform=function(s,n,r,o,a,c){t.setTransform(s,n,r,o,a,c),this.__originalSetTransform(s,n,r,o,a,c)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(s){t.rotate(s),this.__originalRotate(s)},i.clip=function(s){t.clip(s),this.__originalClip(s)},i.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},i.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},i.bezierCurveTo=function(e,s,n,r,o,a){t.bezierCurveTo(e,s,n,r,o,a),this.__originalBezierCurveTo(e,s,n,r,o,a)},i.rect=function(e,s,n,r){t.rect(e,s,n,r),this.__originalRect(e,s,n,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class k1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,s)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function xu(i,t,e,s,n,r,o,a,c,h){const[u,f,p,g,m,v]=se(i);if(f===0&&p===0){const C=o*u+m,T=Math.round(C),L=a*g+v,M=Math.round(L),k=(o+c)*u+m,N=Math.abs(Math.round(k)-T)||1,W=(a+h)*g+v,tt=Math.abs(Math.round(W)-M)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(g),T,M),i.drawImage(t,e,s,n,r,0,0,N,tt),i.setTransform(u,f,p,g,m,v),[N,tt]}if(u===0&&g===0){const C=a*p+m,T=Math.round(C),L=o*f+v,M=Math.round(L),k=(a+h)*p+m,N=Math.abs(Math.round(k)-T)||1,W=(o+c)*f+v,tt=Math.abs(Math.round(W)-M)||1;return i.setTransform(0,Math.sign(f),Math.sign(p),0,T,M),i.drawImage(t,e,s,n,r,0,0,tt,N),i.setTransform(u,f,p,g,m,v),[tt,N]}i.drawImage(t,e,s,n,r,o,a,c,h);const E=Math.hypot(u,f),w=Math.hypot(p,g);return[E*c,w*h]}function M1(i){const{width:t,height:e}=i;if(t>Av||e>Av)return null;const s=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),a,c,h;const u=t+7&-8;let f=new Uint8Array(u*e),p=0;for(const w of i.data){let C=128;for(;C>0;)f[p++]=w&C?0:255,C>>=1}let g=0;for(p=0,f[p]!==0&&(o[0]=1,++g),c=1;c<t;c++)f[p]!==f[p+1]&&(o[c]=f[p]?2:1,++g),p++;for(f[p]!==0&&(o[c]=2,++g),a=1;a<e;a++){p=a*u,h=a*r,f[p-u]!==f[p]&&(o[h]=f[p]?1:8,++g);let w=(f[p]?4:0)+(f[p-u]?8:0);for(c=1;c<t;c++)w=(w>>2)+(f[p+1]?4:0)+(f[p-u+1]?8:0),n[w]&&(o[h+c]=n[w],++g),p++;if(f[p-u]!==f[p]&&(o[h+c]=f[p]?2:4,++g),g>s)return null}for(p=u*(e-1),h=a*r,f[p]!==0&&(o[h]=8,++g),c=1;c<t;c++)f[p]!==f[p+1]&&(o[h+c]=f[p]?4:8,++g),p++;if(f[p]!==0&&(o[h+c]=4,++g),g>s)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),v=new Path2D;for(a=0;g&&a<=e;a++){let w=a*r;const C=w+t;for(;w<C&&!o[w];)w++;if(w===C)continue;v.moveTo(w%r,a);const T=w;let L=o[w];do{const M=m[L];do w+=M;while(!o[w]);const k=o[w];k!==5&&k!==10?(L=k,o[w]=0):(L=k&51*L>>4,o[w]&=L>>2|L<<2),v.lineTo(w%r,w/r|0),o[w]||--g}while(T!==w);--a}return f=null,o=null,function(w){w.save(),w.scale(1/t,-1/e),w.translate(0,-e),w.fill(v),w.beginPath(),w.restore()}}class wv{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ey,this.textMatrixScale=1,this.fontMatrix=bp,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Le.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,s){[e,s]=ct.applyTransform([e,s],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=ct.applyTransform(e,t),n=ct.applyTransform(e.slice(2),t),r=ct.applyTransform([e[0],e[3]],t),o=ct.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],n[0],r[0],o[0]),this.minY=Math.min(this.minY,s[1],n[1],r[1],o[1]),this.maxX=Math.max(this.maxX,s[0],n[0],r[0],o[0]),this.maxY=Math.max(this.maxY,s[1],n[1],r[1],o[1])}updateScalingPathMinMax(t,e){ct.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,n,r,o,a,c,h,u){const f=ct.bezierBoundingBox(e,s,n,r,o,a,c,h,u);u||this.updateRectMinMax(t,f)}getPathBoundingBox(t=Ve.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ve.STROKE){e||Wt("Stroke bounding box must include transform.");const n=ct.singularValueDecompose2dScale(e),r=n[0]*this.lineWidth/2,o=n[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ve.FILL,e=null){return ct.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Ev(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,s=t.width,n=e%ts,r=(e-n)/ts,o=n===0?r:r+1,a=i.createImageData(s,ts);let c=0,h;const u=t.data,f=a.data;let p,g,m,v;if(t.kind===Hu.GRAYSCALE_1BPP){const E=u.byteLength,w=new Uint32Array(f.buffer,0,f.byteLength>>2),C=w.length,T=s+7>>3,L=4294967295,M=ss.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(m=p<r?ts:n,h=0,g=0;g<m;g++){const k=E-c;let N=0;const W=k>T?s:k*8-7,tt=W&-8;let nt=0,J=0;for(;N<tt;N+=8)J=u[c++],w[h++]=J&128?L:M,w[h++]=J&64?L:M,w[h++]=J&32?L:M,w[h++]=J&16?L:M,w[h++]=J&8?L:M,w[h++]=J&4?L:M,w[h++]=J&2?L:M,w[h++]=J&1?L:M;for(;N<W;N++)nt===0&&(J=u[c++],nt=128),w[h++]=J&nt?L:M,nt>>=1}for(;h<C;)w[h++]=0;i.putImageData(a,0,p*ts)}}else if(t.kind===Hu.RGBA_32BPP){for(g=0,v=s*ts*4,p=0;p<r;p++)f.set(u.subarray(c,c+v)),c+=v,i.putImageData(a,0,g),g+=ts;p<o&&(v=s*n*4,f.set(u.subarray(c,c+v)),i.putImageData(a,0,g))}else if(t.kind===Hu.RGB_24BPP)for(m=ts,v=s*m,p=0;p<o;p++){for(p>=r&&(m=n,v=s*m),h=0,g=v;g--;)f[h++]=u[c++],f[h++]=u[c++],f[h++]=u[c++],f[h++]=255;i.putImageData(a,0,p*ts)}else throw new Error(`bad image kind: ${t.kind}`)}function Sv(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,n=e%ts,r=(e-n)/ts,o=n===0?r:r+1,a=i.createImageData(s,ts);let c=0;const h=t.data,u=a.data;for(let f=0;f<o;f++){const p=f<r?ts:n;({srcPos:c}=P1({src:h,srcPos:c,dest:u,width:s,height:p,nonBlackColor:0})),i.putImageData(a,0,f*ts)}}function Fl(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)i[s]!==void 0&&(t[s]=i[s]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Tu(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!$e){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function Cv(i,t){if(t)return!0;const e=ct.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*hr.PDF_TO_CSS_UNITS);return e[0]<=s&&e[1]<=s}const I1=["butt","round","square"],O1=["miter","round","bevel"],D1={},xv={};var dr,qp,Xp;const Am=class Am{constructor(t,e,s,n,r,{optionalContentConfig:o,markedContentStack:a=null},c,h){A(this,dr);this.ctx=t,this.current=new wv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new k1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...se(this.compositeCtx))}this.ctx.save(),Tu(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=se(this.ctx)}executeOperatorList(t,e,s,n){const r=t.argsArray,o=t.fnArray;let a=e||0;const c=r.length;if(c===a)return a;const h=c-a>yv&&typeof s=="function",u=h?Date.now()+R1:0;let f=0;const p=this.commonObjs,g=this.objs;let m;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,s),a;if(m=o[a],m!==Vs.dependency)this[m].apply(this,r[a]);else for(const v of r[a]){const E=v.startsWith("g_")?p:g;if(!E.has(v))return E.get(v,s),a}if(a++,a===c)return a;if(h&&++f>yv){if(Date.now()>u)return s(),a;f=0}}}endDrawing(){y(this,dr,qp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),y(this,dr,Xp).call(this)}_scaleImage(t,e){const s=t.width,n=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,c=n,h="prescale1",u,f;for(;r>2&&a>1||o>2&&c>1;){let p=a,g=c;r>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/p),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),u=this.cachedCanvases.getCanvas(h,p,g),f=u.context,f.clearRect(0,0,p,g),f.drawImage(t,0,0,a,c,0,0,p,g),t=u.canvas,a=p,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:n}=t,r=this.current.fillColor,o=this.current.patternFill,a=se(e);let c,h,u,f;if((t.bitmap||t.data)&&t.count>1){const W=t.bitmap||t.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(W),c||(c=new Map,this._cachedBitmapsMap.set(W,c));const tt=c.get(h);if(tt&&!o){const nt=Math.round(Math.min(a[0],a[2])+a[4]),J=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:tt,offsetX:nt,offsetY:J}}u=tt}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,n),Sv(f.context,t));let p=ct.transform(a,[1/s,0,0,-1/n,0,0]);p=ct.transform(p,[1,0,0,1,0,-n]);const[g,m,v,E]=ct.getAxialAlignedBoundingBox([0,0,s,n],p),w=Math.round(v-g)||1,C=Math.round(E-m)||1,T=this.cachedCanvases.getCanvas("fillCanvas",w,C),L=T.context,M=g,k=m;L.translate(-M,-k),L.transform(...p),u||(u=this._scaleImage(f.canvas,zi(L)),u=u.img,c&&o&&c.set(h,u)),L.imageSmoothingEnabled=Cv(se(L),t.interpolate),xu(L,u,0,0,u.width,u.height,0,0,s,n),L.globalCompositeOperation="source-in";const N=ct.transform(zi(L),[1,0,0,1,-M,-k]);return L.fillStyle=o?r.getPattern(e,this,N,Ve.FILL):r,L.fillRect(0,0,s,n),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,T.canvas)),{canvas:T.canvas,offsetX:Math.round(M),offsetY:Math.round(k)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=I1[t]}setLineJoin(t){this.ctx.lineJoin=O1[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const r=this.ctx;r.setTransform(...se(this.suspendedCtx)),Fl(this.suspendedCtx,r),L1(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,n){const r=n[0],o=n[1],a=n[2]-r,c=n[3]-o;a===0||c===0||(this.genericComposeSMask(e.context,s,a,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,n,r,o,a,c,h,u,f){let p=t.canvas,g=c-u,m=h-f;if(o){if(g<0||m<0||g+s>p.width||m+n>p.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,n),w=E.context;w.drawImage(p,-g,-m),o.some(C=>C!==0)&&(w.globalCompositeOperation="destination-atop",w.fillStyle=ct.makeHexColor(...o),w.fillRect(0,0,s,n),w.globalCompositeOperation="source-over"),p=E.canvas,g=m=0}else if(o.some(E=>E!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(g,m,s,n),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=ct.makeHexColor(...o),t.fillRect(g,m,s,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(c,h,s,n),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(p,g,m,s,n,c,h,s,n),e.restore()}save(){this.inSMaskMode?(Fl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Fl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,s,n,r,o){this.ctx.transform(t,e,s,n,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const n=this.ctx,r=this.current;let o=r.x,a=r.y,c,h;const u=se(n),f=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,p=f?s.slice(0):null;for(let g=0,m=0,v=t.length;g<v;g++)switch(t[g]|0){case Vs.rectangle:o=e[m++],a=e[m++];const E=e[m++],w=e[m++],C=o+E,T=a+w;n.moveTo(o,a),E===0||w===0?n.lineTo(C,T):(n.lineTo(C,a),n.lineTo(C,T),n.lineTo(o,T)),f||r.updateRectMinMax(u,[o,a,C,T]),n.closePath();break;case Vs.moveTo:o=e[m++],a=e[m++],n.moveTo(o,a),f||r.updatePathMinMax(u,o,a);break;case Vs.lineTo:o=e[m++],a=e[m++],n.lineTo(o,a),f||r.updatePathMinMax(u,o,a);break;case Vs.curveTo:c=o,h=a,o=e[m+4],a=e[m+5],n.bezierCurveTo(e[m],e[m+1],e[m+2],e[m+3],o,a),r.updateCurvePathMinMax(u,c,h,e[m],e[m+1],e[m+2],e[m+3],o,a,p),m+=6;break;case Vs.curveTo2:c=o,h=a,n.bezierCurveTo(o,a,e[m],e[m+1],e[m+2],e[m+3]),r.updateCurvePathMinMax(u,c,h,o,a,e[m],e[m+1],e[m+2],e[m+3],p),o=e[m+2],a=e[m+3],m+=4;break;case Vs.curveTo3:c=o,h=a,o=e[m+2],a=e[m+3],n.bezierCurveTo(e[m],e[m+1],o,a,o,a),r.updateCurvePathMinMax(u,c,h,e[m],e[m+1],o,a,o,a,p),m+=4;break;case Vs.closePath:n.closePath();break}f&&r.updateScalingPathMinMax(u,p),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(e.save(),e.strokeStyle=s.getPattern(e,this,zi(e),Ve.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;let r=!1;n&&(e.save(),e.fillStyle=s.getPattern(e,this,zi(e),Ve.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=D1}eoClip(){this.pendingClip=xv}beginText(){this.current.textMatrix=Ey,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const s of t)e.setTransform(...s.transform),e.translate(s.x,s.y),s.addToPath(e,s.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||bp,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&St("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const c=s.italic?"italic":"normal";let h=e;e<vv?h=vv:e>_v&&(h=_v),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${a} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,n,r,o){this.current.textMatrix=[t,e,s,n,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n){const r=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,u=c&Le.FILL_STROKE_MASK,f=!!(c&Le.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let g;(a.disableFontFace||f||p)&&(g=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||p?(r.save(),r.translate(e,s),r.beginPath(),g(r,h),n&&r.setTransform(...n),(u===Le.FILL||u===Le.FILL_STROKE)&&r.fill(),(u===Le.STROKE||u===Le.FILL_STROKE)&&r.stroke(),r.restore()):((u===Le.FILL||u===Le.FILL_STROKE)&&r.fillText(t,e,s),(u===Le.STROKE||u===Le.FILL_STROKE)&&r.strokeText(t,e,s)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:se(r),x:e,y:s,fontSize:h,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return Mt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,f=t.length,p=s.vertical,g=p?1:-1,m=s.defaultVMetrics,v=n*e.fontMatrix[0],E=e.textRenderingMode===Le.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let w;if(e.patternFill){r.save();const k=e.fillColor.getPattern(r,this,zi(r),Ve.FILL);w=se(r),r.restore(),r.fillStyle=k}let C=e.lineWidth;const T=e.textMatrixScale;if(T===0||C===0){const k=e.textRenderingMode&Le.FILL_STROKE_MASK;(k===Le.STROKE||k===Le.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=T;if(o!==1&&(r.scale(o,o),C/=o),r.lineWidth=C,s.isInvalidPDFjsFont){const k=[];let N=0;for(const W of t)k.push(W.unicode),N+=W.width;r.fillText(k.join(""),0,0),e.x+=N*v*u,r.restore(),this.compose();return}let L=0,M;for(M=0;M<f;++M){const k=t[M];if(typeof k=="number"){L+=g*k*n/1e3;continue}let N=!1;const W=(k.isSpace?c:0)+a,tt=k.fontChar,nt=k.accent;let J,pt,ht=k.width;if(p){const At=k.vmetric||m,dt=-(k.vmetric?At[1]:ht*.5)*v,V=At[2]*v;ht=At?-At[0]:ht,J=dt/o,pt=(L+V)/o}else J=L/o,pt=0;if(s.remeasure&&ht>0){const At=r.measureText(tt).width*1e3/n*o;if(ht<At&&this.isFontSubpixelAAEnabled){const dt=ht/At;N=!0,r.save(),r.scale(dt,1),J/=dt}else ht!==At&&(J+=(ht-At)/2e3*n/o)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(E&&!nt)r.fillText(tt,J,pt);else if(this.paintChar(tt,J,pt,w),nt){const At=J+n*nt.offset.x/o,dt=pt-n*nt.offset.y/o;this.paintChar(nt.fontChar,At,dt,w)}}const wt=p?ht*v-W*h:ht*v+W*h;L+=wt,N&&r.restore()}p?e.y-=L:e.x+=L*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,r=s.fontSize,o=s.fontDirection,a=n.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*o,f=s.fontMatrix||bp,p=t.length,g=s.textRenderingMode===Le.INVISIBLE;let m,v,E,w;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...s.textMatrix),e.translate(s.x,s.y),e.scale(u,o),m=0;m<p;++m){if(v=t[m],typeof v=="number"){w=a*v*r/1e3,this.ctx.translate(w,0),s.x+=w*u;continue}const C=(v.isSpace?h:0)+c,T=n.charProcOperatorList[v.operatorListId];if(!T){St(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(T),this.restore()),E=ct.applyTransform([v.width,0],f)[0]*r+C,e.translate(E,0),s.x+=E*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,r,o){this.ctx.rect(s,n,r-s,o-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=t[1],n=this.baseTransform||se(this.ctx),r={createCanvasGraphics:o=>new Am(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Gp(t,s,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=ct.makeHexColor(t,e,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=ct.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=T1(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,zi(e),Ve.SHADING);const n=zi(e);if(n){const{width:r,height:o}=e.canvas,[a,c,h,u]=ct.getAxialAlignedBoundingBox([0,0,r,o],n);this.ctx.fillRect(a,c,h-a,u-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Wt("Should not call beginInlineImage")}beginImageData(){Wt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=se(this.ctx),e)){const s=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],s,n),this.current.updateRectMinMax(se(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||hf("TODO: Support non-isolated groups."),t.knockout&&St("Knockout groups not supported.");const s=se(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=ct.getAxialAlignedBoundingBox(t.bbox,se(e));const r=[0,0,e.canvas.width,e.canvas.height];n=ct.intersect(n,r)||[0,0,0,0];const o=Math.floor(n[0]),a=Math.floor(n[1]),c=Math.max(Math.ceil(n[2])-o,1),h=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,c,h),p=f.context;p.translate(-o,-a),p.transform(...s),t.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Fl(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=se(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=ct.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,n,r){if(y(this,dr,qp).call(this),Tu(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;const[c,h]=ct.singularValueDecompose2dScale(se(this.ctx)),{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-h,0,a*h),Tu(this.ctx)}else Tu(this.ctx),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.endPath()}this.current=new wv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),y(this,dr,Xp).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=M1(t)),n.compiled)){n.compiled(s);return}const r=this._createMaskCanvas(t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,n=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const c=se(a);a.transform(e,s,n,r,0,0);const h=this._createMaskCanvas(t);a.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,f=o.length;u<f;u+=2){const p=ct.transform(c,[e,s,n,r,o[u],o[u+1]]),[g,m]=ct.applyTransform([0,0],p);a.drawImage(h.canvas,g,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:o,width:a,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,c),f=u.context;f.save();const p=this.getObject(o,r);Sv(f,p),f.globalCompositeOperation="source-in",f.fillStyle=n?s.getPattern(f,this,zi(e),Ve.FILL):s,f.fillRect(0,0,a,c),f.restore(),e.save(),e.transform(...h),e.scale(1,-1),xu(e,u.canvas,0,0,a,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){St("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let h=0,u=n.length;h<u;h+=2)c.push({transform:[e,0,0,s,n[h],n[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,n),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;if(this.save(),!$e){const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none")}n.scale(1/e,-1/s);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Ev(c,t),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,zi(n));n.imageSmoothingEnabled=Cv(se(n),t.interpolate),xu(n,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Ev(c,t),n=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),xu(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===xv?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=se(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:n,d:r}=this.ctx.getTransform();let o,a;if(s===0&&n===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=a=1/c;else{const u=c*t;o=a=u<1?1/u:1}else if(t===0)o=1/c,a=1/h;else{const u=c*t,f=h*t;o=u<1?1/u:1,a=f<1?1/f:1}}else{const c=Math.abs(e*r-s*n),h=Math.hypot(e,s),u=Math.hypot(n,r);if(t===0)o=u/c,a=h/c;else{const f=t*c;o=u>f?u/f:1,a=h>f?h/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[n,r]=this.getScaleForStroking();if(e.lineWidth=s||1,n===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(n,r),o.length>0){const a=Math.max(n,r);e.setLineDash(o.map(c=>c/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};dr=new WeakSet,qp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Xp=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let Aa=Am;for(const i in Vs)Aa.prototype[i]!==void 0&&(Aa.prototype[Vs[i]]=Aa.prototype[i]);var Yc,Qc;class An{static get workerPort(){return l(this,Yc)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");_(this,Yc,t)}static get workerSrc(){return l(this,Qc)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");_(this,Qc,t)}}Yc=new WeakMap,Qc=new WeakMap,A(An,Yc,null),A(An,Qc,"");const Pu={UNKNOWN:0,DATA:1,ERROR:2},ce={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hs(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Wt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Yo(i.message);case"MissingPDFException":return new Ko(i.message);case"PasswordException":return new _p(i.message,i.code);case"UnexpectedResponseException":return new uf(i.message,i.status);case"UnknownErrorException":return new yp(i.message,i.details);default:return new yp(i.message,i.toString())}}var Mi,rA,oA,Wu;class Vl{constructor(t,e,s){A(this,Mi);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=n=>{const r=n.data;if(r.targetName!==this.sourceName)return;if(r.stream){y(this,Mi,oA).call(this,r);return}if(r.callback){const a=r.callbackId,c=this.callbackCapabilities[a];if(!c)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],r.callback===Pu.DATA)c.resolve(r.data);else if(r.callback===Pu.ERROR)c.reject(hs(r.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[r.action];if(!o)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const a=this.sourceName,c=r.sourceName;new Promise(function(h){h(o(r.data))}).then(function(h){s.postMessage({sourceName:a,targetName:c,callback:Pu.DATA,callbackId:r.callbackId,data:h})},function(h){s.postMessage({sourceName:a,targetName:c,callback:Pu.ERROR,callbackId:r.callbackId,reason:hs(h)})});return}if(r.streamId){y(this,Mi,rA).call(this,r);return}o(r.data)},s.addEventListener("message",this._onComObjOnMessage)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,n){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:a,stream:ce.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{me(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:ce.CANCEL,streamId:r,reason:hs(h)}),u.promise}},s)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Mi=new WeakSet,rA=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],c={enqueue(h,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:ce.ENQUEUE,streamId:e,chunk:h},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:ce.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){me(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:ce.ERROR,streamId:e,reason:hs(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,new Promise(function(h){h(a(t.data,c))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:ce.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:ce.START_COMPLETE,streamId:e,reason:hs(h)})})},oA=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case ce.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(hs(t.reason));break;case ce.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(hs(t.reason));break;case ce.PULL:if(!a){r.postMessage({sourceName:s,targetName:n,stream:ce.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise(function(c){var h;c((h=a.onPull)==null?void 0:h.call(a))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:ce.PULL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:n,stream:ce.PULL_COMPLETE,streamId:e,reason:hs(c)})});break;case ce.ENQUEUE:if(me(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ce.CLOSE:if(me(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),y(this,Mi,Wu).call(this,o,e);break;case ce.ERROR:me(o,"error should have stream controller"),o.controller.error(hs(t.reason)),y(this,Mi,Wu).call(this,o,e);break;case ce.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(hs(t.reason)),y(this,Mi,Wu).call(this,o,e);break;case ce.CANCEL:if(!a)break;new Promise(function(c){var h;c((h=a.onCancel)==null?void 0:h.call(a,hs(t.reason)))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:ce.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:n,stream:ce.CANCEL_COMPLETE,streamId:e,reason:hs(c)})}),a.sinkCapability.reject(hs(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Wu=async function(t,e){var s,n,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(n=t.pullCall)==null?void 0:n.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var so,Jc;class F1{constructor({parsedData:t,rawData:e}){A(this,so);A(this,Jc);_(this,so,t),_(this,Jc,e)}getRaw(){return l(this,Jc)}get(t){return l(this,so).get(t)??null}getAll(){return cm(l(this,so))}has(t){return l(this,so).has(t)}}so=new WeakMap,Jc=new WeakMap;const In=Symbol("INTERNAL");var Zc,th,eh,Fa;class N1{constructor(t,{name:e,intent:s,usage:n}){A(this,Zc,!1);A(this,th,!1);A(this,eh,!1);A(this,Fa,!0);_(this,Zc,!!(t&ys.DISPLAY)),_(this,th,!!(t&ys.PRINT)),this.name=e,this.intent=s,this.usage=n}get visible(){if(l(this,eh))return l(this,Fa);if(!l(this,Fa))return!1;const{print:t,view:e}=this.usage;return l(this,Zc)?(e==null?void 0:e.viewState)!=="OFF":l(this,th)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==In&&Wt("Internal method `_setVisible` called."),_(this,eh,s),_(this,Fa,e)}}Zc=new WeakMap,th=new WeakMap,eh=new WeakMap,Fa=new WeakMap;var Vn,Ut,Na,Ha,sh,Kp;class H1{constructor(t,e=ys.DISPLAY){A(this,sh);A(this,Vn,null);A(this,Ut,new Map);A(this,Na,null);A(this,Ha,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,_(this,Ha,t.order);for(const s of t.groups)l(this,Ut).set(s.id,new N1(e,s));if(t.baseState==="OFF")for(const s of l(this,Ut).values())s._setVisible(In,!1);for(const s of t.on)l(this,Ut).get(s)._setVisible(In,!0);for(const s of t.off)l(this,Ut).get(s)._setVisible(In,!1);_(this,Na,this.getHash())}}isVisible(t){if(l(this,Ut).size===0)return!0;if(!t)return hf("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,Ut).has(t.id)?l(this,Ut).get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return y(this,sh,Kp).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,Ut).has(e))return St(`Optional content group not found: ${e}`),!0;if(l(this,Ut).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,Ut).has(e))return St(`Optional content group not found: ${e}`),!0;if(!l(this,Ut).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,Ut).has(e))return St(`Optional content group not found: ${e}`),!0;if(!l(this,Ut).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,Ut).has(e))return St(`Optional content group not found: ${e}`),!0;if(l(this,Ut).get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const s=l(this,Ut).get(t);if(!s){St(`Optional content group not found: ${t}`);return}s._setVisible(In,!!e,!0),_(this,Vn,null)}setOCGState({state:t,preserveRB:e}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=l(this,Ut).get(n);if(r)switch(s){case"ON":r._setVisible(In,!0);break;case"OFF":r._setVisible(In,!1);break;case"Toggle":r._setVisible(In,!r.visible);break}}_(this,Vn,null)}get hasInitialVisibility(){return l(this,Na)===null||this.getHash()===l(this,Na)}getOrder(){return l(this,Ut).size?l(this,Ha)?l(this,Ha).slice():[...l(this,Ut).keys()]:null}getGroups(){return l(this,Ut).size>0?cm(l(this,Ut)):null}getGroup(t){return l(this,Ut).get(t)||null}getHash(){if(l(this,Vn)!==null)return l(this,Vn);const t=new eA;for(const[e,s]of l(this,Ut))t.update(`${e}:${s.visible}`);return _(this,Vn,t.hexdigest())}}Vn=new WeakMap,Ut=new WeakMap,Na=new WeakMap,Ha=new WeakMap,sh=new WeakSet,Kp=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const r=t[n];let o;if(Array.isArray(r))o=y(this,sh,Kp).call(this,r);else if(l(this,Ut).has(r))o=l(this,Ut).get(r).visible;else return St(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class $1{constructor(t,{disableRange:e=!1,disableStream:s=!1}){me(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});me(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,n,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){me(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new B1(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new j1(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class B1{constructor(t,e,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=fm(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class j1{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function z1(i){let t=!0,e=s("filename\\*","i").exec(i);if(e){e=e[1];let u=a(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=s("filename","i").exec(i),e){e=e[1];let u=a(e);return u=h(u),r(u)}function s(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function n(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),g=df(f);f=p.decode(g),t=!1}catch{}}return f}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function o(u){const f=[];let p;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,v,E,w]=p;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[E,w]}const m=[];for(let v=0;v<f.length&&v in f;++v){let[E,w]=f[v];w=a(w),E&&(w=unescape(w),v===0&&(w=c(w))),m.push(w)}return m.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const g=f[p].indexOf('"');g!==-1&&(f[p]=f[p].slice(0,g),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function c(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),m=u.slice(f+1).replace(/^[^']*'/,"");return n(p,m)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,E){return String.fromCharCode(parseInt(E,16))}),n(p,m);try{m=atob(m)}catch{}return n(p,m)})}return""}function mm({getResponseHeader:i,isHttp:t,rangeChunkSize:e,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||s||!t||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function bm(i){const t=i("Content-Disposition");if(t){let e=z1(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(fm(e))return e}return null}function vf(i,t){return i===404||i===0&&t.startsWith("file:")?new Ko('Missing PDF "'+t+'".'):new uf(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function aA(i){return i===200||i===206}function lA(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function cA(i){const t=new Headers;for(const e in i){const s=i[e];s!==void 0&&t.append(e,s)}return t}function hA(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(St(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Tv{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return me(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new U1(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new W1(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class U1{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=cA(this._stream.httpHeaders);const s=e.url;fetch(s,lA(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!aA(n.status))throw vf(n.status,s);this._reader=n.body.getReader(),this._headersCapability.resolve();const r=c=>n.headers.get(c),{allowRangeRequests:o,suggestedLength:a}=mm({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=bm(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Yo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:hA(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class W1{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController,this._headers=cA(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${s-1}`);const r=n.url;fetch(r,lA(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!aA(o.status))throw vf(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:hA(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Yf=200,Qf=206;function V1(i){const t=i.response;return typeof t!="string"?t:df(t).buffer}class G1{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,s){const n={begin:t,end:e};for(const r in s)n[r]=s[r];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const o=this.httpHeaders[r];o!==void 0&&e.setRequestHeader(r,o)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Qf):n.expectedStatus=Yf,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,e))}onStateChange(t,e){var c,h,u;const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){(c=s.onError)==null||c.call(s,n.status);return}const r=n.status||Yf;if(!(r===Yf&&s.expectedStatus===Qf)&&r!==s.expectedStatus){(h=s.onError)==null||h.call(s,n.status);return}const a=V1(n);if(r===Qf){const f=n.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);s.onDone({begin:parseInt(p[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):(u=s.onError)==null||u.call(s,n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class q1{constructor(t){this._source=t,this._manager=new G1(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return me(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new X1(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new K1(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class X1{constructor(t,e){this._manager=t;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(s),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),s=o=>e.getResponseHeader(o),{allowRangeRequests:n,suggestedLength:r}=mm({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=bm(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=vf(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class K1{constructor(t,e,s){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,s,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=vf(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const uA=/^file:\/\/\/[a-zA-Z]:\//;function Y1(i){const t=Di.get("url"),e=t.parse(i);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(i)?t.parse(`file:///${i}`):(e.host||(e.protocol="file:"),e)}class Q1{constructor(t){this.source=t,this.url=Y1(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return me(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new tP(this):new J1(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=this.isFsUrl?new eP(this,t,e):new Z1(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class dA{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Yo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fA{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _d(i,t){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:t}}class J1 extends dA{constructor(t){super(t);const e=s=>{if(s.statusCode===404){const a=new Ko(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(s);const n=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:r,suggestedLength:o}=mm({getResponseHeader:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=bm(n)};if(this._request=null,this._url.protocol==="http:"){const s=Di.get("http");this._request=s.request(_d(this._url,t.httpHeaders),e)}else{const s=Di.get("https");this._request=s.request(_d(this._url,t.httpHeaders),e)}this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class Z1 extends fA{constructor(t,e,s){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const o=t.httpHeaders[r];o!==void 0&&(this._httpHeaders[r]=o)}this._httpHeaders.Range=`bytes=${e}-${s-1}`;const n=r=>{if(r.statusCode===404){const o=new Ko(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=Di.get("http");this._request=r.request(_d(this._url,this._httpHeaders),n)}else{const r=Di.get("https");this._request=r.request(_d(this._url,this._httpHeaders),n)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class tP extends dA{constructor(t){super(t);let e=decodeURIComponent(this._url.path);uA.test(this._url.href)&&(e=e.replace(/^\//,""));const s=Di.get("fs");s.promises.lstat(e).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(e)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Ko(`Missing PDF "${e}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class eP extends fA{constructor(t,e,s){super(t);let n=decodeURIComponent(this._url.path);uA.test(this._url.href)&&(n=n.replace(/^\//,""));const r=Di.get("fs");this._setReadableStream(r.createReadStream(n,{start:e,end:s-1}))}}const sP=1e5,Qe=30,iP=.8;var Mv,Gn,Ze,ih,nh,io,nn,rh,oh,no,$a,Ba,qn,ja,ah,za,ro,lh,ch,oo,ao,Xn,Ua,xn,pA,gA,Yp,Ii,Vu,mA,bA;const Me=class Me{constructor({textContentSource:t,container:e,viewport:s}){A(this,xn);A(this,Gn,Promise.withResolvers());A(this,Ze,null);A(this,ih,!1);A(this,nh,!!((Mv=globalThis.FontInspector)!=null&&Mv.enabled));A(this,io,null);A(this,nn,null);A(this,rh,0);A(this,oh,0);A(this,no,null);A(this,$a,null);A(this,Ba,0);A(this,qn,0);A(this,ja,Object.create(null));A(this,ah,[]);A(this,za,null);A(this,ro,[]);A(this,lh,new WeakMap);A(this,ch,null);var c;if(t instanceof ReadableStream)_(this,za,t);else if(typeof t=="object")_(this,za,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,Ze,_(this,$a,e)),_(this,qn,s.scale*(globalThis.devicePixelRatio||1)),_(this,Ba,s.rotation),_(this,nn,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:o,pageY:a}=s.rawDims;_(this,ch,[1,0,0,-1,-o,a+r]),_(this,oh,n),_(this,rh,r),y(c=Me,Ii,mA).call(c),Uo(e,s),l(this,Gn).promise.catch(()=>{}).then(()=>{l(Me,Ua).delete(this),_(this,nn,null),_(this,ja,null)})}render(){const t=()=>{l(this,no).read().then(({value:e,done:s})=>{if(s){l(this,Gn).resolve();return}l(this,io)??_(this,io,e.lang),Object.assign(l(this,ja),e.styles),y(this,xn,pA).call(this,e.items),t()},l(this,Gn).reject)};return _(this,no,l(this,za).getReader()),l(Me,Ua).add(this),t(),l(this,Gn).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==l(this,Ba)&&(e==null||e(),_(this,Ba,n),Uo(l(this,$a),{rotation:n})),s!==l(this,qn)){e==null||e(),_(this,qn,s);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:y(r=Me,Ii,Vu).call(r,l(this,io))};for(const a of l(this,ro))o.properties=l(this,lh).get(a),o.div=a,y(this,xn,Yp).call(this,o)}}cancel(){var e;const t=new Yo("TextLayer task cancelled.");(e=l(this,no))==null||e.cancel(t).catch(()=>{}),_(this,no,null),l(this,Gn).reject(t)}get textDivs(){return l(this,ro)}get textContentItemsStr(){return l(this,ah)}static cleanup(){if(!(l(this,Ua).size>0)){l(this,oo).clear();for(const{canvas:t}of l(this,ao).values())t.remove();l(this,ao).clear()}}};Gn=new WeakMap,Ze=new WeakMap,ih=new WeakMap,nh=new WeakMap,io=new WeakMap,nn=new WeakMap,rh=new WeakMap,oh=new WeakMap,no=new WeakMap,$a=new WeakMap,Ba=new WeakMap,qn=new WeakMap,ja=new WeakMap,ah=new WeakMap,za=new WeakMap,ro=new WeakMap,lh=new WeakMap,ch=new WeakMap,oo=new WeakMap,ao=new WeakMap,Xn=new WeakMap,Ua=new WeakMap,xn=new WeakSet,pA=function(t){var n,r;if(l(this,ih))return;(r=l(this,nn)).ctx??(r.ctx=y(n=Me,Ii,Vu).call(n,l(this,io)));const e=l(this,ro),s=l(this,ah);for(const o of t){if(e.length>sP){St("Ignoring additional textDivs for performance reasons."),_(this,ih,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Ze);_(this,Ze,document.createElement("span")),l(this,Ze).classList.add("markedContent"),o.id!==null&&l(this,Ze).setAttribute("id",`${o.id}`),a.append(l(this,Ze))}else o.type==="endMarkedContent"&&_(this,Ze,l(this,Ze).parentNode);continue}s.push(o.str),y(this,xn,gA).call(this,o)}},gA=function(t){var v;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,ro).push(e);const n=ct.transform(l(this,ch),t.transform);let r=Math.atan2(n[1],n[0]);const o=l(this,ja)[t.fontName];o.vertical&&(r+=Math.PI/2);const a=l(this,nh)&&o.fontSubstitution||o.fontFamily,c=Math.hypot(n[2],n[3]),h=c*y(v=Me,Ii,bA).call(v,a,l(this,io));let u,f;r===0?(u=n[4],f=n[5]-h):(u=n[4]+h*Math.sin(r),f=n[5]-h*Math.cos(r));const p="calc(var(--scale-factor)*",g=e.style;l(this,Ze)===l(this,$a)?(g.left=`${(100*u/l(this,oh)).toFixed(2)}%`,g.top=`${(100*f/l(this,rh)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${f.toFixed(2)}px)`),g.fontSize=`${p}${(l(Me,Xn)*c).toFixed(2)}px)`,g.fontFamily=a,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,nh)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);E!==w&&Math.max(E,w)/Math.min(E,w)>1.5&&(m=!0)}if(m&&(s.canvasWidth=o.vertical?t.height:t.width),l(this,lh).set(e,s),l(this,nn).div=e,l(this,nn).properties=s,y(this,xn,Yp).call(this,l(this,nn)),s.hasText&&l(this,Ze).append(e),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,Ze).append(E)}},Yp=function(t){const{div:e,properties:s,ctx:n,prevFontSize:r,prevFontFamily:o}=t,{style:a}=e;let c="";if(l(Me,Xn)>1&&(c=`scale(${1/l(Me,Xn)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=a,{canvasWidth:u,fontSize:f}=s;(r!==f||o!==h)&&(n.font=`${f*l(this,qn)}px ${h}`,t.prevFontSize=f,t.prevFontFamily=h);const{width:p}=n.measureText(e.textContent);p>0&&(c=`scaleX(${u*l(this,qn)/p}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(a.transform=c)},Ii=new WeakSet,Vu=function(t=null){let e=l(this,ao).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,ao).set(t,e)}return e},mA=function(){if(l(this,Xn)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),_(this,Xn,t.getBoundingClientRect().height),t.remove()},bA=function(t,e){const s=l(this,oo).get(t);if(s)return s;const n=y(this,Ii,Vu).call(this,e),r=n.font;n.canvas.width=n.canvas.height=Qe,n.font=`${Qe}px ${t}`;const o=n.measureText("");let a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(a){const f=a/(a+c);return l(this,oo).set(t,f),n.canvas.width=n.canvas.height=0,n.font=r,f}n.strokeStyle="red",n.clearRect(0,0,Qe,Qe),n.strokeText("g",0,0);let h=n.getImageData(0,0,Qe,Qe).data;c=0;for(let f=h.length-1-3;f>=0;f-=4)if(h[f]>0){c=Math.ceil(f/4/Qe);break}n.clearRect(0,0,Qe,Qe),n.strokeText("A",0,Qe),h=n.getImageData(0,0,Qe,Qe).data,a=0;for(let f=0,p=h.length;f<p;f+=4)if(h[f]>0){a=Qe-Math.floor(f/4/Qe);break}n.canvas.width=n.canvas.height=0,n.font=r;const u=a?a/(a+c):iP;return l(this,oo).set(t,u),u},A(Me,Ii),A(Me,oo,new Map),A(Me,ao,new Map),A(Me,Xn,null),A(Me,Ua,new Set);let vc=Me;class _c{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function n(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(_c.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)n(h)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const nP=65536,rP=100,oP=5e3,aP=$e?y1:a1,lP=$e?A1:Py,cP=$e?_1:o1,hP=$e?w1:Ry;function uP(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new Qp,{docId:e}=t,s=i.url?dP(i.url):null,n=i.data?fP(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,c=i.range instanceof vA?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:nP;let u=i.worker instanceof wa?i.worker:null;const f=i.verbosity,p=typeof i.docBaseUrl=="string"&&!bf(i.docBaseUrl)?i.docBaseUrl:null,g=typeof i.cMapUrl=="string"?i.cMapUrl:null,m=i.cMapPacked!==!1,v=i.CMapReaderFactory||lP,E=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,w=i.StandardFontDataFactory||hP,C=i.stopAtErrors!==!0,T=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,L=i.isEvalSupported!==!1,M=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!$e,k=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,N=typeof i.disableFontFace=="boolean"?i.disableFontFace:$e,W=i.fontExtraProperties===!0,tt=i.enableXfa===!0,nt=i.ownerDocument||globalThis.document,J=i.disableRange===!0,pt=i.disableStream===!0,ht=i.disableAutoFetch===!0,wt=i.pdfBug===!0,At=i.enableHWA===!0,dt=c?c.length:i.length??NaN,V=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!$e&&!N,Y=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:v===Py&&w===Ry&&g&&E&&zl(g,document.baseURI)&&zl(E,document.baseURI),Kt=i.canvasFactory||new aP({ownerDocument:nt,enableHWA:At}),ie=i.filterFactory||new cP({docId:e,ownerDocument:nt}),oe=null;KT(f);const Et={canvasFactory:Kt,filterFactory:ie};if(Y||(Et.cMapReaderFactory=new v({baseUrl:g,isCompressed:m}),Et.standardFontDataFactory=new w({baseUrl:E})),!u){const Yt={verbosity:f,port:An.workerPort};u=Yt.port?wa.fromPort(Yt):new wa(Yt),t._worker=u}const D={docId:e,apiVersion:"4.5.136",data:n,password:a,disableAutoFetch:ht,rangeChunkSize:h,length:dt,docBaseUrl:p,enableXfa:tt,evaluatorOptions:{maxImageSize:T,disableFontFace:N,ignoreErrors:C,isEvalSupported:L,isOffscreenCanvasSupported:M,canvasMaxAreaInBytes:k,fontExtraProperties:W,useSystemFonts:V,cMapUrl:Y?g:null,standardFontDataUrl:Y?E:null}},ne={disableFontFace:N,fontExtraProperties:W,ownerDocument:nt,pdfBug:wt,styleElement:oe,loadingParams:{disableAutoFetch:ht,enableXfa:tt}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Yt=u.messageHandler.sendWithPromise("GetDocRequest",D,n?[n.buffer]:null);let Ft;if(c)Ft=new $1(c,{disableRange:J,disableStream:pt});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");Ft=(U=>$e?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&zl(U.url)?new Tv(U):new Q1(U):zl(U.url)?new Tv(U):new q1(U))({url:s,length:dt,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:J,disableStream:pt})}return Yt.then(O=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const U=new Vl(e,O,u.port),z=new bP(U,t,Ft,ne,Et);t._transport=z,U.send("Ready",null)})}).catch(t._capability.reject),t}function dP(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if($e&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function fP(i){if($e&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return df(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Pv(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Od;const Dd=class Dd{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${cs(Dd,Od)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(n){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Od=new WeakMap,A(Dd,Od,0);let Qp=Dd;class vA{constructor(t,e,s=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Wt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class pP{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Kn,rn,Fs,ua,Gu;class gP{constructor(t,e,s,n=!1){A(this,Fs);A(this,Kn,null);A(this,rn,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=n?new pv:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new _A,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new iu({viewBox:this.view,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=$n.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:f=!1}){var L,M;(L=this._stats)==null||L.time("Overall");const p=this._transport.getRenderingIntent(s,n,u,f),{renderingIntent:g,cacheKey:m}=p;_(this,rn,!1),y(this,Fs,Gu).call(this),a||(a=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const E=!!(g&ys.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(p));const w=k=>{var N;v.renderTasks.delete(C),(this._maybeCleanupAfterRender||E)&&_(this,rn,!0),y(this,Fs,ua).call(this,!E),k?(C.capability.reject(k),this._abortOperatorList({intentState:v,reason:k instanceof Error?k:new Error(k)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new Zp({callback:w,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h});(v.renderTasks||(v.renderTasks=new Set)).add(C);const T=C.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([k,N])=>{var W;if(this.destroyed){w();return}if((W=this._stats)==null||W.time("Rendering"),!(N.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:k,optionalContentConfig:N}),C.operatorListChanged()}).catch(w),T}getOperatorList({intent:t="display",annotationMode:e=$n.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var h;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,n,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>_c.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,n){function r(){o.read().then(function({value:c,done:h}){if(h){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},n)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),_(this,rn,!1),y(this,Fs,Gu).call(this),Promise.all(t)}cleanup(t=!1){_(this,rn,!0);const e=y(this,Fs,ua).call(this,!1);return t&&e&&this._stats&&(this._stats=new pv),e}_startRenderPage(t,e){var n,r;const s=this._intentStates.get(e);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&y(this,Fs,ua).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:f,done:p})=>{if(p){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,h),u())},f=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const p of h.renderTasks)p.operatorListChanged();y(this,Fs,ua).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(f);else if(h.opListReadCapability)h.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof dm){let n=rP;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Yo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}Kn=new WeakMap,rn=new WeakMap,Fs=new WeakSet,ua=function(t=!1){if(y(this,Fs,Gu).call(this),!l(this,rn)||this.destroyed)return!1;if(t)return _(this,Kn,setTimeout(()=>{_(this,Kn,null),y(this,Fs,ua).call(this,!1)},oP)),!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,rn,!1),!0},Gu=function(){l(this,Kn)&&(clearTimeout(l(this,Kn)),_(this,Kn,null))};var lo,Fd;class mP{constructor(){A(this,lo,new Set);A(this,Fd,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};l(this,Fd).then(()=>{for(const n of l(this,lo))n.call(this,s)})}addEventListener(t,e){l(this,lo).add(e)}removeEventListener(t,e){l(this,lo).delete(e)}terminate(){l(this,lo).clear()}}lo=new WeakMap,Fd=new WeakMap;const Xi={isWorkerDisabled:!1,fakeWorkerId:0};$e&&(Xi.isWorkerDisabled=!0,An.workerSrc||(An.workerSrc="./pdf.worker.mjs")),Xi.isSameOrigin=function(i,t){let e;try{if(e=new URL(i),!e.origin||e.origin==="null")return!1}catch{return!1}const s=new URL(t,e);return e.origin===s.origin},Xi.createCDNWrapper=function(i){const t=`await import("${i}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var co,Wa,qu,Va,Xu;const us=class us{constructor({name:t=null,port:e=null,verbosity:s=YT()}={}){A(this,Wa);var n;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((n=l(us,co))!=null&&n.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(l(us,co)||_(us,co,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return $e?Promise.all([Di.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Vl("main","worker",t),this._messageHandler.on("ready",function(){}),y(this,Wa,qu).call(this)}_initialize(){if(Xi.isWorkerDisabled||l(us,Va,Xu)){this._setupFakeWorker();return}let{workerSrc:t}=us;try{Xi.isSameOrigin(window.location.href,t)||(t=Xi.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Vl("main","worker",e),n=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){n();return}this._messageHandler=s,this._port=e,this._webWorker=e,y(this,Wa,qu).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){n();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{hf("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Xi.isWorkerDisabled||(St("Setting up fake worker."),Xi.isWorkerDisabled=!0),us._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new mP;this._port=e;const s=`fake${Xi.fakeWorkerId++}`,n=new Vl(s+"_worker",s,e);t.setup(n,e),this._messageHandler=new Vl(s,s+"_worker",e),y(this,Wa,qu).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=l(us,co))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=l(this,co))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new us(t)}static get workerSrc(){if(An.workerSrc)return An.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Mt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Va,Xu)?l(this,Va,Xu):(await import(this.workerSrc)).WorkerMessageHandler)())}};co=new WeakMap,Wa=new WeakSet,qu=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Va=new WeakSet,Xu=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(us,Va),A(us,co);let wa=us;var on,bi,Ga,qa,vi,ho,Gl;class bP{constructor(t,e,s,n,r){A(this,ho);A(this,on,new Map);A(this,bi,new Map);A(this,Ga,new Map);A(this,qa,new Map);A(this,vi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new _A,this.fontLoader=new b1({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Mt(this,"annotationStorage",new gm)}getRenderingIntent(t,e=$n.ENABLE,s=null,n=!1,r=!1){let o=ys.DISPLAY,a=Up;switch(t){case"any":o=ys.ANY;break;case"display":break;case"print":o=ys.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const c=o&ys.PRINT&&s instanceof iA?s:this.annotationStorage;switch(e){case $n.DISABLE:o+=ys.ANNOTATIONS_DISABLE;break;case $n.ENABLE:break;case $n.ENABLE_FORMS:o+=ys.ANNOTATIONS_FORMS;break;case $n.ENABLE_STORAGE:o+=ys.ANNOTATIONS_STORAGE,a=c.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=ys.IS_EDITING),r&&(o+=ys.OPLIST);const{ids:h,hash:u}=c.modifiedIds,f=[o,a.hash,u];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,vi))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of l(this,bi).values())t.push(n._destroy());l(this,bi).clear(),l(this,Ga).clear(),l(this,qa).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var n;this.commonObjs.clear(),this.fontLoader.clear(),l(this,on).clear(),this.filterFactory.destroy(),vc.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Yo("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,n)=>{me(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){n.close();return}me(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",s=>{const n=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var o;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),r.onProgress=a=>{var c;(c=e.onProgress)==null||c.call(e,{loaded:a.loaded,total:a.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},n.reject),n.promise}),t.on("GetRangeReader",(s,n)=>{me(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){n.close();return}me(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{r.cancel(o),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new pP(s,this))}),t.on("DocException",function(s){let n;switch(s.name){case"PasswordException":n=new _p(s.message,s.code);break;case"InvalidPDFException":n=new Sy(s.message);break;case"MissingPDFException":n=new Ko(s.message);break;case"UnexpectedResponseException":n=new uf(s.message,s.status);break;case"UnknownErrorException":n=new yp(s.message,s.details);break;default:Wt("DocException - expected a valid Error.")}e._capability.reject(n)}),t.on("PasswordRequest",s=>{if(_(this,vi,Promise.withResolvers()),e.onPassword){const n=r=>{r instanceof Error?l(this,vi).reject(r):l(this,vi).resolve({password:r})};try{e.onPassword(n,s.code)}catch(r){l(this,vi).reject(r)}}else l(this,vi).reject(new _p(s.message,s.code));return l(this,vi).promise}),t.on("DataLoaded",s=>{var n;(n=e.onProgress)==null||n.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,bi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:h}=this._params;if("error"in r){const g=r.error;St(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const u=h&&((o=globalThis.FontInspector)!=null&&o.enabled)?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,f=new v1(r,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&f.data&&(f.data=null),this.commonObjs.resolve(s,f)});break;case"CopyLocalImage":const{imageRef:p}=r;me(p,"The imageRef must be defined.");for(const g of l(this,bi).values())for(const[,m]of g.objs)if((m==null?void 0:m.ref)===p)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,r,o])=>{var c;if(this.destroyed)return;const a=l(this,bi).get(n);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":a.objs.resolve(s,o),(o==null?void 0:o.dataLen)>VT&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var n;this.destroyed||(n=e.onProgress)==null||n.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=l(this,Ga).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,qa).set(r.refStr,t);const o=new gP(e,r,this,this._params.pdfBug);return l(this,bi).set(e,o),o});return l(this,Ga).set(e,n),n}getPageIndex(t){return Pv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return y(this,ho,Gl).call(this,"GetFieldObjects")}hasJSActions(){return y(this,ho,Gl).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return y(this,ho,Gl).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return y(this,ho,Gl).call(this,"GetOptionalContentConfig").then(e=>new H1(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,on).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(n=>{var r,o;return{info:n[0],metadata:n[1]?new F1(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,on).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,bi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,on).clear(),this.filterFactory.destroy(!0),vc.cleanup()}}cachedPageNumber(t){if(!Pv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,qa).get(e)??null}}on=new WeakMap,bi=new WeakMap,Ga=new WeakMap,qa=new WeakMap,vi=new WeakMap,ho=new WeakSet,Gl=function(t,e=null){const s=l(this,on).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,e);return l(this,on).set(t,n),n};const Ru=Symbol("INITIAL_DATA");var Qs,hh,Jp;class _A{constructor(){A(this,hh);A(this,Qs,Object.create(null))}get(t,e=null){if(e){const n=y(this,hh,Jp).call(this,t);return n.promise.then(()=>e(n.data)),null}const s=l(this,Qs)[t];if(!s||s.data===Ru)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=l(this,Qs)[t];return!!e&&e.data!==Ru}resolve(t,e=null){const s=y(this,hh,Jp).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in l(this,Qs)){const{data:s}=l(this,Qs)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}_(this,Qs,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,Qs)){const{data:e}=l(this,Qs)[t];e!==Ru&&(yield[t,e])}}}Qs=new WeakMap,hh=new WeakSet,Jp=function(t){var e;return(e=l(this,Qs))[t]||(e[t]={...Promise.withResolvers(),data:Ru})};var Yn;class vP{constructor(t){A(this,Yn,null);_(this,Yn,t),this.onContinue=null}get promise(){return l(this,Yn).capability.promise}cancel(t=0){l(this,Yn).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,Yn).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,Yn);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Yn=new WeakMap;var Qn,uo;const Fr=class Fr{constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){A(this,Qn,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new vP(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(Fr,uo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Fr,uo).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:o}=this.params;this.gfx=new Aa(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,Qn)&&(window.cancelAnimationFrame(l(this,Qn)),_(this,Qn,null)),l(Fr,uo).delete(this._canvas),this.callback(t||new dm(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,Qn,window.requestAnimationFrame(()=>{_(this,Qn,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Fr,uo).delete(this._canvas),this.callback())))}};Qn=new WeakMap,uo=new WeakMap,A(Fr,uo,new WeakSet);let Zp=Fr;const _P="4.5.136",yP="3a21f03b0";function Rv(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Nl(i){return Math.max(0,Math.min(255,255*i))}class Lv{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Nl(t),[t,t,t]}static G_HTML([t]){const e=Rv(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Nl)}static RGB_HTML(t){return`#${t.map(Rv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,s,n]){return[Nl(1-Math.min(1,t+n)),Nl(1-Math.min(1,s+n)),Nl(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,r=1-e,o=1-s,a=Math.min(n,r,o);return["CMYK",n,r,o,a]}}class yA{static setupStorage(t,e,s,n,r){const o=n.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{n.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const c=a.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var f,p;const e=t.annotationStorage,s=t.linkService,n=t.xfaHtml,r=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:r,linkService:s});const a=r!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}a&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const g=document.createTextNode(n.value);o.append(g),a&&_c.shouldBuildText(n.name)&&h.push(g)}return{textDivs:h}}const u=[[n,-1,o]];for(;u.length>0;){const[g,m,v]=u.at(-1);if(m+1===g.children.length){u.pop();continue}const E=g.children[++u.at(-1)[1]];if(E===null)continue;const{name:w}=E;if(w==="#text"){const T=document.createTextNode(E.value);h.push(T),v.append(T);continue}const C=(f=E==null?void 0:E.attributes)!=null&&f.xmlns?document.createElementNS(E.attributes.xmlns,w):document.createElement(w);if(v.append(C),E.attributes&&this.setAttributes({html:C,element:E,storage:e,intent:r,linkService:s}),((p=E.children)==null?void 0:p.length)>0)u.push([E,-1,C]);else if(E.value){const T=document.createTextNode(E.value);a&&_c.shouldBuildText(w)&&h.push(T),C.append(T)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ou=1e3,AP=9,Vo=new WeakSet;function wn(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class wP{static create(t){switch(t.data.annotationType){case ue.LINK:return new AA(t);case ue.TEXT:return new EP(t);case ue.WIDGET:switch(t.data.fieldType){case"Tx":return new SP(t);case"Btn":return t.data.radioButton?new SA(t):t.data.checkBox?new xP(t):new TP(t);case"Ch":return new PP(t);case"Sig":return new CP(t)}return new Qo(t);case ue.POPUP:return new eg(t);case ue.FREETEXT:return new RA(t);case ue.LINE:return new LP(t);case ue.SQUARE:return new kP(t);case ue.CIRCLE:return new MP(t);case ue.POLYLINE:return new LA(t);case ue.CARET:return new OP(t);case ue.INK:return new kA(t);case ue.POLYGON:return new IP(t);case ue.HIGHLIGHT:return new DP(t);case ue.UNDERLINE:return new FP(t);case ue.SQUIGGLY:return new NP(t);case ue.STRIKEOUT:return new HP(t);case ue.STAMP:return new MA(t);case ue.FILEATTACHMENT:return new $P(t);default:return new le(t)}}}var fo,Xa,Ka,uh,tg;const wm=class wm{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){A(this,uh);A(this,fo,null);A(this,Xa,!1);A(this,Ka,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return wm._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;l(this,fo)||_(this,fo,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&y(this,uh,tg).call(this,e),(s=l(this,Ka))==null||s.popup.updateEdited(t)}resetEdited(){var t;l(this,fo)&&(y(this,uh,tg).call(this,l(this,fo).rect),(t=l(this,Ka))==null||t.popup.resetEdited(),_(this,fo,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Qo||(r.tabIndex=ou);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof eg){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:a,height:c}=wn(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(v>0||E>0){const C=`calc(${v}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;o.borderRadius=C}else if(this instanceof SA){const C=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=C}switch(e.borderStyle.style){case Dl.SOLID:o.borderStyle="solid";break;case Dl.DASHED:o.borderStyle="dashed";break;case Dl.BEVELED:St("Unimplemented border style: beveled");break;case Dl.INSET:St("Unimplemented border style: inset");break;case Dl.UNDERLINE:o.borderBottomStyle="solid";break}const w=e.borderColor||null;w?(_(this,Xa,!0),o.borderColor=ct.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const h=ct.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:g}=n.rawDims;o.left=`${100*(h[0]-p)/u}%`,o.top=`${100*(h[1]-g)/f}%`;const{rotation:m}=e;return e.hasOwnCanvas||m===0?(o.width=`${100*a/u}%`,o.height=`${100*c/f}%`):this.setRotation(m,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:o}=wn(this.data.rect);let a,c;t%180===0?(a=100*r/s,c=100*o/n):(a=100*o/s,c=100*r/n),e.style.width=`${a}%`,e.style.height=`${c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,n)=>{const r=n.detail[e],o=r[0],a=r.slice(1);n.target.style[s]=Lv[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:Lv[`${o}_rgb`](a)})};return Mt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||s[n];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e)){const o=s[n];if(o){const a={detail:{[n]:r},target:t};o(a),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,n,r]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,E,w,C]=t.subarray(2,6);if(n===v&&r===E&&e===w&&s===C)return}const{style:o}=this.container;let a;if(l(this,Xa)){const{borderColor:v,borderWidth:E}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=n-e,h=r-s,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const g=u.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let v=2,E=t.length;v<E;v+=8){const w=t[v],C=t[v+1],T=t[v+2],L=t[v+3],M=u.createElement("rect"),k=(T-e)/c,N=(r-C)/h,W=(w-T)/c,tt=(C-L)/h;M.setAttribute("x",k),M.setAttribute("y",N),M.setAttribute("width",W),M.setAttribute("height",tt),g.append(M),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${N}" width="${W}" height="${tt}"/>`)}l(this,Xa)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const s=_(this,Ka,new eg({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}render(){Wt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:o,exportValues:a}of n){if(r===-1||o===e)continue;const c=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Vo.has(h)){St(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,o=n.getAttribute("data-element-id");o!==e&&Vo.has(n)&&s.push({id:o,exportValue:r,domElement:n})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};fo=new WeakMap,Xa=new WeakMap,Ka=new WeakMap,uh=new WeakSet,tg=function(t){const{container:{style:e},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...t);const{width:h,height:u}=wn(t);e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,n===0?(e.width=`${100*h/r}%`,e.height=`${100*u/o}%`):this.setRotation(n)};let le=wm;var ws,kr,wA,EA;class AA extends le{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,ws);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(y(this,ws,wA).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(y(this,ws,EA).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&y(this,ws,kr).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),y(this,ws,kr).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=n.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),y(this,ws,kr).call(this)}_bindResetFormAction(e,s){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),y(this,ws,kr).call(this),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var f;n==null||n();const{fields:r,refs:o,include:a}=s,c=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const g of r){const m=this._fieldObjects[g]||[];for(const{id:v}of m)p.add(v)}for(const g of Object.values(this._fieldObjects))for(const m of g)p.has(m.id)===a&&c.push(m)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,u=[];for(const p of c){const{id:g}=p;switch(u.push(g),p.type){case"text":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;h.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}default:continue}const m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!Vo.has(m)){St(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}ws=new WeakSet,kr=function(){this.container.setAttribute("data-internal-link","")},wA=function(e,s,n=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},y(this,ws,kr).call(this)},EA=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),y(this,ws,kr).call(this)};class EP extends le{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Qo extends le{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ss.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,n,r){s.includes("mouse")?t.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var a;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o)}}))})}_setEventListeners(t,e,s,n){var r,o,a;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,n),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ct.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||AP,r=t.style;let o;const a=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(h/(Gf*n))||1,f=h/u;o=Math.min(n,c(f/Gf))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(n,c(h/Gf))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=ct.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class SP extends Qo{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,n){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[n]:s})}render(){var n,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let h=o.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",h??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Vo.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=ou,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";s.value=u.userValue=g,u.formattedValue=null});let f=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var v;if(u.focused)return;const{target:m}=g;u.userValue&&(m.value=u.userValue),u.lastCommittedValue=m.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(v){u.userValue=v.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:E}=v.detail;u.formattedValue=E,E!=null&&v.target!==document.activeElement&&(v.target.value=E),t.setValue(e,{formattedValue:E})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var T;const{charLimit:E}=v.detail,{target:w}=v;if(E===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",E);let C=u.userValue;!C||C.length<=E||(C=C.slice(0,E),w.value=u.userValue=C,t.setValue(e,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),s.addEventListener("keydown",g=>{var E;u.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(u.commitKey=3),m===-1)return;const{value:v}=g.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,s.addEventListener("blur",g=>{var v,E;if(!u.focused||!g.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:m}=g.target;u.userValue=m,u.lastCommittedValue!==m&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var M;u.lastCommittedValue=null;const{data:m,target:v}=g,{value:E,selectionStart:w,selectionEnd:C}=v;let T=w,L=C;switch(g.inputType){case"deleteWordBackward":{const k=E.substring(0,w).match(/\w*[^\w]*$/);k&&(T-=k[0].length);break}case"deleteWordForward":{const k=E.substring(w).match(/^[^\w]*\w*/);k&&(L+=k[0].length);break}case"deleteContentBackward":w===C&&(T-=1);break;case"deleteContentForward":w===C&&(L+=1);break}g.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:m||"",willCommit:!1,selStart:T,selEnd:L}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class CP extends Qo{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class xP extends Qo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Vo.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=ou,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class SA extends Qo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(s,{value:n})),n)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Vo.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=ou,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:h=>{const u=o===h.detail.value;for(const f of this._getElementsByName(h.target.name)){const p=u&&f.id===s;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class TP extends AA{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class PP extends Qo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Vo.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=ou;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of n.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,s.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),r=!1),n.append(f)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),o=()=>{u.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:g}=n;return g?Array.prototype.filter.call(p,m=>m.selected).map(m=>m[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=a(!1);const h=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const g=p.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const v of n.options)v.selected=m.has(v.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(p){n.multiple=!0},remove(p){const g=n.options,m=p.detail.remove;g[m].selected=!1,n.remove(m),g.length>0&&Array.prototype.findIndex.call(g,E=>E.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},clear(p){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(p){const{index:g,displayValue:m,exportValue:v}=p.detail.insert,E=n.children[g],w=document.createElement("option");w.textContent=m,w.value=v,E?E.before(w):n.append(w),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},items(p){const{items:g}=p.detail;for(;n.length!==0;)n.remove(0);for(const m of g){const{displayValue:v,exportValue:E}=m,w=document.createElement("option");w.textContent=v,w.value=E,n.append(w)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},indices(p){const g=new Set(p.detail.indices);for(const m of p.target.options)m.selected=g.has(m.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),n.addEventListener("input",u=>{var g;const f=a(!0),p=a(!1);t.setValue(e,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class eg extends le{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:le._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new RP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${xy}${s}`).join(",")),this.container}}var Ya,Nd,Hd,Qa,po,re,an,go,dh,fh,Ja,ln,Js,cn,ph,hn,gh,mo,bo,Vt,Ku,sg,CA,xA,TA,PA,Yu,Qu,ig;class RP{constructor({container:t,color:e,elements:s,titleObj:n,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:h,parentRect:u,open:f}){A(this,Vt);A(this,Ya,y(this,Vt,TA).bind(this));A(this,Nd,y(this,Vt,ig).bind(this));A(this,Hd,y(this,Vt,Qu).bind(this));A(this,Qa,y(this,Vt,Yu).bind(this));A(this,po,null);A(this,re,null);A(this,an,null);A(this,go,null);A(this,dh,null);A(this,fh,null);A(this,Ja,null);A(this,ln,!1);A(this,Js,null);A(this,cn,null);A(this,ph,null);A(this,hn,null);A(this,gh,null);A(this,mo,null);A(this,bo,!1);var p;_(this,re,t),_(this,gh,n),_(this,an,o),_(this,hn,a),_(this,fh,c),_(this,po,e),_(this,ph,h),_(this,Ja,u),_(this,dh,s),_(this,go,Ly.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",l(this,Qa)),g.addEventListener("mouseenter",l(this,Hd)),g.addEventListener("mouseleave",l(this,Nd)),g.classList.add("popupTriggerArea");for(const g of s)(p=g.container)==null||p.addEventListener("keydown",l(this,Ya));l(this,re).hidden=!0,f&&y(this,Vt,Yu).call(this)}render(){if(l(this,Js))return;const t=_(this,Js,document.createElement("div"));if(t.className="popup",l(this,po)){const r=t.style.outlineColor=ct.makeHexColor(...l(this,po));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=ct.makeHexColor(...l(this,po).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=l(this,gh),t.append(e),l(this,go)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:l(this,go).toLocaleDateString(),time:l(this,go).toLocaleTimeString()})),e.append(r)}const n=l(this,Vt,Ku);if(n)yA.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,an));t.append(r)}l(this,re).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,o=n.length;r<o;++r){const a=n[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;l(this,mo)||_(this,mo,{contentsObj:l(this,an),richText:l(this,hn)}),t&&_(this,cn,null),e&&(_(this,hn,y(this,Vt,xA).call(this,e)),_(this,an,null)),(s=l(this,Js))==null||s.remove(),_(this,Js,null)}resetEdited(){var t;l(this,mo)&&({contentsObj:cs(this,an)._,richText:cs(this,hn)._}=l(this,mo),_(this,mo,null),(t=l(this,Js))==null||t.remove(),_(this,Js,null),_(this,cn,null))}forceHide(){_(this,bo,this.isVisible),l(this,bo)&&(l(this,re).hidden=!0)}maybeShow(){l(this,bo)&&(l(this,Js)||y(this,Vt,Qu).call(this),_(this,bo,!1),l(this,re).hidden=!1)}get isVisible(){return l(this,re).hidden===!1}}Ya=new WeakMap,Nd=new WeakMap,Hd=new WeakMap,Qa=new WeakMap,po=new WeakMap,re=new WeakMap,an=new WeakMap,go=new WeakMap,dh=new WeakMap,fh=new WeakMap,Ja=new WeakMap,ln=new WeakMap,Js=new WeakMap,cn=new WeakMap,ph=new WeakMap,hn=new WeakMap,gh=new WeakMap,mo=new WeakMap,bo=new WeakMap,Vt=new WeakSet,Ku=function(){const t=l(this,hn),e=l(this,an);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,hn).html||null},sg=function(){var t,e,s;return((s=(e=(t=l(this,Vt,Ku))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},CA=function(){var t,e,s;return((s=(e=(t=l(this,Vt,Ku))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},xA=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:l(this,Vt,CA),fontSize:l(this,Vt,sg)?`calc(${l(this,Vt,sg)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return s},TA=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,ln))&&y(this,Vt,Yu).call(this)},PA=function(){if(l(this,cn)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:n,pageY:r}}}=l(this,fh);let o=!!l(this,Ja),a=o?l(this,Ja):l(this,ph);for(const m of l(this,dh))if(!a||ct.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=ct.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,f=c[0]+u,p=c[1];_(this,cn,[100*(f-n)/e,100*(p-r)/s]);const{style:g}=l(this,re);g.left=`${l(this,cn)[0]}%`,g.top=`${l(this,cn)[1]}%`},Yu=function(){_(this,ln,!l(this,ln)),l(this,ln)?(y(this,Vt,Qu).call(this),l(this,re).addEventListener("click",l(this,Qa)),l(this,re).addEventListener("keydown",l(this,Ya))):(y(this,Vt,ig).call(this),l(this,re).removeEventListener("click",l(this,Qa)),l(this,re).removeEventListener("keydown",l(this,Ya)))},Qu=function(){l(this,Js)||this.render(),this.isVisible?l(this,ln)&&l(this,re).classList.add("focused"):(y(this,Vt,PA).call(this),l(this,re).hidden=!1,l(this,re).style.zIndex=parseInt(l(this,re).style.zIndex)+1e3)},ig=function(){l(this,re).classList.remove("focused"),!(l(this,ln)||!this.isVisible)&&(l(this,re).hidden=!0,l(this,re).style.zIndex=parseInt(l(this,re).style.zIndex)-1e3)};class RA extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=kt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var mh;class LP extends le{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,mh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:s,height:n}=wn(e.rect),r=this.svgFactory.create(s,n,!0),o=_(this,mh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,mh)}addHighlightArea(){this.container.classList.add("highlightArea")}}mh=new WeakMap;var bh;class kP extends le{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,bh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:s,height:n}=wn(e.rect),r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=_(this,bh,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",n-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,bh)}addHighlightArea(){this.container.classList.add("highlightArea")}}bh=new WeakMap;var vh;class MP extends le{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,vh,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:s,height:n}=wn(e.rect),r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=_(this,vh,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",n/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",n/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,vh)}addHighlightArea(){this.container.classList.add("highlightArea")}}vh=new WeakMap;var _h;class LA extends le{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,_h,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:n,popupRef:r}}=this;if(!s)return this.container;const{width:o,height:a}=wn(e),c=this.svgFactory.create(o,a,!0);let h=[];for(let f=0,p=s.length;f<p;f+=2){const g=s[f]-e[0],m=e[3]-s[f+1];h.push(`${g},${m}`)}h=h.join(" ");const u=_(this,_h,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,_h)}addHighlightArea(){this.container.classList.add("highlightArea")}}_h=new WeakMap;class IP extends LA{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class OP extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var yh;class kA extends le{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,yh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=kt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:s,borderStyle:n,popupRef:r}}=this,{width:o,height:a}=wn(e),c=this.svgFactory.create(o,a,!0);for(const h of s){let u=[];for(let p=0,g=h.length;p<g;p+=2){const m=h[p]-e[0],v=e[3]-h[p+1];u.push(`${m},${v}`)}u=u.join(" ");const f=this.svgFactory.createElement(this.svgElementName);l(this,yh).push(f),f.setAttribute("points",u),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),c.append(f)}return this.container.append(c),this.container}getElementsToTriggerPopup(){return l(this,yh)}addHighlightArea(){this.container.classList.add("highlightArea")}}yh=new WeakMap;class DP extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class FP extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class NP extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class HP extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class MA extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ah,wh,ng;class $P extends le{constructor(e){var n;super(e,{isRenderable:!0});A(this,wh);A(this,Ah,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",y(this,wh,ng).bind(this)),_(this,Ah,n);const{isMac:r}=ss.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&y(this,wh,ng).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return l(this,Ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ah=new WeakMap,wh=new WeakSet,ng=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Eh,vo,_o,Go,IA,rg;class BP{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:o}){A(this,Go);A(this,Eh,null);A(this,vo,null);A(this,_o,new Map);this.div=t,_(this,Eh,e),_(this,vo,s),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return l(this,_o).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;Uo(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new um,annotationStorage:t.annotationStorage||new gm,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const c=a.annotationType===ue.POPUP;if(c){const f=n.get(a.id);if(!f)continue;r.elements=f}else{const{width:f,height:p}=wn(a.rect);if(f<=0||p<=0)continue}r.data=a;const h=wP.create(r);if(!h.isRenderable)continue;if(!c&&a.popupRef){const f=n.get(a.popupRef);f?f.push(h):n.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),y(this,Go,IA).call(this,u,a.id),h._isEditable&&(l(this,_o).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}y(this,Go,rg).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Uo(e,{rotation:t.rotation}),y(this,Go,rg).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,_o).values())}getEditableAnnotation(t){return l(this,_o).get(t)}}Eh=new WeakMap,vo=new WeakMap,_o=new WeakMap,Go=new WeakSet,IA=function(t,e){var n;const s=t.firstChild||t;s.id=`${xy}${e}`,this.div.append(t),(n=l(this,Eh))==null||n.moveElementInDOM(this.div,t,s,!1)},rg=function(){if(!l(this,vo))return;const t=this.div;for(const[e,s]of l(this,vo)){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;s.className="annotationContent";const{firstChild:r}=n;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):n.append(s)}l(this,vo).clear()};const Lu=/\r\n?|\n/g;var Sh,Ch,xh,Th,Ph,Zs,gs,Rh,ms,Za,he,OA,DA,FA,Ju,Sn,Zu,td,NA,ag,HA;const Xt=class Xt extends $t{constructor(e){super({...e,name:"freeTextEditor"});A(this,he);A(this,Sh,this.editorDivBlur.bind(this));A(this,Ch,this.editorDivFocus.bind(this));A(this,xh,this.editorDivInput.bind(this));A(this,Th,this.editorDivKeydown.bind(this));A(this,Ph,this.editorDivPaste.bind(this));A(this,Zs);A(this,gs,"");A(this,Rh,`${this.id}-editor`);A(this,ms);A(this,Za,null);_(this,Zs,e.color||Xt._defaultColor||$t._defaultLineColor),_(this,ms,e.fontSize||Xt._defaultFontSize)}static get _keyboardManager(){const e=Xt.prototype,s=o=>o.isEmpty(),n=Wo.TRANSLATE_SMALL,r=Wo.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new nu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){$t.initialize(e,s,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case bt.FREETEXT_SIZE:Xt._defaultFontSize=s;break;case bt.FREETEXT_COLOR:Xt._defaultColor=s;break}}updateParams(e,s){switch(e){case bt.FREETEXT_SIZE:y(this,he,OA).call(this,s);break;case bt.FREETEXT_COLOR:y(this,he,DA).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[bt.FREETEXT_SIZE,Xt._defaultFontSize],[bt.FREETEXT_COLOR,Xt._defaultColor||$t._defaultLineColor]]}get propertiesToUpdate(){return[[bt.FREETEXT_SIZE,l(this,ms)],[bt.FREETEXT_COLOR,l(this,Zs)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-Xt._internalPadding*e,-(Xt._internalPadding+l(this,ms))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(kt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",l(this,Th),{signal:e}),this.editorDiv.addEventListener("focus",l(this,Ch),{signal:e}),this.editorDiv.addEventListener("blur",l(this,Sh),{signal:e}),this.editorDiv.addEventListener("input",l(this,xh),{signal:e}),this.editorDiv.addEventListener("paste",l(this,Ph),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Rh)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",l(this,Th)),this.editorDiv.removeEventListener("focus",l(this,Ch)),this.editorDiv.removeEventListener("blur",l(this,Sh)),this.editorDiv.removeEventListener("input",l(this,xh)),this.editorDiv.removeEventListener("paste",l(this,Ph)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,gs),s=_(this,gs,y(this,he,FA).call(this).trimEnd());if(e===s)return;const n=r=>{if(_(this,gs,r),!r){this.remove();return}y(this,he,td).call(this),this._uiManager.rebuild(this),y(this,he,Ju).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(e)},mustExec:!1}),y(this,he,Ju).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Xt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Rh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),$t._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${l(this,ms)}px * var(--scale-factor))`,n.color=l(this,Zs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bd(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=l(this,Za);let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,f]=this.pageDimensions,[p,g]=this.pageTranslation;let m,v;switch(this.rotation){case 0:m=e+(a[0]-p)/u,v=s+this.height-(a[1]-g)/f;break;case 90:m=e+(a[0]-p)/u,v=s-(a[1]-g)/f,[c,h]=[h,-c];break;case 180:m=e-this.width+(a[0]-p)/u,v=s-(a[1]-g)/f,[c,h]=[-c,-h];break;case 270:m=e+(a[0]-p-this.height*f)/u,v=s+(a[1]-g-this.width*u)/f,[c,h]=[-h,c];break}this.setAt(m*r,v*o,c,h)}else this.setAt(e*r,s*o,this.width*r,this.height*o);y(this,he,td).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var m,v,E;const s=e.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=y(m=Xt,Sn,ag).call(m,s.getData("text")||"").replaceAll(Lu,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=a,u=[],f=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(f.push(c.nodeValue.slice(h).replaceAll(Lu,"")),w!==this.editorDiv){let C=u;for(const T of this.editorDiv.childNodes){if(T===w){C=f;continue}C.push(y(v=Xt,Sn,Zu).call(v,T))}}u.push(c.nodeValue.slice(0,h).replaceAll(Lu,""))}else if(c===this.editorDiv){let w=u,C=0;for(const T of this.editorDiv.childNodes)C++===h&&(w=f),w.push(y(E=Xt,Sn,Zu).call(E,T))}_(this,gs,`${u.join(`
`)}${r}${f.join(`
`)}`),y(this,he,td).call(this);const p=new Range;let g=u.reduce((w,C)=>w+C.length,0);for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const C=w.nodeValue.length;if(g<=C){p.setStart(w,g),p.setEnd(w,g);break}g-=C}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static deserialize(e,s,n){var a;let r=null;if(e instanceof RA){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:f,id:p},textContent:g,textPosition:m,parent:{page:{pageNumber:v}}}=e;if(!g||g.length===0)return null;r=e={annotationType:kt.FREETEXT,color:Array.from(h),fontSize:c,value:g.join(`
`),position:m,pageIndex:v-1,rect:u.slice(0),rotation:f,id:p,deleted:!1}}const o=super.deserialize(e,s,n);return _(o,ms,e.fontSize),_(o,Zs,ct.makeHexColor(...e.color)),_(o,gs,y(a=Xt,Sn,ag).call(a,e.value)),o.annotationElementId=e.id||null,_(o,Za,r),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const s=Xt._internalPadding*this.parentScale,n=this.getRect(s,s),r=$t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Zs)),o={annotationType:kt.FREETEXT,color:r,fontSize:l(this,ms),value:y(this,he,NA).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!y(this,he,HA).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${l(this,ms)}px * var(--scale-factor))`,n.color=l(this,Zs),s.replaceChildren();for(const o of l(this,gs).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=Xt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:l(this,gs)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Sh=new WeakMap,Ch=new WeakMap,xh=new WeakMap,Th=new WeakMap,Ph=new WeakMap,Zs=new WeakMap,gs=new WeakMap,Rh=new WeakMap,ms=new WeakMap,Za=new WeakMap,he=new WeakSet,OA=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,ms))*this.parentScale),_(this,ms,r),y(this,he,Ju).call(this)},n=l(this,ms);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},DA=function(e){const s=r=>{_(this,Zs,this.editorDiv.style.color=r)},n=l(this,Zs);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},FA=function(){var s;const e=[];this.editorDiv.normalize();for(const n of this.editorDiv.childNodes)e.push(y(s=Xt,Sn,Zu).call(s,n));return e.join(`
`)},Ju=function(){const[e,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/s):(this.width=n.height/e,this.height=n.width/s),this.fixAndSetPosition()},Sn=new WeakSet,Zu=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Lu,"")},td=function(){if(this.editorDiv.replaceChildren(),!!l(this,gs))for(const e of l(this,gs).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},NA=function(){return l(this,gs).replaceAll(""," ")},ag=function(e){return e.replaceAll(" ","")},HA=function(e){const{value:s,fontSize:n,color:r,pageIndex:o}=l(this,Za);return this._hasBeenMoved||e.value!==s||e.fontSize!==n||e.color.some((a,c)=>a!==r[c])||e.pageIndex!==o},A(Xt,Sn),_t(Xt,"_freeTextDefaultContent",""),_t(Xt,"_internalPadding",0),_t(Xt,"_defaultColor",null),_t(Xt,"_defaultFontSize",10),_t(Xt,"_type","freetext"),_t(Xt,"_editorType",kt.FREETEXT);let og=Xt;var Lh,Jn,ti,Ke,$A,ed,BA,jA,lg;class kv{constructor(t,e=0,s=0,n=!0){A(this,Ke);A(this,Lh);A(this,Jn,[]);A(this,ti,[]);let r=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:w,y:C,width:T,height:L}of t){const M=Math.floor((w-e)/u)*u,k=Math.ceil((w+T+e)/u)*u,N=Math.floor((C-e)/u)*u,W=Math.ceil((C+L+e)/u)*u,tt=[M,N,W,!0],nt=[k,N,W,!1];l(this,Jn).push(tt,nt),r=Math.min(r,M),o=Math.max(o,k),a=Math.min(a,N),c=Math.max(c,W)}const f=o-r+2*s,p=c-a+2*s,g=r-s,m=a-s,v=l(this,Jn).at(n?-1:-2),E=[v[0],v[2]];for(const w of l(this,Jn)){const[C,T,L]=w;w[0]=(C-g)/f,w[1]=(T-m)/p,w[2]=(L-m)/p}_(this,Lh,{x:g,y:m,width:f,height:p,lastPoint:E})}getOutlines(){l(this,Jn).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of l(this,Jn))e[3]?(t.push(...y(this,Ke,lg).call(this,e)),y(this,Ke,BA).call(this,e)):(y(this,Ke,jA).call(this,e),t.push(...y(this,Ke,lg).call(this,e)));return y(this,Ke,$A).call(this,t)}}Lh=new WeakMap,Jn=new WeakMap,ti=new WeakMap,Ke=new WeakSet,$A=function(t){const e=[],s=new Set;for(const o of t){const[a,c,h]=o;e.push([a,c,o],[a,h,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const n=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,c,h,u,f]=o;s.delete(o);let p=a,g=c;for(r=[a,h],n.push(r);;){let m;if(s.has(u))m=u;else if(s.has(f))m=f;else break;s.delete(m),[a,c,h,u,f]=m,p!==a&&(r.push(p,g,a,g===c?c:h),p=a),g=g===c?h:c}r.push(p,g)}return new jP(n,l(this,Lh))},ed=function(t){const e=l(this,ti);let s=0,n=e.length-1;for(;s<=n;){const r=s+n>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:n=r-1}return n+1},BA=function([,t,e]){const s=y(this,Ke,ed).call(this,t);l(this,ti).splice(s,0,[t,e])},jA=function([,t,e]){const s=y(this,Ke,ed).call(this,t);for(let n=s;n<l(this,ti).length;n++){const[r,o]=l(this,ti)[n];if(r!==t)break;if(r===t&&o===e){l(this,ti).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,o]=l(this,ti)[n];if(r!==t)break;if(r===t&&o===e){l(this,ti).splice(n,1);return}}},lg=function(t){const[e,s,n]=t,r=[[e,s,n]],o=y(this,Ke,ed).call(this,n);for(let a=0;a<o;a++){const[c,h]=l(this,ti)[a];for(let u=0,f=r.length;u<f;u++){const[,p,g]=r[u];if(!(h<=p||g<=c)){if(p>=c){if(g>h)r[u][1]=h;else{if(f===1)return[];r.splice(u,1),u--,f--}continue}r[u][2]=c,g>h&&r.push([e,h,g])}}}return r};class zA{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof hg}}var kh,tl;class jP extends zA{constructor(e,s){super();A(this,kh);A(this,tl);_(this,tl,e),_(this,kh,s)}toSVGPath(){const e=[];for(const s of l(this,tl)){let[n,r]=s;e.push(`M${n} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,s,n,r],o){const a=[],c=n-e,h=r-s;for(const u of l(this,tl)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=e+u[p]*c,f[p+1]=r-u[p+1]*h;a.push(f)}return a}get box(){return l(this,kh)}}kh=new WeakMap,tl=new WeakMap;var _i,un,el,sl,yi,Lt,yo,Ao,Mh,Ih,il,nl,Zn,Oh,$d,Bd,Dh,cg;const Gi=class Gi{constructor({x:t,y:e},s,n,r,o,a=0){A(this,Dh);A(this,_i);A(this,un,[]);A(this,el);A(this,sl);A(this,yi,[]);A(this,Lt,new Float64Array(18));A(this,yo);A(this,Ao);A(this,Mh);A(this,Ih);A(this,il);A(this,nl);A(this,Zn,[]);_(this,_i,s),_(this,nl,r*n),_(this,sl,o),l(this,Lt).set([NaN,NaN,NaN,NaN,t,e],6),_(this,el,a),_(this,Ih,l(Gi,Oh)*n),_(this,Mh,l(Gi,Bd)*n),_(this,il,n),l(this,Zn).push(t,e)}get free(){return!0}isEmpty(){return isNaN(l(this,Lt)[8])}add({x:t,y:e}){var tt;_(this,yo,t),_(this,Ao,e);const[s,n,r,o]=l(this,_i);let[a,c,h,u]=l(this,Lt).subarray(8,12);const f=t-h,p=e-u,g=Math.hypot(f,p);if(g<l(this,Mh))return!1;const m=g-l(this,Ih),v=m/g,E=v*f,w=v*p;let C=a,T=c;a=h,c=u,h+=E,u+=w,(tt=l(this,Zn))==null||tt.push(t,e);const L=-w/m,M=E/m,k=L*l(this,nl),N=M*l(this,nl);return l(this,Lt).set(l(this,Lt).subarray(2,8),0),l(this,Lt).set([h+k,u+N],4),l(this,Lt).set(l(this,Lt).subarray(14,18),12),l(this,Lt).set([h-k,u-N],16),isNaN(l(this,Lt)[6])?(l(this,yi).length===0&&(l(this,Lt).set([a+k,c+N],2),l(this,yi).push(NaN,NaN,NaN,NaN,(a+k-s)/r,(c+N-n)/o),l(this,Lt).set([a-k,c-N],14),l(this,un).push(NaN,NaN,NaN,NaN,(a-k-s)/r,(c-N-n)/o)),l(this,Lt).set([C,T,a,c,h,u],6),!this.isEmpty()):(l(this,Lt).set([C,T,a,c,h,u],6),Math.abs(Math.atan2(T-c,C-a)-Math.atan2(w,E))<Math.PI/2?([a,c,h,u]=l(this,Lt).subarray(2,6),l(this,yi).push(NaN,NaN,NaN,NaN,((a+h)/2-s)/r,((c+u)/2-n)/o),[a,c,C,T]=l(this,Lt).subarray(14,18),l(this,un).push(NaN,NaN,NaN,NaN,((C+a)/2-s)/r,((T+c)/2-n)/o),!0):([C,T,a,c,h,u]=l(this,Lt).subarray(0,6),l(this,yi).push(((C+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),[h,u,a,c,C,T]=l(this,Lt).subarray(12,18),l(this,un).push(((C+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,yi),e=l(this,un),s=l(this,Lt).subarray(4,6),n=l(this,Lt).subarray(16,18),[r,o,a,c]=l(this,_i),[h,u,f,p]=y(this,Dh,cg).call(this);if(isNaN(l(this,Lt)[6])&&!this.isEmpty())return`M${(l(this,Lt)[2]-r)/a} ${(l(this,Lt)[3]-o)/c} L${(l(this,Lt)[4]-r)/a} ${(l(this,Lt)[5]-o)/c} L${h} ${u} L${f} ${p} L${(l(this,Lt)[16]-r)/a} ${(l(this,Lt)[17]-o)/c} L${(l(this,Lt)[14]-r)/a} ${(l(this,Lt)[15]-o)/c} Z`;const g=[];g.push(`M${t[4]} ${t[5]}`);for(let m=6;m<t.length;m+=6)isNaN(t[m])?g.push(`L${t[m+4]} ${t[m+5]}`):g.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);g.push(`L${(s[0]-r)/a} ${(s[1]-o)/c} L${h} ${u} L${f} ${p} L${(n[0]-r)/a} ${(n[1]-o)/c}`);for(let m=e.length-6;m>=6;m-=6)isNaN(e[m])?g.push(`L${e[m+4]} ${e[m+5]}`):g.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);return g.push(`L${e[4]} ${e[5]} Z`),g.join(" ")}getOutlines(){var w;const t=l(this,yi),e=l(this,un),s=l(this,Lt),n=s.subarray(4,6),r=s.subarray(16,18),[o,a,c,h]=l(this,_i),u=new Float64Array((((w=l(this,Zn))==null?void 0:w.length)??0)+2);for(let C=0,T=u.length-2;C<T;C+=2)u[C]=(l(this,Zn)[C]-o)/c,u[C+1]=(l(this,Zn)[C+1]-a)/h;u[u.length-2]=(l(this,yo)-o)/c,u[u.length-1]=(l(this,Ao)-a)/h;const[f,p,g,m]=y(this,Dh,cg).call(this);if(isNaN(s[6])&&!this.isEmpty()){const C=new Float64Array(36);return C.set([NaN,NaN,NaN,NaN,(s[2]-o)/c,(s[3]-a)/h,NaN,NaN,NaN,NaN,(s[4]-o)/c,(s[5]-a)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(s[16]-o)/c,(s[17]-a)/h,NaN,NaN,NaN,NaN,(s[14]-o)/c,(s[15]-a)/h],0),new hg(C,u,l(this,_i),l(this,il),l(this,el),l(this,sl))}const v=new Float64Array(l(this,yi).length+24+l(this,un).length);let E=t.length;for(let C=0;C<E;C+=2){if(isNaN(t[C])){v[C]=v[C+1]=NaN;continue}v[C]=t[C],v[C+1]=t[C+1]}v.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-a)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-a)/h],E),E+=24;for(let C=e.length-6;C>=6;C-=6)for(let T=0;T<6;T+=2){if(isNaN(e[C+T])){v[E]=v[E+1]=NaN,E+=2;continue}v[E]=e[C+T],v[E+1]=e[C+T+1],E+=2}return v.set([NaN,NaN,NaN,NaN,e[4],e[5]],E),new hg(v,u,l(this,_i),l(this,il),l(this,el),l(this,sl))}};_i=new WeakMap,un=new WeakMap,el=new WeakMap,sl=new WeakMap,yi=new WeakMap,Lt=new WeakMap,yo=new WeakMap,Ao=new WeakMap,Mh=new WeakMap,Ih=new WeakMap,il=new WeakMap,nl=new WeakMap,Zn=new WeakMap,Oh=new WeakMap,$d=new WeakMap,Bd=new WeakMap,Dh=new WeakSet,cg=function(){const t=l(this,Lt).subarray(4,6),e=l(this,Lt).subarray(16,18),[s,n,r,o]=l(this,_i);return[(l(this,yo)+(t[0]-e[0])/2-s)/r,(l(this,Ao)+(t[1]-e[1])/2-n)/o,(l(this,yo)+(e[0]-t[0])/2-s)/r,(l(this,Ao)+(e[1]-t[1])/2-n)/o]},A(Gi,Oh,8),A(Gi,$d,2),A(Gi,Bd,l(Gi,Oh)+l(Gi,$d));let yd=Gi;var rl,wo,dn,Fh,bs,Nh,ae,is,ql,Xl,UA;class hg extends zA{constructor(e,s,n,r,o,a){super();A(this,is);A(this,rl);A(this,wo,null);A(this,dn);A(this,Fh);A(this,bs);A(this,Nh);A(this,ae);_(this,ae,e),_(this,bs,s),_(this,rl,n),_(this,Nh,r),_(this,dn,o),_(this,Fh,a),y(this,is,UA).call(this,a);const{x:c,y:h,width:u,height:f}=l(this,wo);for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-c)/u,e[p+1]=(e[p+1]-h)/f;for(let p=0,g=s.length;p<g;p+=2)s[p]=(s[p]-c)/u,s[p+1]=(s[p+1]-h)/f}toSVGPath(){const e=[`M${l(this,ae)[4]} ${l(this,ae)[5]}`];for(let s=6,n=l(this,ae).length;s<n;s+=6){if(isNaN(l(this,ae)[s])){e.push(`L${l(this,ae)[s+4]} ${l(this,ae)[s+5]}`);continue}e.push(`C${l(this,ae)[s]} ${l(this,ae)[s+1]} ${l(this,ae)[s+2]} ${l(this,ae)[s+3]} ${l(this,ae)[s+4]} ${l(this,ae)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,n,r],o){const a=n-e,c=r-s;let h,u;switch(o){case 0:h=y(this,is,ql).call(this,l(this,ae),e,r,a,-c),u=y(this,is,ql).call(this,l(this,bs),e,r,a,-c);break;case 90:h=y(this,is,Xl).call(this,l(this,ae),e,s,a,c),u=y(this,is,Xl).call(this,l(this,bs),e,s,a,c);break;case 180:h=y(this,is,ql).call(this,l(this,ae),n,s,-a,c),u=y(this,is,ql).call(this,l(this,bs),n,s,-a,c);break;case 270:h=y(this,is,Xl).call(this,l(this,ae),n,r,-a,-c),u=y(this,is,Xl).call(this,l(this,bs),n,r,-a,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return l(this,wo)}getNewOutline(e,s){const{x:n,y:r,width:o,height:a}=l(this,wo),[c,h,u,f]=l(this,rl),p=o*u,g=a*f,m=n*u+c,v=r*f+h,E=new yd({x:l(this,bs)[0]*p+m,y:l(this,bs)[1]*g+v},l(this,rl),l(this,Nh),e,l(this,Fh),s??l(this,dn));for(let w=2;w<l(this,bs).length;w+=2)E.add({x:l(this,bs)[w]*p+m,y:l(this,bs)[w+1]*g+v});return E.getOutlines()}}rl=new WeakMap,wo=new WeakMap,dn=new WeakMap,Fh=new WeakMap,bs=new WeakMap,Nh=new WeakMap,ae=new WeakMap,is=new WeakSet,ql=function(e,s,n,r,o){const a=new Float64Array(e.length);for(let c=0,h=e.length;c<h;c+=2)a[c]=s+e[c]*r,a[c+1]=n+e[c+1]*o;return a},Xl=function(e,s,n,r,o){const a=new Float64Array(e.length);for(let c=0,h=e.length;c<h;c+=2)a[c]=s+e[c+1]*r,a[c+1]=n+e[c]*o;return a},UA=function(e){const s=l(this,ae);let n=s[4],r=s[5],o=n,a=r,c=n,h=r,u=n,f=r;const p=e?Math.max:Math.min;for(let w=6,C=s.length;w<C;w+=6){if(isNaN(s[w]))o=Math.min(o,s[w+4]),a=Math.min(a,s[w+5]),c=Math.max(c,s[w+4]),h=Math.max(h,s[w+5]),f<s[w+5]?(u=s[w+4],f=s[w+5]):f===s[w+5]&&(u=p(u,s[w+4]));else{const T=ct.bezierBoundingBox(n,r,...s.slice(w,w+6));o=Math.min(o,T[0]),a=Math.min(a,T[1]),c=Math.max(c,T[2]),h=Math.max(h,T[3]),f<T[3]?(u=T[2],f=T[3]):f===T[3]&&(u=p(u,T[2]))}n=s[w+4],r=s[w+5]}const g=o-l(this,dn),m=a-l(this,dn),v=c-o+2*l(this,dn),E=h-a+2*l(this,dn);_(this,wo,{x:g,y:m,width:v,height:E,lastPoint:[u,f]})};var Hh,$h,ei,Eo,ol,fe,Bh,al,jh,zh,si,ll,qt,ug,dg,WA,Mr,VA,On;const qi=class qi{constructor({editor:t=null,uiManager:e=null}){A(this,qt);A(this,Hh,y(this,qt,WA).bind(this));A(this,$h,y(this,qt,VA).bind(this));A(this,ei,null);A(this,Eo,null);A(this,ol);A(this,fe,null);A(this,Bh,!1);A(this,al,!1);A(this,jh,null);A(this,zh);A(this,si,null);A(this,ll);var s;t?(_(this,al,!1),_(this,ll,bt.HIGHLIGHT_COLOR),_(this,jh,t)):(_(this,al,!0),_(this,ll,bt.HIGHLIGHT_DEFAULT_COLOR)),_(this,si,(t==null?void 0:t._uiManager)||e),_(this,zh,l(this,si)._eventBus),_(this,ol,(t==null?void 0:t.color)||((s=l(this,si))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Mt(this,"_keyboardManager",new nu([[["Escape","mac+Escape"],qi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],qi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],qi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],qi.prototype._moveToPrevious],[["Home","mac+Home"],qi.prototype._moveToBeginning],[["End","mac+End"],qi.prototype._moveToEnd]]))}renderButton(){const t=_(this,ei,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=l(this,si)._signal;t.addEventListener("click",y(this,qt,Mr).bind(this),{signal:e}),t.addEventListener("keydown",l(this,Hh),{signal:e});const s=_(this,Eo,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,ol),t.append(s),t}renderMainDropdown(){const t=_(this,fe,y(this,qt,ug).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,ei)){y(this,qt,Mr).call(this,t);return}const e=t.target.getAttribute("data-color");e&&y(this,qt,dg).call(this,e,t)}_moveToNext(t){var e,s;if(!l(this,qt,On)){y(this,qt,Mr).call(this,t);return}if(t.target===l(this,ei)){(e=l(this,fe).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=l(this,fe))==null?void 0:e.firstChild)||t.target===l(this,ei)){l(this,qt,On)&&this._hideDropdownFromKeyboard();return}l(this,qt,On)||y(this,qt,Mr).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!l(this,qt,On)){y(this,qt,Mr).call(this,t);return}(e=l(this,fe).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,qt,On)){y(this,qt,Mr).call(this,t);return}(e=l(this,fe).lastChild)==null||e.focus()}hideDropdown(){var t;(t=l(this,fe))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",l(this,$h))}_hideDropdownFromKeyboard(){var t;if(!l(this,al)){if(!l(this,qt,On)){(t=l(this,jh))==null||t.unselect();return}this.hideDropdown(),l(this,ei).focus({preventScroll:!0,focusVisible:l(this,Bh)})}}updateColor(t){if(l(this,Eo)&&(l(this,Eo).style.backgroundColor=t),!l(this,fe))return;const e=l(this,si).highlightColors.values();for(const s of l(this,fe).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=l(this,ei))==null||t.remove(),_(this,ei,null),_(this,Eo,null),(e=l(this,fe))==null||e.remove(),_(this,fe,null)}};Hh=new WeakMap,$h=new WeakMap,ei=new WeakMap,Eo=new WeakMap,ol=new WeakMap,fe=new WeakMap,Bh=new WeakMap,al=new WeakMap,jh=new WeakMap,zh=new WeakMap,si=new WeakMap,ll=new WeakMap,qt=new WeakSet,ug=function(){const t=document.createElement("div"),e=l(this,si)._signal;t.addEventListener("contextmenu",ns,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of l(this,si).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${s}`);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=n,r.setAttribute("aria-selected",n===l(this,ol)),r.addEventListener("click",y(this,qt,dg).bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",l(this,Hh),{signal:e}),t},dg=function(t,e){e.stopPropagation(),l(this,zh).dispatch("switchannotationeditorparams",{source:this,type:l(this,ll),value:t})},WA=function(t){qi._keyboardManager.exec(this,t)},Mr=function(t){if(l(this,qt,On)){this.hideDropdown();return}if(_(this,Bh,t.detail===0),window.addEventListener("pointerdown",l(this,$h),{signal:l(this,si)._signal}),l(this,fe)){l(this,fe).classList.remove("hidden");return}const e=_(this,fe,y(this,qt,ug).call(this));l(this,ei).append(e)},VA=function(t){var e;(e=l(this,fe))!=null&&e.contains(t.target)||this.hideDropdown()},On=function(){return l(this,fe)&&!l(this,fe).classList.contains("hidden")};let Ad=qi;var cl,Uh,tr,So,hl,Is,Wh,Vh,Co,ii,We,vs,jd,ul,xo,pe,dl,Ai,Gh,Pt,fg,pg,GA,qA,XA,gg,Kl,Ns,da,KA,sd,Yl,YA,QA,JA,ZA;const Nt=class Nt extends $t{constructor(e){super({...e,name:"highlightEditor"});A(this,Pt);A(this,cl,null);A(this,Uh,0);A(this,tr);A(this,So,null);A(this,hl,null);A(this,Is,null);A(this,Wh,null);A(this,Vh,0);A(this,Co,null);A(this,ii,null);A(this,We,null);A(this,vs,!1);A(this,jd,y(this,Pt,KA).bind(this));A(this,ul,null);A(this,xo);A(this,pe,null);A(this,dl,"");A(this,Ai);A(this,Gh,"");this.color=e.color||Nt._defaultColor,_(this,Ai,e.thickness||Nt._defaultThickness),_(this,xo,e.opacity||Nt._defaultOpacity),_(this,tr,e.boxes||null),_(this,Gh,e.methodOfCreation||""),_(this,dl,e.text||""),this._isDraggable=!1,e.highlightId>-1?(_(this,vs,!0),y(this,Pt,pg).call(this,e),y(this,Pt,Kl).call(this)):(_(this,cl,e.anchorNode),_(this,Uh,e.anchorOffset),_(this,Wh,e.focusNode),_(this,Vh,e.focusOffset),y(this,Pt,fg).call(this),y(this,Pt,Kl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Nt.prototype;return Mt(this,"_keyboardManager",new nu([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,vs)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Ai),methodOfCreation:l(this,Gh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var n;$t.initialize(e,s),Nt._defaultColor||(Nt._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case bt.HIGHLIGHT_DEFAULT_COLOR:Nt._defaultColor=s;break;case bt.HIGHLIGHT_THICKNESS:Nt._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return l(this,ul)}updateParams(e,s){switch(e){case bt.HIGHLIGHT_COLOR:y(this,Pt,GA).call(this,s);break;case bt.HIGHLIGHT_THICKNESS:y(this,Pt,qA).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[bt.HIGHLIGHT_DEFAULT_COLOR,Nt._defaultColor],[bt.HIGHLIGHT_THICKNESS,Nt._defaultThickness]]}get propertiesToUpdate(){return[[bt.HIGHLIGHT_COLOR,this.color||Nt._defaultColor],[bt.HIGHLIGHT_THICKNESS,l(this,Ai)||Nt._defaultThickness],[bt.HIGHLIGHT_FREE,l(this,vs)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(_(this,hl,new Ad({editor:this})),e.addColorPicker(l(this,hl))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(y(this,Pt,Yl).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,y(this,Pt,Yl).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){y(this,Pt,gg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(y(this,Pt,Kl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?y(this,Pt,gg).call(this):e&&(y(this,Pt,Kl).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,a;const{drawLayer:s}=this.parent;let n;l(this,vs)?(e=(e-this.rotation+360)%360,n=y(r=Nt,Ns,da).call(r,l(this,ii).box,e)):n=y(o=Nt,Ns,da).call(o,this,e),s.rotate(l(this,We),e),s.rotate(l(this,pe),e),s.updateBox(l(this,We),n),s.updateBox(l(this,pe),y(a=Nt,Ns,da).call(a,l(this,Is).box,e))}render(){if(this.div)return this.div;const e=super.render();l(this,dl)&&(e.setAttribute("aria-label",l(this,dl)),e.setAttribute("role","mark")),l(this,vs)?e.classList.add("free"):this.div.addEventListener("keydown",l(this,jd),{signal:this._uiManager._signal});const s=_(this,Co,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,So);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),bd(this,l(this,Co),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(l(this,pe),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(l(this,pe),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:y(this,Pt,sd).call(this,!0);break;case 1:case 3:y(this,Pt,sd).call(this,!1);break}}select(){var e,s;super.select(),l(this,pe)&&((e=this.parent)==null||e.drawLayer.removeClass(l(this,pe),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(l(this,pe),"selected"))}unselect(){var e;super.unselect(),l(this,pe)&&((e=this.parent)==null||e.drawLayer.removeClass(l(this,pe),"selected"),l(this,vs)||y(this,Pt,sd).call(this,!1))}get _mustFixPosition(){return!l(this,vs)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(l(this,We),e),this.parent.drawLayer.show(l(this,pe),e))}static startHighlighting(e,s,{target:n,x:r,y:o}){const{x:a,y:c,width:h,height:u}=n.getBoundingClientRect(),f=E=>{y(this,Ns,JA).call(this,e,E)},p=e._signal,g={capture:!0,passive:!1,signal:p},m=E=>{E.preventDefault(),E.stopPropagation()},v=E=>{n.removeEventListener("pointermove",f),window.removeEventListener("blur",v),window.removeEventListener("pointerup",v),window.removeEventListener("pointerdown",m,g),window.removeEventListener("contextmenu",ns),y(this,Ns,ZA).call(this,e,E)};window.addEventListener("blur",v,{signal:p}),window.addEventListener("pointerup",v,{signal:p}),window.addEventListener("pointerdown",m,g),window.addEventListener("contextmenu",ns,{signal:p}),n.addEventListener("pointermove",f,{signal:p}),this._freeHighlight=new yd({x:r,y:o},[a,c,h,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,s,n){var v;const r=super.deserialize(e,s,n),{rect:[o,a,c,h],color:u,quadPoints:f}=e;r.color=ct.makeHexColor(...u),_(r,xo,e.opacity);const[p,g]=r.pageDimensions;r.width=(c-o)/p,r.height=(h-a)/g;const m=_(r,tr,[]);for(let E=0;E<f.length;E+=8)m.push({x:(f[4]-c)/p,y:(h-(1-f[E+5]))/g,width:(f[E+2]-f[E])/p,height:(f[E+5]-f[E+1])/g});return y(v=r,Pt,fg).call(v),r}serialize(e=!1){if(this.isEmpty()||e)return null;const s=this.getRect(0,0),n=$t._colorManager.convert(this.color);return{annotationType:kt.HIGHLIGHT,color:n,opacity:l(this,xo),thickness:l(this,Ai),quadPoints:y(this,Pt,YA).call(this),outlines:y(this,Pt,QA).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:y(this,Pt,Yl).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};cl=new WeakMap,Uh=new WeakMap,tr=new WeakMap,So=new WeakMap,hl=new WeakMap,Is=new WeakMap,Wh=new WeakMap,Vh=new WeakMap,Co=new WeakMap,ii=new WeakMap,We=new WeakMap,vs=new WeakMap,jd=new WeakMap,ul=new WeakMap,xo=new WeakMap,pe=new WeakMap,dl=new WeakMap,Ai=new WeakMap,Gh=new WeakMap,Pt=new WeakSet,fg=function(){const e=new kv(l(this,tr),.001);_(this,ii,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,ii).box;const s=new kv(l(this,tr),.0025,.001,this._uiManager.direction==="ltr");_(this,Is,s.getOutlines());const{lastPoint:n}=l(this,Is).box;_(this,ul,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},pg=function({highlightOutlines:e,highlightId:s,clipPathId:n}){var f,p;if(_(this,ii,e),_(this,Is,e.getNewOutline(l(this,Ai)/2+1.5,.0025)),s>=0)_(this,We,s),_(this,So,n),this.parent.drawLayer.finalizeLine(s,e),_(this,pe,this.parent.drawLayer.highlightOutline(l(this,Is)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,We),e),this.parent.drawLayer.updateBox(l(this,We),y(f=Nt,Ns,da).call(f,l(this,ii).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,pe),l(this,Is)),this.parent.drawLayer.updateBox(l(this,pe),y(p=Nt,Ns,da).call(p,l(this,Is).box,g))}const{x:o,y:a,width:c,height:h}=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=h;break;case 90:{const[g,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/g,this.height=h*g/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=h;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/g,this.height=h*g/m;break}}const{lastPoint:u}=l(this,Is).box;_(this,ul,[(u[0]-o)/c,(u[1]-a)/h])},GA=function(e){const s=r=>{var o,a;this.color=r,(o=this.parent)==null||o.drawLayer.changeColor(l(this,We),r),(a=l(this,hl))==null||a.updateColor(r)},n=this.color;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},qA=function(e){const s=l(this,Ai),n=r=>{_(this,Ai,r),y(this,Pt,XA).call(this,r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},XA=function(e){if(!l(this,vs))return;y(this,Pt,pg).call(this,{highlightOutlines:l(this,ii).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},gg=function(){l(this,We)===null||!this.parent||(this.parent.drawLayer.remove(l(this,We)),_(this,We,null),this.parent.drawLayer.remove(l(this,pe)),_(this,pe,null))},Kl=function(e=this.parent){l(this,We)===null&&({id:cs(this,We)._,clipPathId:cs(this,So)._}=e.drawLayer.highlight(l(this,ii),this.color,l(this,xo)),_(this,pe,e.drawLayer.highlightOutline(l(this,Is))),l(this,Co)&&(l(this,Co).style.clipPath=l(this,So)))},Ns=new WeakSet,da=function({x:e,y:s,width:n,height:r},o){switch(o){case 90:return{x:1-s-r,y:e,width:r,height:n};case 180:return{x:1-e-n,y:1-s-r,width:n,height:r};case 270:return{x:s,y:1-e-n,width:r,height:n}}return{x:e,y:s,width:n,height:r}},KA=function(e){Nt._keyboardManager.exec(this,e)},sd=function(e){if(!l(this,cl))return;const s=window.getSelection();e?s.setPosition(l(this,cl),l(this,Uh)):s.setPosition(l(this,Wh),l(this,Vh))},Yl=function(){return l(this,vs)?this.rotation:0},YA=function(){if(l(this,vs))return null;const[e,s]=this.pageDimensions,[n,r]=this.pageTranslation,o=l(this,tr),a=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:f,height:p}of o){const g=h*e+n,m=(1-u-p)*s+r;a[c]=a[c+4]=g,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=g+f*e,a[c+5]=a[c+7]=m+p*s,c+=8}return a},QA=function(e){return l(this,ii).serialize(e,y(this,Pt,Yl).call(this))},JA=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},ZA=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},A(Nt,Ns),_t(Nt,"_defaultColor",null),_t(Nt,"_defaultOpacity",1),_t(Nt,"_defaultThickness",12),_t(Nt,"_l10nPromise"),_t(Nt,"_type","highlight"),_t(Nt,"_editorType",kt.HIGHLIGHT),_t(Nt,"_freeHighlightId",-1),_t(Nt,"_freeHighlight",null),_t(Nt,"_freeHighlightClipId","");let wd=Nt;var To,Po,qh,Xh,Kh,Ro,wi,fn,Os,Lo,ko,pn,Mo,Io,er,et,tw,ew,sw,iw,bg,nw,vg,rw,ow,aw,lw,cw,Ir,_g,id,nd,fa,yg,rd,Tn,hw,Ag,uw,dw,wg,od,Ql;const ee=class ee extends $t{constructor(e){super({...e,name:"inkEditor"});A(this,et);A(this,To,0);A(this,Po,0);A(this,qh,this.canvasPointermove.bind(this));A(this,Xh,this.canvasPointerleave.bind(this));A(this,Kh,this.canvasPointerup.bind(this));A(this,Ro,this.canvasPointerdown.bind(this));A(this,wi,null);A(this,fn,new Path2D);A(this,Os,!1);A(this,Lo,!1);A(this,ko,!1);A(this,pn,null);A(this,Mo,0);A(this,Io,0);A(this,er,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,s){$t.initialize(e,s)}static updateDefaultParams(e,s){switch(e){case bt.INK_THICKNESS:ee._defaultThickness=s;break;case bt.INK_COLOR:ee._defaultColor=s;break;case bt.INK_OPACITY:ee._defaultOpacity=s/100;break}}updateParams(e,s){switch(e){case bt.INK_THICKNESS:y(this,et,tw).call(this,s);break;case bt.INK_COLOR:y(this,et,ew).call(this,s);break;case bt.INK_OPACITY:y(this,et,sw).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[bt.INK_THICKNESS,ee._defaultThickness],[bt.INK_COLOR,ee._defaultColor||$t._defaultLineColor],[bt.INK_OPACITY,Math.round(ee._defaultOpacity*100)]]}get propertiesToUpdate(){return[[bt.INK_THICKNESS,this.thickness||ee._defaultThickness],[bt.INK_COLOR,this.color||ee._defaultColor||$t._defaultLineColor],[bt.INK_OPACITY,Math.round(100*(this.opacity??ee._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(y(this,et,id).call(this),y(this,et,nd).call(this)),this.isAttachedToDOM||(this.parent.add(this),y(this,et,fa).call(this)),y(this,et,Ql).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,wi)&&(clearTimeout(l(this,wi)),_(this,wi,null)),(e=l(this,pn))==null||e.disconnect(),_(this,pn,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,s]=this.parentDimensions,n=this.width*e,r=this.height*s;this.setDimensions(n,r)}enableEditMode(){l(this,Os)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",l(this,Ro),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,Ro)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,Os)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_(this,Os,!0),this.div.classList.add("disabled"),y(this,et,Ql).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||l(this,Os)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),y(this,et,nw).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),y(this,et,vg).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),y(this,et,_g).call(this,e)}canvasPointerleave(e){y(this,et,_g).call(this,e)}get isResizable(){return!this.isEmpty()&&l(this,Os)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,r,o,a]=y(this,et,iw).call(this);if(this.setAt(n,r,0,0),this.setDims(o,a),y(this,et,id).call(this),this.width){const[c,h]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*h),this.setAt(e*c,s*h,this.width*c,this.height*h),_(this,ko,!0),y(this,et,fa).call(this),this.setDims(this.width*c,this.height*h),y(this,et,Ir).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return y(this,et,nd).call(this),this.div}setDimensions(e,s){const n=Math.round(e),r=Math.round(s);if(l(this,Mo)===n&&l(this,Io)===r)return;_(this,Mo,n),_(this,Io,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=e/o,this.height=s/a,this.fixAndSetPosition(),l(this,Os)&&y(this,et,yg).call(this,e,s),y(this,et,fa).call(this),y(this,et,Ir).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,s,n){var E,w,C;if(e instanceof kA)return null;const r=super.deserialize(e,s,n);r.thickness=e.thickness,r.color=ct.makeHexColor(...e.color),r.opacity=e.opacity;const[o,a]=r.pageDimensions,c=r.width*o,h=r.height*a,u=r.parentScale,f=e.thickness/2;_(r,Os,!0),_(r,Mo,Math.round(c)),_(r,Io,Math.round(h));const{paths:p,rect:g,rotation:m}=e;for(let{bezier:T}of p){T=y(E=ee,Tn,uw).call(E,T,g,m);const L=[];r.paths.push(L);let M=u*(T[0]-f),k=u*(T[1]-f);for(let W=2,tt=T.length;W<tt;W+=6){const nt=u*(T[W]-f),J=u*(T[W+1]-f),pt=u*(T[W+2]-f),ht=u*(T[W+3]-f),wt=u*(T[W+4]-f),At=u*(T[W+5]-f);L.push([[M,k],[nt,J],[pt,ht],[wt,At]]),M=wt,k=At}const N=y(this,Tn,hw).call(this,L);r.bezierPath2D.push(N)}const v=y(w=r,et,wg).call(w);return _(r,Po,Math.max($t.MIN_SIZE,v[2]-v[0])),_(r,To,Math.max($t.MIN_SIZE,v[3]-v[1])),y(C=r,et,yg).call(C,c,h),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),s=$t._colorManager.convert(this.ctx.strokeStyle);return{annotationType:kt.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:y(this,et,dw).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};To=new WeakMap,Po=new WeakMap,qh=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Ro=new WeakMap,wi=new WeakMap,fn=new WeakMap,Os=new WeakMap,Lo=new WeakMap,ko=new WeakMap,pn=new WeakMap,Mo=new WeakMap,Io=new WeakMap,er=new WeakMap,et=new WeakSet,tw=function(e){const s=r=>{this.thickness=r,y(this,et,Ql).call(this)},n=this.thickness;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},ew=function(e){const s=r=>{this.color=r,y(this,et,Ir).call(this)},n=this.color;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sw=function(e){const s=r=>{this.opacity=r,y(this,et,Ir).call(this)};e/=100;const n=this.opacity;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:bt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},iw=function(){const{parentRotation:e,parentDimensions:[s,n]}=this;switch(e){case 90:return[0,n,n,s];case 180:return[s,n,s,n];case 270:return[s,0,n,s];default:return[0,0,s,n]}},bg=function(){const{ctx:e,color:s,opacity:n,thickness:r,parentScale:o,scaleFactor:a}=this;e.lineWidth=r*o/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${s}${f1(n)}`},nw=function(e,s){const n=this._uiManager._signal;this.canvas.addEventListener("contextmenu",ns,{signal:n}),this.canvas.addEventListener("pointerleave",l(this,Xh),{signal:n}),this.canvas.addEventListener("pointermove",l(this,qh),{signal:n}),this.canvas.addEventListener("pointerup",l(this,Kh),{signal:n}),this.canvas.removeEventListener("pointerdown",l(this,Ro)),this.isEditing=!0,l(this,ko)||(_(this,ko,!0),y(this,et,fa).call(this),this.thickness||(this.thickness=ee._defaultThickness),this.color||(this.color=ee._defaultColor||$t._defaultLineColor),this.opacity??(this.opacity=ee._defaultOpacity)),this.currentPath.push([e,s]),_(this,Lo,!1),y(this,et,bg).call(this),_(this,er,()=>{y(this,et,aw).call(this),l(this,er)&&window.requestAnimationFrame(l(this,er))}),window.requestAnimationFrame(l(this,er))},vg=function(e,s){const[n,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&s===r)return;const o=this.currentPath;let a=l(this,fn);if(o.push([e,s]),_(this,Lo,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(e,s);return}o.length===3&&(_(this,fn,a=new Path2D),a.moveTo(...o[0])),y(this,et,lw).call(this,a,...o.at(-3),...o.at(-2),e,s)},rw=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);l(this,fn).lineTo(...e)},ow=function(e,s){_(this,er,null),e=Math.min(Math.max(e,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),y(this,et,vg).call(this,e,s),y(this,et,rw).call(this);let n;if(this.currentPath.length!==1)n=y(this,et,cw).call(this);else{const h=[e,s];n=[[h,h.slice(),h.slice(),h]]}const r=l(this,fn),o=this.currentPath;this.currentPath=[],_(this,fn,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(n),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(y(this,et,id).call(this),y(this,et,nd).call(this)),y(this,et,Ql).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},aw=function(){if(!l(this,Lo))return;_(this,Lo,!1);const e=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),n=s.map(a=>a[0]),r=s.map(a=>a[1]);Math.min(...n)-e,Math.max(...n)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(l(this,fn)),o.restore()},lw=function(e,s,n,r,o,a,c){const h=(s+r)/2,u=(n+o)/2,f=(r+a)/2,p=(o+c)/2;e.bezierCurveTo(h+2*(r-h)/3,u+2*(o-u)/3,f+2*(r-f)/3,p+2*(o-p)/3,f,p)},cw=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const s=[];let n,[r,o]=e[0];for(n=1;n<e.length-2;n++){const[g,m]=e[n],[v,E]=e[n+1],w=(g+v)/2,C=(m+E)/2,T=[r+2*(g-r)/3,o+2*(m-o)/3],L=[w+2*(g-w)/3,C+2*(m-C)/3];s.push([[r,o],T,L,[w,C]]),[r,o]=[w,C]}const[a,c]=e[n],[h,u]=e[n+1],f=[r+2*(a-r)/3,o+2*(c-o)/3],p=[h+2*(a-h)/3,u+2*(c-u)/3];return s.push([[r,o],f,p,[h,u]]),s},Ir=function(){if(this.isEmpty()){y(this,et,rd).call(this);return}y(this,et,bg).call(this);const{canvas:e,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,e.width,e.height),y(this,et,rd).call(this);for(const n of this.bezierPath2D)s.stroke(n)},_g=function(e){this.canvas.removeEventListener("pointerleave",l(this,Xh)),this.canvas.removeEventListener("pointermove",l(this,qh)),this.canvas.removeEventListener("pointerup",l(this,Kh)),this.canvas.addEventListener("pointerdown",l(this,Ro),{signal:this._uiManager._signal}),l(this,wi)&&clearTimeout(l(this,wi)),_(this,wi,setTimeout(()=>{_(this,wi,null),this.canvas.removeEventListener("contextmenu",ns)},10)),y(this,et,ow).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},id=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},nd=function(){_(this,pn,new ResizeObserver(e=>{const s=e[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),l(this,pn).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=l(this,pn))==null||e.disconnect(),_(this,pn,null)},{once:!0})},fa=function(){if(!l(this,ko))return;const[e,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*s),y(this,et,rd).call(this)},yg=function(e,s){const n=y(this,et,od).call(this),r=(e-n)/l(this,Po),o=(s-n)/l(this,To);this.scaleFactor=Math.min(r,o)},rd=function(){const e=y(this,et,od).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Tn=new WeakSet,hw=function(e){const s=new Path2D;for(let n=0,r=e.length;n<r;n++){const[o,a,c,h]=e[n];n===0&&s.moveTo(...o),s.bezierCurveTo(a[0],a[1],c[0],c[1],h[0],h[1])}return s},Ag=function(e,s,n){const[r,o,a,c]=s;switch(n){case 0:for(let h=0,u=e.length;h<u;h+=2)e[h]+=r,e[h+1]=c-e[h+1];break;case 90:for(let h=0,u=e.length;h<u;h+=2){const f=e[h];e[h]=e[h+1]+r,e[h+1]=f+o}break;case 180:for(let h=0,u=e.length;h<u;h+=2)e[h]=a-e[h],e[h+1]+=o;break;case 270:for(let h=0,u=e.length;h<u;h+=2){const f=e[h];e[h]=a-e[h+1],e[h+1]=c-f}break;default:throw new Error("Invalid rotation")}return e},uw=function(e,s,n){const[r,o,a,c]=s;switch(n){case 0:for(let h=0,u=e.length;h<u;h+=2)e[h]-=r,e[h+1]=c-e[h+1];break;case 90:for(let h=0,u=e.length;h<u;h+=2){const f=e[h];e[h]=e[h+1]-o,e[h+1]=f-r}break;case 180:for(let h=0,u=e.length;h<u;h+=2)e[h]=a-e[h],e[h+1]-=o;break;case 270:for(let h=0,u=e.length;h<u;h+=2){const f=e[h];e[h]=c-e[h+1],e[h+1]=a-f}break;default:throw new Error("Invalid rotation")}return e},dw=function(e,s,n,r){var u,f;const o=[],a=this.thickness/2,c=e*s+a,h=e*n+a;for(const p of this.paths){const g=[],m=[];for(let v=0,E=p.length;v<E;v++){const[w,C,T,L]=p[v];if(w[0]===L[0]&&w[1]===L[1]&&E===1){const ht=e*w[0]+c,wt=e*w[1]+h;g.push(ht,wt),m.push(ht,wt);break}const M=e*w[0]+c,k=e*w[1]+h,N=e*C[0]+c,W=e*C[1]+h,tt=e*T[0]+c,nt=e*T[1]+h,J=e*L[0]+c,pt=e*L[1]+h;v===0&&(g.push(M,k),m.push(M,k)),g.push(N,W,tt,nt,J,pt),m.push(N,W),v===E-1&&m.push(J,pt)}o.push({bezier:y(u=ee,Tn,Ag).call(u,g,r,this.rotation),points:y(f=ee,Tn,Ag).call(f,m,r,this.rotation)})}return o},wg=function(){let e=1/0,s=-1/0,n=1/0,r=-1/0;for(const o of this.paths)for(const[a,c,h,u]of o){const f=ct.bezierBoundingBox(...a,...c,...h,...u);e=Math.min(e,f[0]),n=Math.min(n,f[1]),s=Math.max(s,f[2]),r=Math.max(r,f[3])}return[e,n,s,r]},od=function(){return l(this,Os)?Math.ceil(this.thickness*this.parentScale):0},Ql=function(e=!1){if(this.isEmpty())return;if(!l(this,Os)){y(this,et,Ir).call(this);return}const s=y(this,et,wg).call(this),n=y(this,et,od).call(this);_(this,Po,Math.max($t.MIN_SIZE,s[2]-s[0])),_(this,To,Math.max($t.MIN_SIZE,s[3]-s[1]));const r=Math.ceil(n+l(this,Po)*this.scaleFactor),o=Math.ceil(n+l(this,To)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=r/a,this.height=o/c,this.setAspectRatio(r,o);const h=this.translationX,u=this.translationY;this.translationX=-s[0],this.translationY=-s[1],y(this,et,fa).call(this),y(this,et,Ir).call(this),_(this,Mo,r),_(this,Io,o),this.setDims(r,o);const f=e?n/this.scaleFactor/2:0;this.translate(h-this.translationX-f,u-this.translationY-f)},A(ee,Tn),_t(ee,"_defaultColor",null),_t(ee,"_defaultOpacity",1),_t(ee,"_defaultThickness",1),_t(ee,"_type","ink"),_t(ee,"_editorType",kt.INK);let mg=ee;var xe,Te,sr,gn,ir,fl,Ei,Yh,mn,Si,ni,Qh,It,Jl,Zl,ad,Sg,fw,pw,gw,Cg,ld,mw;const uc=class uc extends $t{constructor(e){super({...e,name:"stampEditor"});A(this,It);A(this,xe,null);A(this,Te,null);A(this,sr,null);A(this,gn,null);A(this,ir,null);A(this,fl,"");A(this,Ei,null);A(this,Yh,!1);A(this,mn,null);A(this,Si,null);A(this,ni,!1);A(this,Qh,!1);_(this,gn,e.bitmapUrl),_(this,ir,e.bitmapFile)}static initialize(e,s){$t.initialize(e,s)}static get supportedTypes(){return Mt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return Mt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,s){s.pasteEditor(kt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,s;l(this,Te)&&(_(this,xe,null),this._uiManager.imageManager.deleteId(l(this,Te)),(e=l(this,Ei))==null||e.remove(),_(this,Ei,null),(s=l(this,mn))==null||s.disconnect(),_(this,mn,null),l(this,Si)&&(clearTimeout(l(this,Si)),_(this,Si,null))),super.remove()}rebuild(){if(!this.parent){l(this,Te)&&y(this,It,ad).call(this);return}super.rebuild(),this.div!==null&&(l(this,Te)&&l(this,Ei)===null&&y(this,It,ad).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,sr)||l(this,xe)||l(this,gn)||l(this,ir)||l(this,Te))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;if(this.width&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,xe)?y(this,It,Sg).call(this):y(this,It,ad).call(this),this.width){const[n,r]=this.parentDimensions;this.setAt(e*n,s*r,this.width*n,this.height*r)}return this.div}getImageForAltText(){return l(this,Ei)}static deserialize(e,s,n){if(e instanceof MA)return null;const r=super.deserialize(e,s,n),{rect:o,bitmapUrl:a,bitmapId:c,isSvg:h,accessibilityData:u}=e;c&&n.imageManager.isValidId(c)?_(r,Te,c):_(r,gn,a),_(r,ni,h);const[f,p]=r.pageDimensions;return r.width=(o[2]-o[0])/f,r.height=(o[3]-o[1])/p,u&&(r.altTextData=u),r}serialize(e=!1,s=null){if(this.isEmpty())return null;const n={annotationType:kt.STAMP,bitmapId:l(this,Te),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,ni),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=y(this,It,ld).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:r,altText:o}=this.altTextData;if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),s===null)return n;s.stamps||(s.stamps=new Map);const a=l(this,ni)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(l(this,Te)))s.stamps.set(l(this,Te),{area:a,serialized:n}),n.bitmap=y(this,It,ld).call(this,!1);else if(l(this,ni)){const c=s.stamps.get(l(this,Te));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=y(this,It,ld).call(this,!1))}return n}};xe=new WeakMap,Te=new WeakMap,sr=new WeakMap,gn=new WeakMap,ir=new WeakMap,fl=new WeakMap,Ei=new WeakMap,Yh=new WeakMap,mn=new WeakMap,Si=new WeakMap,ni=new WeakMap,Qh=new WeakMap,It=new WeakSet,Jl=function(e,s=!1){if(!e){this.remove();return}_(this,xe,e.bitmap),s||(_(this,Te,e.id),_(this,ni,e.isSvg)),e.file&&_(this,fl,e.file.name),y(this,It,Sg).call(this)},Zl=function(){_(this,sr,null),this._uiManager.enableWaiting(!1),l(this,Ei)&&this.div.focus()},ad=function(){if(l(this,Te)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Te)).then(n=>y(this,It,Jl).call(this,n,!0)).finally(()=>y(this,It,Zl).call(this));return}if(l(this,gn)){const n=l(this,gn);_(this,gn,null),this._uiManager.enableWaiting(!0),_(this,sr,this._uiManager.imageManager.getFromUrl(n).then(r=>y(this,It,Jl).call(this,r)).finally(()=>y(this,It,Zl).call(this)));return}if(l(this,ir)){const n=l(this,ir);_(this,ir,null),this._uiManager.enableWaiting(!0),_(this,sr,this._uiManager.imageManager.getFromFile(n).then(r=>y(this,It,Jl).call(this,r)).finally(()=>y(this,It,Zl).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=uc.supportedTypesStr;const s=this._uiManager._signal;_(this,sr,new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);y(this,It,Jl).call(this,r)}n()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>y(this,It,Zl).call(this))),e.click()},Sg=function(){const{div:e}=this;let{width:s,height:n}=l(this,xe);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,n=this.height*o;else if(s>a*r||n>a*o){const f=Math.min(a*r/s,a*o/n);s*=f,n*=f}const[c,h]=this.parentDimensions;this.setDims(s*c/r,n*h/o),this._uiManager.enableWaiting(!1);const u=_(this,Ei,document.createElement("canvas"));e.append(u),e.hidden=!1,y(this,It,Cg).call(this,s,n),y(this,It,mw).call(this),l(this,Qh)||(this.parent.addUndoableEditor(this),_(this,Qh,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,fl)&&u.setAttribute("aria-label",l(this,fl))},fw=function(e,s){var a;const[n,r]=this.parentDimensions;this.width=e/n,this.height=s/r,this.setDims(e,s),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,Si)!==null&&clearTimeout(l(this,Si)),_(this,Si,setTimeout(()=>{_(this,Si,null),y(this,It,Cg).call(this,e,s)},200))},pw=function(e,s){const{width:n,height:r}=l(this,xe);let o=n,a=r,c=l(this,xe);for(;o>2*e||a>2*s;){const h=o,u=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(c,0,0,h,u,0,0,o,a),c=f.transferToImageBitmap()}return c},gw=async function(e,s,n){if(l(this,Yh)||(_(this,Yh,!0),!await this._uiManager.isMLEnabledFor("altText")||this.hasAltText()))return;const a=new OffscreenCanvas(s,n).getContext("2d",{willReadFrequently:!0});a.drawImage(e,0,0,e.width,e.height,0,0,s,n);const c=await this._uiManager.mlGuess({service:"moz-image-to-text",request:{data:a.getImageData(0,0,s,n).data,width:s,height:n,channels:4}}),h=(c==null?void 0:c.output)||"";this.parent&&h&&!this.hasAltText()&&(this.altTextData={altText:h,decorative:!1})},Cg=function(e,s){e=Math.ceil(e),s=Math.ceil(s);const n=l(this,Ei);if(!n||n.width===e&&n.height===s)return;n.width=e,n.height=s;const r=l(this,ni)?l(this,xe):y(this,It,pw).call(this,e,s);y(this,It,gw).call(this,r,e,s);const o=n.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(r,0,0,r.width,r.height,0,0,e,s)},ld=function(e){if(e){if(l(this,ni)){const r=this._uiManager.imageManager.getSvgUrl(l(this,Te));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,xe),s.getContext("2d").drawImage(l(this,xe),0,0),s.toDataURL()}if(l(this,ni)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*hr.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*hr.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,xe),0,0,l(this,xe).width,l(this,xe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,xe))},mw=function(){this._uiManager._signal&&(_(this,mn,new ResizeObserver(e=>{const s=e[0].contentRect;s.width&&s.height&&y(this,It,fw).call(this,s.width,s.height)})),l(this,mn).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=l(this,mn))==null||e.disconnect(),_(this,mn,null)},{once:!0}))},_t(uc,"_type","stamp"),_t(uc,"_editorType",kt.STAMP);let Eg=uc;var Oo,pl,Ci,Do,bn,vn,_n,_s,nr,gl,ml,Fe,ut,rr,Re,bw,Tg,Pg,Rg,cd;const Ws=class Ws{constructor({uiManager:t,pageIndex:e,div:s,accessibilityManager:n,annotationLayer:r,drawLayer:o,textLayer:a,viewport:c,l10n:h}){A(this,Re);A(this,Oo);A(this,pl,!1);A(this,Ci,null);A(this,Do,null);A(this,bn,null);A(this,vn,null);A(this,_n,null);A(this,_s,new Map);A(this,nr,!1);A(this,gl,!1);A(this,ml,!1);A(this,Fe,null);A(this,ut);const u=[...l(Ws,rr).values()];if(!Ws._initialized){Ws._initialized=!0;for(const f of u)f.initialize(h,t)}t.registerEditorTypes(u),_(this,ut,t),this.pageIndex=e,this.div=s,_(this,Oo,n),_(this,Ci,r),this.viewport=c,_(this,Fe,a),this.drawLayer=o,l(this,ut).addLayer(this)}get isEmpty(){return l(this,_s).size===0}get isInvisible(){return this.isEmpty&&l(this,ut).getMode()===kt.NONE}updateToolbar(t){l(this,ut).updateToolbar(t)}updateMode(t=l(this,ut).getMode()){switch(y(this,Re,cd).call(this),t){case kt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case kt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case kt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of l(Ws,rr).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Fe))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(l(this,ut).getMode()!==kt.INK)return;if(!t){for(const s of l(this,_s).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){l(this,ut).setEditingState(t)}addCommands(t){l(this,ut).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,Ci))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of l(this,_s).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,ut).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!l(this,Ci))return;const e=l(this,Ci).getEditableAnnotations();for(const s of e){if(s.hide(),l(this,ut).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){var n;_(this,ml,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of l(this,_s).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(l(this,Ci)){const r=l(this,Ci).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,ut).isDeletedAnnotationElement(a))continue;let c=e.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(a),c&&(l(this,ut).addChangedExistingAnnotation(c),c.renderAnnotationElement(o),c.show(!1)),o.show()}}y(this,Re,cd).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(Ws,rr).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),_(this,ml,!1)}getEditableAnnotation(t){var e;return((e=l(this,Ci))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,ut).getActive()!==t&&l(this,ut).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=l(this,Fe))!=null&&t.div&&!l(this,vn)&&(_(this,vn,y(this,Re,bw).bind(this)),l(this,Fe).div.addEventListener("pointerdown",l(this,vn),{signal:l(this,ut)._signal}),l(this,Fe).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Fe))!=null&&t.div&&l(this,vn)&&(l(this,Fe).div.removeEventListener("pointerdown",l(this,vn)),_(this,vn,null),l(this,Fe).div.classList.remove("highlighting"))}enableClick(){if(l(this,bn))return;const t=l(this,ut)._signal;_(this,bn,this.pointerdown.bind(this)),_(this,Do,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",l(this,bn),{signal:t}),this.div.addEventListener("pointerup",l(this,Do),{signal:t})}disableClick(){l(this,bn)&&(this.div.removeEventListener("pointerdown",l(this,bn)),this.div.removeEventListener("pointerup",l(this,Do)),_(this,bn,null),_(this,Do,null))}attach(t){l(this,_s).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,ut).isDeletedAnnotationElement(e)&&l(this,ut).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,_s).delete(t.id),(e=l(this,Oo))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,ml)&&t.annotationElementId&&l(this,ut).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,ut).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,l(this,gl)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,ut).addDeletedAnnotationElement(t.annotationElementId),$t.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,ut).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),l(this,ut).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,_n)&&(t._focusEventsAllowed=!1,_(this,_n,setTimeout(()=>{_(this,_n,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,ut)._signal}),e.focus())},0))),t._structTreeParentId=(s=l(this,Oo))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return l(this,ut).getId()}get _signal(){return l(this,ut)._signal}canCreateNewEmptyEditor(){var t;return(t=l(this,Re,Tg))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){l(this,ut).updateToolbar(t),l(this,ut).updateMode(t);const{offsetX:s,offsetY:n}=y(this,Re,Rg).call(this),r=this.getNextId(),o=y(this,Re,Pg).call(this,{parent:this,id:r,x:s,y:n,uiManager:l(this,ut),isCentered:!0,...e});o&&this.add(o)}deserialize(t){var e;return((e=l(Ws,rr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,ut)))||null}createAndAddNewEditor(t,e,s={}){const n=this.getNextId(),r=y(this,Re,Pg).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:l(this,ut),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(y(this,Re,Rg).call(this),!0)}setSelected(t){l(this,ut).setSelected(t)}toggleSelected(t){l(this,ut).toggleSelected(t)}isSelected(t){return l(this,ut).isSelected(t)}unselect(t){l(this,ut).unselect(t)}pointerup(t){const{isMac:e}=ss.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&l(this,nr)){if(_(this,nr,!1),!l(this,pl)){_(this,pl,!0);return}if(l(this,ut).getMode()===kt.STAMP){l(this,ut).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(l(this,ut).getMode()===kt.HIGHLIGHT&&this.enableTextSelection(),l(this,nr)){_(this,nr,!1);return}const{isMac:e}=ss.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;_(this,nr,!0);const s=l(this,ut).getActive();_(this,pl,!s||s.isEmpty())}findNewParent(t,e,s){const n=l(this,ut).findParent(e,s);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){var t,e;((t=l(this,ut).getActive())==null?void 0:t.parent)===this&&(l(this,ut).commitOrRemove(),l(this,ut).setActiveEditor(null)),l(this,_n)&&(clearTimeout(l(this,_n)),_(this,_n,null));for(const s of l(this,_s).values())(e=l(this,Oo))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,_s).clear(),l(this,ut).removeLayer(this)}render({viewport:t}){this.viewport=t,Uo(this.div,t);for(const e of l(this,ut).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,ut).commitOrRemove(),y(this,Re,cd).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Uo(this.div,{rotation:s}),e!==s)for(const n of l(this,_s).values())n.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,ut).viewParameters.realScale}};Oo=new WeakMap,pl=new WeakMap,Ci=new WeakMap,Do=new WeakMap,bn=new WeakMap,vn=new WeakMap,_n=new WeakMap,_s=new WeakMap,nr=new WeakMap,gl=new WeakMap,ml=new WeakMap,Fe=new WeakMap,ut=new WeakMap,rr=new WeakMap,Re=new WeakSet,bw=function(t){l(this,ut).unselectAll();const{target:e}=t;if(e===l(this,Fe).div||e.classList.contains("endOfContent")&&l(this,Fe).div.contains(e)){const{isMac:s}=ss.platform;if(t.button!==0||t.ctrlKey&&s)return;l(this,ut).showAllEditors("highlight",!0,!0),l(this,Fe).div.classList.add("free"),this.toggleDrawing(),wd.startHighlighting(this,l(this,ut).direction==="ltr",t),l(this,Fe).div.addEventListener("pointerup",()=>{l(this,Fe).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ut)._signal}),t.preventDefault()}},Tg=function(){return l(Ws,rr).get(l(this,ut).getMode())},Pg=function(t){const e=l(this,Re,Tg);return e?new e.prototype.constructor(t):null},Rg=function(){const{x:t,y:e,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+n),h=(r+a)/2-t,u=(o+c)/2-e,[f,p]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:f,offsetY:p}},cd=function(){_(this,gl,!0);for(const t of l(this,_s).values())t.isEmpty()&&t.remove();_(this,gl,!1)},_t(Ws,"_initialized",!1),A(Ws,rr,new Map([og,mg,Eg,wd].map(t=>[t._editorType,t])));let xg=Ws;var xi,Jh,ge,or,Zh,kg,qo,Mg,vw;const Ee=class Ee{constructor({pageIndex:t}){A(this,qo);A(this,xi,null);A(this,Jh,0);A(this,ge,new Map);A(this,or,new Map);this.pageIndex=t}setParent(t){if(!l(this,xi)){_(this,xi,t);return}if(l(this,xi)!==t){if(l(this,ge).size>0)for(const e of l(this,ge).values())e.remove(),t.append(e);_(this,xi,t)}}static get _svgFactory(){return Mt(this,"_svgFactory",new um)}highlight(t,e,s,n=!1){const r=cs(this,Jh)._++,o=y(this,qo,Mg).call(this,t.box);o.classList.add("highlight"),t.free&&o.classList.add("free");const a=Ee._svgFactory.createElement("defs");o.append(a);const c=Ee._svgFactory.createElement("path");a.append(c);const h=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",h),c.setAttribute("d",t.toSVGPath()),n&&l(this,or).set(r,c);const u=y(this,qo,vw).call(this,a,h),f=Ee._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",e),o.setAttribute("fill-opacity",s),f.setAttribute("href",`#${h}`),l(this,ge).set(r,o),{id:r,clipPathId:`url(#${u})`}}highlightOutline(t){const e=cs(this,Jh)._++,s=y(this,qo,Mg).call(this,t.box);s.classList.add("highlightOutline");const n=Ee._svgFactory.createElement("defs");s.append(n);const r=Ee._svgFactory.createElement("path");n.append(r);const o=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",o),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(t.free){s.classList.add("free");const u=Ee._svgFactory.createElement("mask");n.append(u),a=`mask_p${this.pageIndex}_${e}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const f=Ee._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Ee._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const c=Ee._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const h=c.cloneNode();return s.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),l(this,ge).set(e,s),e}finalizeLine(t,e){const s=l(this,or).get(t);l(this,or).delete(t),this.updateBox(t,e.box),s.setAttribute("d",e.toSVGPath())}updateLine(t,e){l(this,ge).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),l(this,or).delete(t)}updatePath(t,e){l(this,or).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var s;y(s=Ee,Zh,kg).call(s,l(this,ge).get(t),e)}show(t,e){l(this,ge).get(t).classList.toggle("hidden",!e)}rotate(t,e){l(this,ge).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){l(this,ge).get(t).setAttribute("fill",e)}changeOpacity(t,e){l(this,ge).get(t).setAttribute("fill-opacity",e)}addClass(t,e){l(this,ge).get(t).classList.add(e)}removeClass(t,e){l(this,ge).get(t).classList.remove(e)}remove(t){l(this,xi)!==null&&(l(this,ge).get(t).remove(),l(this,ge).delete(t))}destroy(){_(this,xi,null);for(const t of l(this,ge).values())t.remove();l(this,ge).clear()}};xi=new WeakMap,Jh=new WeakMap,ge=new WeakMap,or=new WeakMap,Zh=new WeakSet,kg=function(t,{x:e=0,y:s=0,width:n=1,height:r=1}={}){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*r}%`},qo=new WeakSet,Mg=function(t){var s;const e=Ee._svgFactory.create(1,1,!0);return l(this,xi).append(e),e.setAttribute("aria-hidden",!0),y(s=Ee,Zh,kg).call(s,e,t),e},vw=function(t,e){const s=Ee._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${e}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Ee._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n},A(Ee,Zh);let Lg=Ee;vt.AbortException;vt.AnnotationEditorLayer;vt.AnnotationEditorParamsType;vt.AnnotationEditorType;vt.AnnotationEditorUIManager;vt.AnnotationLayer;vt.AnnotationMode;vt.CMapCompressionType;vt.ColorPicker;vt.DOMSVGFactory;vt.DrawLayer;vt.FeatureTest;var zP=vt.GlobalWorkerOptions;vt.ImageKind;vt.InvalidPDFException;vt.MissingPDFException;vt.OPS;vt.PDFDataRangeTransport;vt.PDFDateString;vt.PDFWorker;vt.PasswordResponses;vt.PermissionFlag;vt.PixelsPerInch;vt.RenderingCancelledException;vt.TextLayer;vt.UnexpectedResponseException;vt.Util;vt.VerbosityLevel;vt.XfaLayer;vt.build;vt.createValidAbsoluteUrl;vt.fetchData;var UP=vt.getDocument;vt.getFilenameFromUrl;vt.getPdfFilenameFromUrl;vt.getXfaPageViewport;vt.isDataScheme;vt.isPdfFile;vt.noContextMenu;vt.normalizeUnicode;vt.setLayerDimensions;vt.shadow;vt.version;const vm=i=>(u_("data-v-eb72d307"),i=i(),d_(),i),WP={class:"container mt-5"},VP={class:"pdf-viewer"},GP={key:0,class:"loading"},qP=vm(()=>xt("div",{class:"spinner-border text-primary",role:"status"},[xt("span",{class:"sr-only"},"Loading...")],-1)),XP=[qP],KP={class:"image-container"},YP={class:"scrollable-image"},QP=["src"],JP={class:"controls"},ZP={class:"navigation"},tR=["disabled"],eR=vm(()=>xt("i",{class:"fas fa-chevron-left"},null,-1)),sR=[eR],iR=["max"],nR={class:"font-color"},rR=["disabled"],oR=vm(()=>xt("i",{class:"fas fa-chevron-right"},null,-1)),aR=[oR],lR={__name:"IndexPage",setup(i){zP.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.5.136/build/pdf.worker.min.mjs";const t=Pi(1),e=Pi(0),s=Pi(!0);let n=null;const r=Pi(""),o=Pi(1),a=async()=>{s.value=!0;try{n=await UP("/golf-guide.pdf").promise,e.value=n.numPages,await c(t.value),s.value=!1}catch(m){console.error("Error loading PDF:",m)}},c=async m=>{try{const v=await n.getPage(m),E=v.getViewport({scale:1.5}),w=document.createElement("canvas"),C=w.getContext("2d");w.width=E.width,w.height=E.height;const T={canvasContext:C,viewport:E};await v.render(T).promise,r.value=w.toDataURL("image/png")}catch(v){console.error("Error rendering page:",v)}};ic(t,async m=>{m>=1&&m<=e.value&&await c(m)});const h=()=>{o.value=Math.min(3,o.value+.1)},u=()=>{o.value=Math.max(.5,o.value-.1)},f=()=>{t.value<e.value&&t.value++},p=()=>{t.value>1&&t.value--},g=m=>{m>=1&&m<=e.value&&(t.value=m)};return b_(()=>{a()}),(m,v)=>(es(),As("div",WP,[xt("div",VP,[s.value?(es(),As("div",GP,XP)):dd("",!0),vb(xt("div",KP,[xt("div",YP,[r.value?(es(),As("img",{key:0,src:r.value,alt:"PDF Page",class:"pdf-page",style:Gd({transform:`scale(${o.value})`})},null,12,QP)):dd("",!0)])],512),[[dC,!s.value]]),xt("div",JP,[xt("div",ZP,[xt("button",{class:"btn btn-secondary btn-small",onClick:p,disabled:t.value===1},sR,8,tR),vb(xt("input",{"onUpdate:modelValue":v[0]||(v[0]=E=>t.value=E),type:"number",min:1,max:e.value,class:"form-control w-25",onChange:v[1]||(v[1]=E=>g(t.value))},null,40,iR),[[PC,t.value,void 0,{number:!0}]]),xt("span",nR,"/ "+pa(e.value),1),xt("button",{class:"btn btn-secondary btn-small",onClick:f,disabled:t.value===e.value},aR,8,rR),xt("div",{class:"zoom-controls"},[xt("button",{class:"btn btn-secondary",onClick:h},"+"),xt("button",{class:"btn btn-secondary",onClick:u},"-")])])])])]))}},cR=eu(lR,[["__scopeId","data-v-eb72d307"]]),_f=i=>(u_("data-v-e07c00d2"),i=i(),d_(),i),hR={class:"container mt-5"},uR=_f(()=>xt("h1",{class:"text-center text-white"},"Golf Course List",-1)),dR={class:"list-group"},fR=["onClick"],pR={key:0,class:"modal fade show",style:{display:"block"},tabindex:"-1",role:"dialog"},gR={class:"modal-dialog",role:"document"},mR={class:"modal-content"},bR={class:"modal-header bg-dark text-white"},vR={class:"modal-title"},_R=_f(()=>xt("span",null,"",-1)),yR=[_R],AR={class:"modal-body"},wR=_f(()=>xt("p",null,"This page cannot be displayed in the app. Please click the button below to visit the booking page in a new tab.",-1)),ER=["src"],SR={key:0,class:"alert alert-danger mt-2"},CR=_f(()=>xt("p",null,"Error loading booking page. Please try again later or click the button below to open the page in a new tab.",-1)),xR={__name:"GolfCourseList",setup(i){const t=Pi(!1),e=Pi(""),s=Pi(!1),n=Pi(!1),r={andratx:{name:"GOLF ANDRATX",url:"https://open.imaster.golf/en/andratx/disponibilidad",openInModal:!0},santaponsa1:{name:"SANTA PONSA 1",url:"https://open.imaster.golf/es/santa-ponsa/disponibilidad",openInModal:!0},santaponsa2:{name:"SANTA PONSA 2 & 3",url:"https://open.imaster.golf/en/andratx/disponibilidad",openInModal:!0},calvia:{name:"GOLF CALVIA",url:"https://tgolf.golfmanager.com/consumer/ebookings?i=1",openInModal:!0},bendinat:{name:"GOLF DE BENDINAT",url:"https://open.imaster.golf/en/bendinat/disponibilidad",openInModal:!0},sonvida:{name:"ARABELLA GOLF SON VIDA",url:"https://arabella.golfmanager.com/consumer/ebookings?resource=&resourcetype=2",openInModal:!1},sonmuntaner:{name:"GOLF DE SON MUNTANER",url:"https://arabella.golfmanager.com/consumer/ebookings?resource=&resourcetype=1",openInModal:!1},sonquint:{name:"GOLF DE SON QUINT",url:"https://arabella.golfmanager.com/consumer/ebookings?resource=&resourcetype=3",openInModal:!1},sontermes:{name:"GOLF DE SON TERMES",url:"https://open.imaster.golf/en/son-termes/disponibilidad",openInModal:!0},puntiro:{name:"T GOLF PALMA PUNTIRO",url:"https://tgolfpalma.golfmanager.com/consumer/ebookings",openInModal:!1},songual:{name:"GOLF SON GUAL",url:"https://songual.golfmanager.com/consumer/ebookings",openInModal:!1},maioris:{name:"GOLF MAIORIS",url:"https://open.imaster.golf/es/maioris/disponibilidad",openInModal:!0},antemeast:{name:"GOLF DE SON ANTEM EAST",url:"https://sonantem.golfmanager.com/consumer/ebookings",openInModal:!1},antemwest:{name:"GOLF DE SON ANTEM WEST",url:"https://sonantem.golfmanager.com/consumer/ebookings?resource=&resourcetype=2",openInModal:!1},dor:{name:"VALL DOR GOLF",url:"https://open.imaster.golf/es/valldorgolf/disponibilidad",openInModal:!0},sonservera:{name:"CLUB DE GOLF SON SERVERA",url:"https://open.imaster.golf/es/sonservera/disponibilidad",openInModal:!0},pula:{name:"PULA GOLF",url:"https://open.imaster.golf/es/pula/disponibilidad",openInModal:!0},canyamel:{name:"CANYAMEL GOLF",url:"https://open.imaster.golf/en/canyamel/disponibilidad",openInModal:!0},capdepera:{name:"CAPDEPERA GOLF",url:"https://open.imaster.golf/en/capdepera/disponibilidad",openInModal:!0},alcanada:{name:"CLUB DE GOLF ALCANADA",url:"https://open.imaster.golf/en/alcanada/disponibilidad",openInModal:!0},pollenca:{name:"POLLENA GOLF",url:"https://open.imaster.golf/es/golfpollensa/disponibilidad",openInModal:!0}},o=u=>{e.value=u,s.value=!r[u].openInModal,n.value=!1,t.value=!0},a=()=>{const u=r[e.value].url;u&&window.open(u,"_blank"),t.value=!1},c=()=>{n.value=!1},h=()=>{n.value=!0};return(u,f)=>(es(),As("div",hR,[uR,xt("div",dR,[(es(),As(Ds,null,fS(r,(p,g)=>xt("button",{key:g,class:"list-group-item list-group-item-action bg-primary text-white",onClick:m=>o(g)},pa(p.name),9,fR)),64))]),t.value?(es(),As("div",pR,[xt("div",gR,[xt("div",mR,[xt("div",bR,[xt("h5",vR,pa(s.value?"Open Course Page":r[e.value].name),1),xt("button",{type:"button",class:"close",onClick:f[0]||(f[0]=p=>t.value=!1)},yR)]),xt("div",AR,[s.value?(es(),As(Ds,{key:0},[wR,xt("button",{class:"btn btn-success",onClick:a},pa(r[e.value].name)+" Open booking page ",1)],64)):(es(),As(Ds,{key:1},[xt("iframe",{src:r[e.value].url,onLoad:c,onError:h,style:{width:"100%","min-height":"666px",border:"none"}},null,40,ER),n.value?(es(),As("div",SR,[CR,xt("button",{class:"btn btn-success",onClick:a},pa(r[e.value].name)+" Open booking page ",1)])):dd("",!0)],64))])])])])):dd("",!0)]))}},TR=eu(xR,[["__scopeId","data-v-e07c00d2"]]),PR=[{path:"/",name:"index",component:cR},{path:"/golf-courses",name:"golf-courses",component:TR}],RR=Bx({history:px(void 0),routes:PR});kC(zT).use(RR).mount("#app");
